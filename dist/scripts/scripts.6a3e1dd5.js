function numberWithCommas(a){var b=a.toString().split(".");return b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),b.join(".")}angular.module("ohanaApp",["ngAnimate","ui.bootstrap","ui.select","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","summernote","ui.timepicker","LocalStorageModule","ngMap","firebase","angularFileUpload","bcherny/formatAsCurrency","xeditable","chart.js","ui.map","ui.bootstrap.datetimepicker"]).config(["$routeProvider","$httpProvider","$locationProvider",function(a,b,c){c.hashPrefix(""),a.when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl as home"}).when("/whoweare",{templateUrl:"views/whoweare.html"}).when("/getinvolved",{templateUrl:"views/getinvolved.html",controller:"GetinvolvedCtrl as getinvolved"}).when("/chapters",{templateUrl:"views/chapters.html",controller:"ChaptersCtrl as chapters"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl as login"}).when("/manage/dash",{templateUrl:"views/manage/dash.html",controller:"DashCtrl as dash"}).when("/dash/upcoming-events",{templateUrl:"views/manage/dash.upcomingEvents.html",controller:"DashUpcomingEventsCtrl as dashUpcomingEvents"}).when("/dash/broadcasts",{templateUrl:"views/manage/dash.broadcasts.html",controller:"DashBroadcastsCtrl as dashBroadcasts"}).when("/manage/events",{templateUrl:"views/manage/events.html",controller:"EventsCtrl as events"}).when("/events",{templateUrl:"views/publicevents.html",controller:"PubliceventsCtrl as publicEvents"}).when("/details/:id",{templateUrl:"views/manage/event.details.html",controller:"DetailsCtrl as eventDetail"}).when("/description",{templateUrl:"views/manage/event.details.description.html",controller:"EventdetaildescriptionCtrl as eventDescription"}).when("/volunteers",{templateUrl:"views/manage/event.details.volunteers.html",controller:"EventdetailvolunteersCtrl as eventVolunteers"}).when("/participants",{templateUrl:"views/manage/event.details.participants.html",controller:"EventdetailparticipantsCtrl as eventParticipants"}).when("/inventory",{templateUrl:"views/manage/event.details.equipment.html",controller:"InventoryCtrl as inventory"}).when("/notifications",{templateUrl:"views/manage/event.details.notifications.html",controller:"EventdetailnotificationCtrl as eventNotifications"}).when("/manage/broadcasts",{templateUrl:"views/manage/broadcasts.html",controller:"BroadcastsCtrl as broadcasts"}).when("/manage/inventory",{templateUrl:"views/manage/inventory.html",controller:"InventoryCtrl as inventory"}).when("/manage/training",{templateUrl:"views/manage/training.html"}).when("/manage/hours",{templateUrl:"views/manage/hours.html"}).when("/manage/directory",{templateUrl:"views/manage/directory.html",controller:"DirectoryCtrl as directory"}).when("/manage/profile",{templateUrl:"views/manage/profile.html",controller:"ProfileCtrl as profile"}).when("/manage/chadmin",{templateUrl:"views/manage/chadmin.html",controller:"ChadminCtrl",controllerAs:"manage/chadmin"}).when("/manage/regAdmin",{templateUrl:"views/manage/regadmin.html"}).when("/superAdmin",{templateUrl:"views/manage/superadmin.html"}).when("/publicEvents",{templateUrl:"views/public.events.html",controller:"PublicEventsCtrl",controllerAs:"public.events"}).when("/expense/expensedetail/:BillId",{templateUrl:"views/expense/expensedetail.html",controller:"ExpenseDetailsCtrl",controllerAs:"expensedetail"}).when("/expense/newexpense",{templateUrl:"views/expense/newexpense.html",controller:"NewExpenseCtrl",controllerAs:"newexpense"}).when("/expense/viewexpense",{templateUrl:"views/expense/viewexpense.html",controller:"ViewExpenseController",controllerAs:"expense/viewexpense"}).when("/manage/chapterchat",{templateUrl:"views/manage/chapterchat.html",controller:"ManageChapterchatCtrl",controllerAs:"manage/chapterchat"}).when("/expense/CustomDateRange",{templateUrl:"views/expense/customdaterange.html",controller:"ExpenseCustomdaterangeCtrl",controllerAs:"expense/CustomDateRange"}).when("/expense/overview",{templateUrl:"views/expense/overview.html",controller:"ExpenseOverviewCtrl",controllerAs:"expense/overview"}).when("/expense/expenseconfig",{templateUrl:"views/expense/expenseconfig.html",controller:"ExpenseExpenseconfigCtrl",controllerAs:"expense/expenseconfig"}).otherwise({redirectTo:"/home"})}]).run(["$q","commonServices","$rootScope","$firebaseAuth","userService","editableOptions",function(a,b,c,d,e,f){f.theme="bs3";var g={apiKey:"AIzaSyCCBKaq_W1XMDeAi0A7IjqjbTl0Svr7u78",authDomain:"herosonthewatertest2.firebaseapp.com",databaseURL:"https://herosonthewatertest2.firebaseio.com",projectId:"herosonthewatertest2",storageBucket:"herosonthewatertest2.appspot.com",messagingSenderId:"569173546476"};0===firebase.apps.length&&firebase.initializeApp(g),c.authObj=d(),c.siteData={states:[],roles:[],regions:[],regionsChapters:[],chapters:[]};var h=b.getData("/siteData/");a.all([h]).then(function(a){_.each(a[0].states,function(a){c.siteData.states.push(a)}),_.each(a[0].roles,function(a){c.siteData.roles.push(a)}),_.each(a[0].regions,function(a){c.siteData.regions.push(a)}),_.each(a[0].chapters,function(a,b){a.key=b,c.siteData.chapters.push(a)}),_.each(c.siteData.regions,function(a){var b=[];_.each(c.siteData.chapters,function(c){c.region===a.value&&b.push(c)}),c.siteData.regionsChapters.push({text:a.text,value:a.value,chapters:b})}),console.log(c.siteData)}),c.authObj.$onAuthStateChanged(function(d){if(d){var f=firebase.auth().currentUser.uid,g=b.getData("/userData/"+f),h=b.getData("/userRoles/"+f+"/role/");a.all([g,h]).then(function(a){var b=a[0],d=a[1];console.log("Logged in!"),console.log("UID: "+f),console.log("Name: "+b.name.first+" "+b.name.last),console.log("Chapter: "+b.Chapter.text),console.log("Role: "+d),e.setRole(d),e.setUserData(b),e.setUserName(b.name.first,b.name.last),e.setId(f),e.setChapter(b.Chapter),c.sessionState=!0,c.$broadcast("changeSessionUserRole",d),c.$broadcast("changeSessionState",!0)})}else console.log("Logged Out..."),e.setRole(""),e.setUserData(""),e.setUserName("",""),e.setId(""),e.setChapter("")})}]).filter("unique",function(){return function(a,b){var c,d,e,f,g=[],h=(a.length,[]);for(c=0;c<a.length;c++){for(f=a[c],e=!0,d=0;d<g.length;d++)f[b]==g[d]&&(e=!1);e&&(g.push(f[b]),h.push(f))}return h}}).filter("dateRange",function(){return function(a,b,c){var d=[];return null!=a&&null!=b&&null!=c?(angular.forEach(a,function(a){var e=a.SubmitDate;Date.parse(e)>=Date.parse(b)&&Date.parse(e)<=Date.parse(c)&&d.push(a)}),d):void 0}}),angular.module("ohanaApp").service("Api",["$resource",function(a){"use strict";var b=window.location,c="localhost"===b.hostname||b.hostname.indexOf("txcdtl08tm638x")>-1?"http://ec2-52-43-72-217.us-west-2.compute.amazonaws.com:1337":b.protocol+"//"+b.hostname;return{ezmoney:function(){},createChapter:a(c+"/region/:region_id/create_chapter",{region_id:"@region_id"},{save:{method:"POST",isArray:!1}}),regionAddChapter:a(c+"/region/:region_id/add_chapter/:chapter_id",{region_id:"@region_id",chapter_id:"@chapter_id"},{update:{method:"PUT",isArray:!1}}),regionDeleteChapter:a(c+"/region/:region_id/delete_chapter/:chapter_id",{region_id:"@region_id",chapter_id:"@chapter_id"},{remove:{method:"POST",isArray:!1}}),chapter:a(c+"/chapter",{},{}),chapterCreateMember:a(c+"/chapter/:chapter_id/create_member",{chapter_id:"@chapter_id"},{save:{method:"POST",isArray:!1}}),chapterRemoveMember:a(c+"/chapter/:chapter_id/delete_member/:member_id",{member_id:"@member_id",chapter_id:"@chapter_id"},{remove:{method:"DELETE",isArray:!1}}),chapterUpdateMember:a(c+"/chapter/:chapter_id/update_member/:member_id",{member_id:"@member_id",chapter_id:"@chapter_id"},{update:{method:"POST",isArray:!1}}),createEvent:a(c+"/chapter/:chapter_id/create_event",{chapter_id:"@chapter_id"},{save:{method:"POST",isArray:!1}}),chapterAddEvent:a(c+"/chapter/:chapter_id/add_event/:event_id",{event_id:"@event_id",chapter_id:"@chapter_id"},{update:{method:"PUT",isArray:!1}}),chapterRemoveEvent:a(c+"/chapter/:chapter_id/delete_event/:event_id",{event_id:"@event_id",chapter_id:"@chapter_id"},{remove:{method:"POST",isArray:!1}}),createItem:a(c+"/chapter/:chapter_id/create_item",{chapter_id:"@chapter_id"},{save:{method:"POST",isArray:!1}}),chapterAddItem:a(c+"/chapter/:chapter_id/add_item/:item_id",{item_id:"@item_id",chapter_id:"@chapter_id"},{update:{method:"PUT",isArray:!1}}),chapterRemoveItem:a(c+"/chapter/:chapter_id/delete_item/:item_id",{item_id:"@item_id",chapter_id:"@chapter_id"},{remove:{method:"POST",isArray:!1}}),chapterUpdateItem:a(c+"/chapter/:chapter_id/update_item/:member_id",{item_id:"@item_id",chapter_id:"@chapter_id"},{update:{method:"POST",isArray:!1}}),events:a(c+"/events/:event_id",{event_id:"@event_id"},{update:{method:"PUT"}}),getCurrentEvent:a(c+"/events/:event_id",{event_id:"@event_id"},{query:{method:"GET",isArray:!1}}),getMembersByEvent:a(c+"/events/:event_id/members",{event_id:"@event_id"},{query:{method:"GET",isArray:!0}}),addMemberToEvent:a(c+"/events/:event_id/add_member/:member_id",{event_id:"@event_id",member_id:"@member_id"},{save:{method:"POST",isArray:!1}}),dropMemberFromEvent:a(c+"/events/:event_id/drop_member/:member_id",{event_id:"@event_id",member_id:"@member_id"},{remove:{method:"POST",isArray:!1}}),reserveItemToEvent:a(c+"/events/:event_id/reserve_item/:item_id",{item_id:"@item_id",event_id:"@event_id"},{save:{method:"POST",isArray:!1}}),freeItemFromEvent:a(c+"/events/:event_id/free_item/:item_id",{item_id:"@item_id",member_id:"@member_id"},{remove:{method:"POST",isArray:!1}}),getVolunteersForEvent:a(c+"/events/get_volunteers/:event_id",{event_id:"@event_id"},{query:{method:"GET",isArray:!0}}),getParticipantsForEvent:a(c+"/events/get_participants/:event_id",{event_id:"@event_id"},{query:{method:"GET",isArray:!0}}),item:a(c+"/item",{},{}),getChapterItems:a(c+"/chapter/:chapter_id/items",{chapter_id:"@chapter_id"},{query:{method:"GET",isArray:!0}}),getEventItems:a(c+"/events/:event_id/items",{chapter_id:"@event_id"},{query:{method:"GET",isArray:!0}}),member:a(c+"/member",{},{}),retrieveLogin:a(c+"/member/get_login/:member_id",{id:"@id"},{query:{method:"GET"}}),updateLogin:a(c+"/member/login/update/:member_id",{id:"@id"},{update:{method:"PUT"}}),memberUpdateChapter:a(c+"/member/:member_id/change_chapter/:from_chapter_id/:to_chapter_id",{member_id:"@member_id",from_chapter_id:"@from_chapter_id",to_chapter_id:"@to_chapter_id"},{update:{method:"PUT"}}),session:a(c+"/session/login",{},{query:{method:"GET"},save:{method:"POST",isArray:!1}})}}]),angular.module("ohanaApp").service("dataGridUtil",function(){"use strict";var a=this;a.buildMembersTableData=function(a){for(var b=a.length,c=[],d=0;b>d;d++){var e={};e.key=a[d].key,e.row_id=d,e.first=a[d].name.first,e.last=a[d].name.last;var f=new Date(a[d].DOB),g=f.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"});e.dob=g,e.email=a[d].email,e.phone=a[d].phone,e.role=a[d].role,e.primaryChapter=a[d].Chapter.text||"none",e.chapters=[],_.each(a[d].Chapters,function(a){e.chapters.push(a.chapter.text)}),a[d].Chapters||e.chapters.push("none"),a[d].branch?e.branch=a[d].branch:e.branch="none",a[d].notes?e.notes=a[d].notes:e.notes="none",c.push(e)}return c},a.buildInventoryTableData=function(a){for(var b=a.length,c=[],d=0;b>d;d++){var e={};if(e.DT_RowId=a[d].item_id,e.name_of_item=a[d].name_of_item,e.category=a[d].category,e.condition=a[d].condition,a[d].purchase_date){var f=new Date(a[d].purchase_date),g=f.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"});e.purchase_date=g}else e.purchase_date="";0!=a[d].reservations.length?e.reservedFlag=!1:e.reservedFlag=!0,a[d].chapter?e.chapter=a[d].chapter.name:e.chapter="",a[d].notes?e.notes=a[d].notes:e.notes="",c.push(e)}return c},a.buildEventPeopleTableData=function(a){for(var b=a.length,c=[],d=0;b>d;d++){var e={};e.DT_RowId=a[d].id,e.first_name=a[d].first_name,e.last_name=a[d].last_name,e.email=a[d].email,c.push(e)}return c},a.buildChaptersTableData=function(a){for(var b=a.length,c="",d="",e=[],f=0;b>f;f++){c=a[f].key,delete a[f].key,delete a[f].regions;for(var g in a[f])(null===a[f][g]||void 0===a[f][g]||a[f][g]===!0)&&delete a[f][g];for(var d in a[f])for(var h in a[f][d]){var i={};i.key=Object.keys(a[f][d])[0],i.region=c,i.state=d,i.name=a[f][d][h].name,i.description=a[f][d][h].description,i.chadmin=a[f][d][h].chadmin?a[f][d][h].chadmin:"none",i.facebook=a[f][d][h].url,i.facebook_link=a[f][d][h].url_link,i.email=a[f][d][h].email,i.email_link=a[f][d][h].email_link,i.zip=a[f][d][h].zip,i.googleMaps="https://www.google.com/maps/place/"+a[f][d][h].lat+","+a[f][d][h].lng,i.googleMaps_Link="<a href='"+i.googleMaps+"' target='_blank' class='storelocatorlink'>"+i.googleMaps+"</a><br/>",i.donation=a[f][d][h].donation?a[f][d][h].donation:"https://www.paypal.com/donate/?token=3TyOO6taytT0isxzdLwbDz8GvB6JtWLIzuZy0fjN3K4-PihZMiVhpPbECt0JiW7IkR8mfG",i.donation_link="<a href='"+i.donation+"' target='_blank' class='storelocatorlink'>"+i.donation+"</a><br/>",e.push(i)}a[f].key=c}return e}}),angular.module("ohanaApp").directive("masterNavigation",function(){"use strict";return{templateUrl:"views/masternav.html",restrict:"E",controller:["$rootScope","commonServices","$scope","$uibModal",function(a,b,c,d){c.sessionState=a.sessionState,c.sessionUserRole=a.userRole,c.$on("changeSessionState",function(a,b){c.sessionState=b}),c.$on("changeSessionUserRole",function(a,b){c.sessionUserRole=b}),c.menuActive=!1,c.toggleMenu=function(){c.menuActive===!1?($(".hamburger--slider").addClass("is-active"),$(".mobilenavtoggle button").css("position","fixed"),$(".mobilenavtoggle button").css("margin-right","8px"),c.menuActive=!0):c.menuActive===!0&&($(".hamburger--slider").removeClass("is-active"),$(".mobilenavtoggle button").css("position","absolute"),$(".mobilenavtoggle button").css("margin-right","0px"),c.menuActive=!1)},c.dismissMenu=function(){c.menuActive=!1,$(".hamburger--slider").removeClass("is-active"),$(".mobilenavtoggle button").css("position","absolute"),$(".mobilenavtoggle button").css("margin-right","0px"),c.menuActive=!1},c.logout=function(){c.sessionState=!1,a.sessionState=!1,c.sessionUserRole=!1,b.signout(),c.toggleMenu()},c.leftnav=[{state:"#/whoweare",text:"WHO WE ARE"},{state:"#/getinvolved",text:"GET INVOLVED"},{state:"#/publicEvents",text:"EVENTS"}],c.rightnav=[{state:"#/login",text:"LOGIN"}],c.rightnavloggedin=[{state:"#/manage/dash",text:"MANAGE"},{}],c.participantNav=[{state:"#/manage/chapterchat",text:"Chapter Chat"},{state:"#/expense/viewexpense",text:"Expense"},{state:"#/manage/profile",text:"My Profile"}],c.volunteerNav=[{state:"#/manage/chapterchat",text:"Chapter Chat"},{state:"#/expense/viewexpense",text:"Expense"},{state:"#/manage/profile",text:"My Profile"}],c.ltmNav=[{state:"#/manage/chadmin",text:"Chapter Administration"},{state:"#/manage/chapterchat",text:"Chapter Chat"},{state:"#/manage/events",text:"Events"},{state:"#/expense/viewexpense",text:"Expense"},{state:"#/manage/directory",text:"Member Directory"},{state:"#/manage/profile",text:"My Profile"}],c.nationalNav=[{state:"#/manage/chadmin",text:"Chapter Administration"},{state:"#/manage/chapterchat",text:"Chapter Chat"},{state:"#/manage/events",text:"Events"},{state:"#/expense/viewexpense",text:"Expense"},{state:"#/manage/directory",text:"Member Directory"},{state:"#/manage/profile",text:"My Profile"}],c.showDonate=function(){window.open("https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=5WAD6PF3BUHPE")}}]}}),angular.module("ohanaApp").directive("masterFooter",function(){"use strict";return{templateUrl:"views/masterfooter.html",restrict:"E",controller:["$scope",function(a){}]}}),angular.module("ohanaApp").controller("HomeCtrl",["$scope","$location",function(a,b){"use strict";a.vidtoggle=!1,a.zipCode="",a.videoToggle=function(){a.vidtoggle?(a.vidtoggle=!1,$("#videoplayer").each(function(){this.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")})):a.vidtoggle?(a.vidtoggle=!1,$("#videoplayer").each(function(){this.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})):a.vidtoggle=!0},a.chapterSearch=function(){b.path("/chapters").search({zipCode:a.zipCode})}}]),angular.module("ohanaApp").controller("LoginCtrl",["$q","commonServices","$scope","$rootScope","$uibModal","$location",function(a,b,c,d,e,f){"use strict";c.logObj={},c.checkLogin=function(c){var d=b.signin(c);a.all([d]).then(function(a){"SUCCESS"===a[0].type?(swal("Success","Logged in successfully!","success"),window.location.replace("#/manage/dash")):swal("error",a[0].code+": "+a[0].message,"error")})},c.addUser=function(){var a=e.open({templateUrl:"/parts/newUserDirectoryForm.html",controller:"NewUserDirectoryFormCtrl",backdrop:"static"});a||c.update()},c.passwordReset=function(){var a=e.open({templateUrl:"/parts/passwordReset.html",controller:"passwordResetFormCtrl"});a||c.update()}}]),angular.module("ohanaApp").controller("ChaptersCtrl",["commonServices","$scope","$rootScope","$q","$http","$filter","$location","NgMap",function(a,b,c,d,e,f,g,h){"use strict";var i=g.search();b.locationFilter=i.zipCode,b.ZipUpdate=function(){a.addressLookup(b.locationFilter,function(a){1==a.success&&b.locationUpdate(a.results)})},b.ZipUpdate(),b.locationUpdate=function(d){a.zipCompare(d).then(function(a){b.chapters=_.filter(c.siteData.chapters,function(b){return b.region===a[1].value})})}}]),angular.module("ohanaApp").controller("WhoweareCtrl",function(){"use strict"}),angular.module("ohanaApp").controller("GetinvolvedCtrl",["$scope",function(a){"use strict"}]),angular.module("ohanaApp").controller("PublicEventsCtrl",["$q","commonServices","$scope","$uibModal","Api","userService","$filter",function(a,b,c,d,e,f,g){"use strict";c.newQuery={},c.userService=f,c.allVolunteerIsDisableds=[],c.allParticipantIsDisableds=[];var h=function(){var d=b.getPublicEvents();a.all([d]).then(function(a){if(a[0]){var b=0;_.each(a[0],function(a,d){c.allVolunteerIsDisableds.push({key:d,isDisabled:!1}),c.allParticipantIsDisableds.push({key:d,isDisabled:!1}),c.checkAllVolunteerIsDisableds(d,b),c.checkAllParticipantIsDisableds(d,b),b++}),c.eventList=a[0],c.eventList2=angular.copy(c.eventList),console.log(c.eventList,c.eventList2)}else console.log("Failed to get Events...")})};h(),c.checkAllVolunteerIsDisableds=function(a,d){b.getUserByEmailAtPath(c.userService.getUserData().email,"/events/"+a+"/volunteers").then(function(b){b&&c.allVolunteerIsDisableds.some(function(b,e){return b.key==a?(c.allVolunteerIsDisableds[d].isDisabled=!0,c.$apply(),!0):void 0})})},c.testingTester=function(){return 5},c.testingTester2=function(){return e.getme()},c.checkAllParticipantIsDisableds=function(a,d){b.getUserByEmailAtPath(c.userService.getUserData().email,"/events/"+a+"/participants").then(function(b){b&&c.allParticipantIsDisableds.some(function(b,e){return b.key==a?(c.allParticipantIsDisableds[d].isDisabled=!0,c.$apply(),!0):void 0})})},c.popup1={opened:!1},c.popup2={opened:!1},c.$watch("dt",function(a){c.filtersRunner()}),c.$watch("dt2",function(a){c.filtersRunner()}),c.filtersRunner=function(){c.search(),c.dt&&c.dateMath(c.dt.getTime(),"lower"),c.dt2&&c.dateMath(c.dt2.getTime(),"upper")},c.dateMath=function(a,b){switch(b){case"lower":var d={};console.log(c.eventList),Object.keys(c.eventList).forEach(function(b,e){var f=c.eventList[b];a<=f.startTime&&(d[b]=c.eventList[b])}),c.eventList=d;break;case"upper":var e={};console.log(c.eventList),Object.keys(c.eventList).forEach(function(b,d){var f=c.eventList[b];f.startTime<=a&&(e[b]=c.eventList[b])}),c.eventList=e}},c.dateOptions={formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},c.open=function(){c.popup1.opened=!0},c.open2=function(){c.popup2.opened=!0},c.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],c.format=c.formats[0],c.altInputFormats=["M!/d!/yyyy"],c.search=function(){if(!c.newQuery.search)return void(c.eventList=c.eventList2);var a={};Object.keys(c.eventList2).forEach(function(b,d){var e=c.eventList2[b];for(var f in e)e.hasOwnProperty(f)&&("string"==typeof e[f]&&e[f].toLowerCase().includes(c.newQuery.search)?a[b]=c.eventList2[b]:"number"==typeof e[f]&&e[f].toString().toLowerCase().includes(c.newQuery.search)&&(a[b]=c.eventList2[b]))}),c.eventList=a},c.showDescription=function(a){c.currentEvent=c.eventList[a];d.open({scope:c,templateUrl:"/parts/public.events.description.html",controller:"PublicEventsDescriptionCtrl"})},c.showDescription=function(e){c.selected=c.eventList[e],console.log("Index is: "+e);var f=b.getEvent(c.selected);if(a.all([f]).then(function(a){a[0]?_.each(a[0],function(a){c.selected.email===a.email&&(console.log("Event: "+a.name),c.selected=a)}):c.selected=null}),null!=c.selected){d.open({scope:c,templateUrl:"/parts/public.events.description.html",controller:"PublicEventsDescriptionCtrl"})}},c.addVolunteer=function(a,e){if(c.allVolunteerIsDisableds[e].isDisabled){var f=c.userService.getUserData().email;b.getUserByEmail(f).then(function(d){if(d){var g;_.each(d,function(a,b){g=b,d[b].key=b}),b.getData("userRoles/"+g).then(function(d){"Participant"!==d.role?b.getUserByEmailAtPath(f,"/events/"+a+"/volunteers").then(function(d){if(console.log(d),d){var f=Object.keys(d)[0];b.removeData("/events/"+a+"/volunteers/",f),c.allVolunteerIsDisableds[e].isDisabled=!1,c.$apply()}else swal("Oops...","That volunteer has already been added","error")}):swal("Oops...","User not authorized to be added as a volunteer.","error")})}else swal("Oops...","That user doesn't exists","error")},function(a){swal("Oops...","Unknown Error","error")})}else{var f=c.userService.getUserData().email;b.getUserByEmail(f).then(function(g){if(g){var h;_.each(g,function(a,b){h=b,g[b].key=b}),b.getData("userRoles/"+h).then(function(i){"Participant"!==i.role?b.getUserByEmailAtPath(f,"/events/"+a+"/volunteers").then(function(i){console.log(i),i?swal("Oops...","That volunteer has already been added","error"):b.getUserByEmailAtPath(f,"/events/"+a+"/participants").then(function(f){if(f){var i=Object.keys(f)[0];b.removeData("/events/"+a+"/participants/"+i),c.allParticipantIsDisableds[e].isDisabled=!1,c.$apply()}var j=c.areWaiversUnsigned(g[h],a);if(j.witness){d.open({templateUrl:"/parts/sign_witness_waiver.html",controller:"SignWitnessWaiverCtrl",resolve:{}})}b.pushData("/events/"+a+"/volunteers",g[h]),c.allVolunteerIsDisableds[e].isDisabled=!0,c.$apply()})}):swal("Oops...","User not authorized to be added as a volunteer.","error")})}else swal("Oops...","That user doesn't exists","error")},function(a){swal("Oops...","Unknown Error","error")})}},c.addParticipant=function(a,e){if(c.allParticipantIsDisableds[e].isDisabled){var f=c.userService.getUserData().email;b.getUserByEmail(f).then(function(d){if(d){var g;_.each(d,function(a,b){g=b,d[b].key=b}),b.getData("userRoles/"+g).then(function(d){b.getUserByEmailAtPath(f,"/events/"+a+"/participants").then(function(d){if(d){var f=Object.keys(d)[0];b.removeData("/events/"+a+"/participants/"+f),c.allParticipantIsDisableds[e].isDisabled=!1,c.$apply()}else swal("Oops...","That participant has already been deleted","error")})})}else swal("Oops...","That user doesn't exists","error")},function(a){swal("Oops...","Unknown Error","error")})}else{var f=c.userService.getUserData().email;b.getUserByEmail(f).then(function(g){if(g){var h;_.each(g,function(a,b){h=b,g[b].key=b}),b.getData("userRoles/"+h).then(function(i){b.getUserByEmailAtPath(f,"/events/"+a+"/participants").then(function(i){console.log(i),i?swal("Oops...","That participant has already been added","error"):b.getUserByEmailAtPath(f,"/events/"+a+"/volunteers").then(function(f){if(f){var i=Object.keys(f)[0];b.removeData("/events/"+a+"/volunteers/"+i),c.allVolunteerIsDisableds[e].isDisabled=!1,c.$apply()}var j=c.areWaiversUnsigned(g[h],a);if(j.witness){d.open({templateUrl:"/parts/sign_witness_waiver.html",controller:"SignWitnessWaiverCtrl",resolve:{}})}if(j.event){d.open({templateUrl:"/parts/sign_event_waiver.html",controller:"SignEventWaiver",resolve:{eventKey:function(){return a}}})}b.pushData("/events/"+a+"/participants",g[h]),c.allParticipantIsDisableds[e].isDisabled=!0,c.$apply()})})})}else swal("Oops...","That user doesn't exists","error")},function(a){swal("Oops...","Unknown Error","error")})}},c.areWaiversUnsigned=function(a,b){var c={};if(a.witness){var d=new Date(a.witness.date_signed),e=new Date(Date.now()),f=new Date(e.getFullYear()-1,e.getMonth(),e.getDate());f>d?c.witness=!0:c.witness=!1}else c.witness=!0;return a.events&&a.events.hasOwnProperty(b)?c.event=!1:c.event=!0,c}}]),angular.module("ohanaApp").controller("DashCtrl",function(){"use strict"}),angular.module("ohanaApp").controller("DashUpcomingEventsCtrl",function(){"use strict"}),angular.module("ohanaApp").controller("DashBroadcastsCtrl",function(){"use strict"}),angular.module("ohanaApp").controller("EventsCtrl",["$q","commonServices","$scope","$uibModal","$location","DAO",function(a,b,c,d,e,f){"use strict";c.newQuery={};var g=[];c.filterTypes=["All","Past","Upcoming"],c.filter={};var h=function(){var d=b.getPublicEvents();g=[],a.all([d]).then(function(a){a[0]?(_.each(a[0],function(a,b){a.key=b,g.push(a)}),console.log(g),c.eventList=g):console.log("Failed to get Events...")})};h(),c.changeFilter=function(){var d=b.getPublicEvents();g=[],a.all([d]).then(function(a){a[0]?(_.each(a[0],function(a,b){var d=new Date;switch(c.filter){case"All":a.key=b,g.push(a);break;case"Past":a.startTime<d.getTime()&&(a.key=b,g.push(a));break;case"Upcoming":a.startTime>d.getTime()&&(a.key=b,g.push(a))}}),c.eventList=g):console.log("Failed to get Events...")})},c.search=function(){if(g.length>0)if(c.empty=!1,"*"!=c.newQuery.search&&c.newQuery.search){var a=[];_.each(g,function(b){_.each(b,function(d){if(angular.isString(d)&&angular.isString(c.newQuery.search)){if(_.includes(d.toLowerCase(),c.newQuery.search.toLowerCase()))return a.push(b),!1}else if(_.includes(d,c.newQuery.search))return a.push(b),!1})}),0==a.length&&(console.log("no results"),c.empty=!0,c.noEventsFound="No results for "+c.newQuery.search+" found."),c.eventList=a}else h()},c.add=function(){var a=d.open({templateUrl:"/parts/newEventForm.html",controller:"NewEventFormCtrl"});a.result.then(function(){console.log("Reloading..."),h()})},c.manageEvent=function(a){var b=g[a];console.log("Index is: "+a),e.url("details/"+b.key)},c.viewParticipants=function(a){d.open({templateUrl:"/parts/manageParticipants.html",controller:"ManageParticipantsCtrl",resolve:{event:function(){return g[a]}}})},c.viewVolunteers=function(a){d.open({templateUrl:"/parts/manageVolunteers.html",controller:"ManageVolunteersCtrl",resolve:{event:function(){return g[a]}}})},c.addParticipant=function(){alert("a participant was added")},c.addVolunteer=function(){alert("a volunteer was added")},c.getKeyLength=function(a){return a?Object.keys(a).length:0},c.deleteEvent=function(c){var d=g[c];console.log("Index is: "+c),console.log(d.key),swal({title:"Are you sure?",text:"You will not be able to recover this event!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete '"+d.name+"'",cancelButtonText:"Cancel"}).then(function(c){console.log("confirm");var c=b.removeData("/events/"+d.key);swal({text:"Deleting "+d.name,type:"success",timer:2500}),a.all([c]).then(function(a){h(),a[0]?console.log(c):console.log("Log: Error on deletion")})},function(a){console.log("cancel")})}}]),angular.module("ohanaApp").controller("BroadcastsCtrl",["$scope",function(a){"use strict";a.distros=["HOW Volunteers","HOW Participants"],a.recipient=[],a.ccVisible=!1,a.bccVisible=!1,a.toggleCC=function(){this.ccVisible=!this.ccVisible},a.toggleBCC=function(){this.bccVisible=!this.bccVisible},a.options={height:600},a.sendTime="",a.dateOptions={formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1,showWeeks:!1},a.today=function(){var b=new Date;a.t=b},a.today(),a.openSendDate=function(){a.sendDate.opened=!0},a.sendDate={opened:!1}}]),angular.module("ohanaApp").controller("InventoryCtrl",["$scope","$uibModal","Api","dataGridUtil",function(a,b,c,d){"use strict";a.buildTable=function(b){var e,f=d.buildInventoryTableData(b);a.currId="",angular.element(document).ready(function(){a.userChapterId="5788738883feb0b4358e8cd1",$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={type:"PUT"},$.fn.DataTable.isDataTable($("#inventoryTable"))&&a.inventoryTable.destroy(),a.inventoryTable=$("#inventoryTable").DataTable({data:f,columns:[{},{title:"ID",data:"DT_RowId"},{title:"Item Name",data:"name_of_item",orderable:!1},{title:"Category",data:"category"},{title:"Condition",data:"condition"},{title:"Purchase Date",data:"purchase_date"},{title:"Reserved?",data:"reservedFlag"},{title:"Owned By",data:"chapter"},{title:"Notes",data:"notes",orderable:!1}],columnDefs:[{targets:1,visible:!1},{targets:0,width:"15px",searchable:!1,orderable:!1,className:"dt-body-center",render:function(a){return'<input type="checkbox" id="inventoryTable-select" value="'+$("<div/>").text(a).html()+'">'}},{targets:4,width:"40px"},{targets:5,width:"35px"},{targets:6,width:"40px"}],order:[[3,"asc"]],headerCallback:function(a){$(a).find("th").eq(0).html('<input type="checkbox" id="inventoryTable-select-all">')},rowCallback:function(a,b,c){for($(a).children().eq(1).addClass("tdItemName"),$(a).children().eq(2).addClass("tdCategory"),$(a).children().eq(3).addClass("tdCondition"),$(a).children().eq(4).addClass("tdPdate"),$(a).children().eq(7).addClass("tdNotes"),e=1;5>e;e++)$(a).children().eq(e).wrapInner('<a class="editable editable-click" style="border: none;"></a>');return $(a).children().eq(7).wrapInner('<a class="editable editable-click" style="border: none;"></a>'),a},drawCallback:function(){$("#inventoryTable").on("click","tr",function(){a.currId=a.inventoryTable.row(this).id()}),$("#inventoryTable .tdItemName a").editable({type:"text",name:"name_of_item",placement:"bottom",emptytext:"null",url:function(b){var d={item_id:a.currId,chapter_id:a.userChapterId,name_of_item:b.value};c.chapterAddItem.update(d,function(a){console.log("heyo")},function(a){console.log("error")})}}),$("#inventoryTable .tdCategory a").editable({type:"select",name:"category",placement:"bottom",emptytext:"null",showbuttons:!1,url:function(b){var d={item_id:a.currId,chapter_id:a.userChapterId,category:b.value};c.chapterAddItem.update(d,function(a){console.log("heyo")},function(a){console.log("error")})},source:[{value:0,text:"Kayaks and Equipment"},{value:1,text:"Fishing Equipment"},{value:2,text:"Safety and PFDs"},{value:3,text:"Event Support"},{value:4,text:"Chapter Support"},{value:5,text:"Misc"}]}),$("#inventoryTable .tdCondition a").editable({type:"select",name:"condition",placement:"bottom",emptytext:"null",showbuttons:!1,url:function(b){var d={item_id:a.currId,chapter_id:a.userChapterId,condition:b.value};c.chapterAddItem.update(d,function(a){console.log("heyo")},function(a){console.log("error")})},source:[{value:0,text:"New"},{value:1,text:"Good"},{value:2,text:"Fair"},{value:3,text:"Poor"},{value:4,text:"Broken"}]}),$("#inventoryTable .tdPdate a").editable({type:"combodate",name:"puchase_date",placement:"bottom",emptytext:"null",format:"YYYY-MM-DD",viewformat:"MM/DD/YYYY",template:"MMM / DD / YYYY",combodate:{template:"MMM / DD / YYYY",minYear:1900,maxYear:2020},url:function(b){var d={item_id:a.currId,chapter_id:a.userChapterId,purchase_date:b.value};c.chpaterAddItem.update(d,function(a){console.log("heyo")},function(a){console.log("error")})}}),$("#inventoryTable .tdNotes a").editable({type:"textarea",name:"notes",placement:"bottom",emptytext:"null",url:function(b){var d={item_id:a.currId,chapter_id:a.userChapterId,notes:b.value};c.chapterAddItem.update(d,function(a){console.log("heyo")},function(a){console.log("error")})}})}}),$("#inventoryTable-select-all").on("click",function(){var b=a.inventoryTable.rows({search:"applied"}).nodes();$('input[type="checkbox"]',b).prop("checked",this.checked)}),$("#inventoryTable tbody").on("change",'input[type="checkbox"]',function(){if(!this.checked){var a=$("#inventoryTable-select-all").get(0);
a&&a.checked&&"indeterminate"in a&&(a.indeterminate=!0)}})})},a.update=function(){c.item.query().$promise.then(function(b){a.buildTable(b),a.dataStack=b},function(b){a.buildTable(b),a.dataStack=b,swal({text:"Connection failed. Could not "+b.config.method+" from "+b.config.url,type:"warning",timer:2500})})},a.add=function(){var c=b.open({templateUrl:"/parts/newItemInventoryForm.html",controller:"NewItemInventoryFormCtrl"});c||a.update()},a.remove=function(){var b,c,d=a.inventoryTable.rows({search:"applied"}).nodes(),e=[];for(b=0;b<d.length;b++)$('input[type="checkbox"]',d[b]).prop("checked")&&e.push(a.dataStack[b]);0===e.length?swal("","No records selected!","warning"):swal({title:"Are you sure?",text:"Get ready to kiss it goodbye!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){for(c=0;c<e.length;c++);swal("Deleted!","Your file has been deleted.","success"),$("#inventoryTable-select-all").prop("checked",!1),$('input[type="checkbox"]',d).prop("checked",!1),a.update()})}}]),angular.module("ohanaApp").controller("TrainingCtrl",function(){"use strict"}),angular.module("ohanaApp").controller("HoursCtrl",function(){"use strict"}),angular.module("ohanaApp").controller("DirectoryCtrl",["$rootScope","$q","commonServices","$scope","$uibModal","dataGridUtil","userService",function(a,b,c,d,e,f,g){"use strict";d.$on("modalClosing",function(){d.update()}),d.buildTable=function(b){var h,i=f.buildMembersTableData(b);d.currId="",d.checkedBoxes=[],angular.element(document).ready(function(){$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={type:"PUT"},$.fn.DataTable.isDataTable($("#membersTable"))&&d.membersTable.destroy(),d.membersTable=$("#membersTable").DataTable({responsive:!0,data:i,columns:[{},{title:"KEY",data:"key"},{title:"First Name",data:"first"},{title:"Last Name",data:"last"},{title:"DOB",data:"dob"},{title:"Email",data:"email"},{title:"Phone",data:"phone"},{title:"Role",data:"role"},{title:"Primary Chapter",data:"primaryChapter"},{title:"Secondary Chapters",data:"chapters[, ]"},{title:"Service Branch",data:"branch"}],columnDefs:[{targets:1,visible:!1},{targets:0,searchable:!1,orderable:!1,className:"dt-body-center",render:function(){return'<input type="checkbox" id="membersTable-select">'}},{targets:3,width:"50px"},{targets:5,width:"90px"}],order:[[3,"asc"]],headerCallback:function(a){$(a).find("th").eq(0).html('<input type="checkbox" id="membersTable-select-all">')},rowCallback:function(a,b,c){for($(a).find('input[type="checkbox"]').eq(0).attr("value",b.key),$(a).find('input[type="checkbox"]').eq(0).attr("data-row-id",b.row_id),$(a).children().eq(1).addClass("tdFname"),$(a).children().eq(2).addClass("tdLname"),$(a).children().eq(3).addClass("tdDob"),$(a).children().eq(4).addClass("tdEmail"),$(a).children().eq(5).addClass("tdTelly"),$(a).children().eq(6).addClass("tdSelectRole"),$(a).children().eq(7).addClass("tdPrimaryChapter"),$(a).children().eq(8).addClass("tdChapters"),$(a).children().eq(9).addClass("tdMil"),h=1;10>h;h++)4!==h&&$(a).children().eq(h).wrapInner('<a class="editable editable-click" style="border: none;"></a>');return a},drawCallback:function(b){$("#membersTable").off("click","tr"),$("#membersTable").on("click","tr",function(){if(d.currId=$(this).find('input[type="checkbox"]').val(),$(this).find('input[type="checkbox"]').is(":checked"))d.checkedBoxes.push(d.currId);else for(var a=0;a<d.checkedBoxes.length;a++)d.checkedBoxes[a]===d.currId&&d.checkedBoxes.splice(a,1)}),$("#membersTable .tdFname a").editable({type:"text",name:"first",placement:"bottom",emptytext:"none",display:!1,url:function(a){if(""!==a.value){var b=a.value,e="/userData/"+d.currId+"/name/first/";if(c.updateData(e,b),d.currId===g.getId()){var f=g.getUserData();f.name.first=b,g.setUserData(f),g.setUserName(f.name.first,f.name.last)}d.update()}}}),$("#membersTable .tdLname a").editable({type:"text",name:"last",placement:"bottom",emptytext:"none",display:!1,url:function(a){if(""!==a.value){var b=a.value,e="/userData/"+d.currId+"/name/last/";if(c.updateData(e,b),d.currId===g.getId()){var f=g.getUserData();f.name.last=b,g.setUserData(f),g.setUserName(f.name.first,f.name.last)}d.update()}}}),$("#membersTable .tdDob a").editable({type:"combodate",name:"DOB",placement:"bottom",emptytext:"none",format:"MM/DD/YYYY",viewformat:"MM/DD/YYYY",template:"MMM / DD / YYYY",combodate:{template:"MMM / DD / YYYY",minYear:1900,maxYear:2020},display:!1,url:function(a){if(""!==a.value){var b=a.value,e="/userData/"+d.currId+"/DOB/";if(c.updateData(e,b),d.currId===g.getId()){var f=g.getUserData();f.DOB=b,g.setUserData(f)}d.update()}}}),$("#membersTable .tdTelly a").editable({type:"text",name:"phone",placement:"bottom",emptytext:"none",tpl:"<input id='phonenum'>",display:!1,url:function(a){if(""!==a.value){var b=a.value,e="/userData/"+d.currId+"/phone/";if(c.updateData(e,b),d.currId===g.getId()){var f=g.getUserData();f.phone=b,g.setUserData(f)}d.update()}}}),$(document).on("click","#membersTable .tdTelly a",function(){$("#phonenum").mask("(999)999-9999")}),$("#membersTable .tdSelectRole a").editable({type:"select",name:"role",placement:"bottom",emptytext:"none",showbuttons:!1,display:!1,url:function(a){if(""!==a.value){var b=g.getId();if(d.currId!==b){var e={role:a.value},f="/userRoles/"+d.currId;c.updateData(f,e),d.currId===g.getId()&&g.setRole(e),d.update()}else swal("Alert","You cannot edit your own role!","error")}},source:function(){var b=g.getRole();if("National Staff"===b)return a.siteData.roles;var c=["Participant","Volunteer","Chapter Lead"];return c}}),$("#membersTable").off("click",".tdPrimaryChapter a"),$("#membersTable").on("click",".tdPrimaryChapter a",function(){var a=this;e.open({templateUrl:"/parts/changeChapter.html",controller:"ChangeChapterCtrl",resolve:{selectedUID:function(){return a.parentElement.parentElement.children[0].firstChild.value}}})}),$("#membersTable").off("click",".tdChapters"),$("#membersTable").on("click",".tdChapters",function(){var a=this;e.open({templateUrl:"/parts/manageadditionalchapters.html",controller:"ManageAdditionalChapters",resolve:{selectedUID:function(){return a.parentElement.children[0].firstChild.value}}})}),$("#membersTable .tdMil a").editable({type:"text",name:"branch",placement:"bottom",emptytext:"none",display:!1,url:function(a){if(""!==a.value){var b=a.value,e="/userData/"+d.currId+"/branch/";if(c.updateData(e,b),d.currId===g.getId()){var f=g.getUserData();f.branch=b,g.setUserData(f)}d.update()}}})}}),d.membersTable.on("responsive-display",function(b,f,h,i,j){d.currId=h.data().key;var k=$(this).find('ul[data-dtr-index="'+h.index()+'"]').children();i&&_.each(k,function(b){switch($(b).data("dt-column")){case 2:$(b).find("span.dtr-data").addClass("editable editable-click"),$('ul>li[data-dtr-index="2"]>span.dtr-data').editable({type:"text",name:d.currId,placement:"bottom",emptytext:"none",display:!1,url:function(a){if(""!==a.value){var b=a.value,e="/userData/"+a.name+"/name/first/";if(c.updateData(e,b),a.name===g.getId()){var f=g.getUserData();f.name.first=b,g.setUserData(f),g.setUserName(f.name.first,f.name.last)}d.update()}}});break;case 3:$(b).find("span.dtr-data").addClass("editable editable-click"),$('ul>li[data-dtr-index="3"]>span.dtr-data').editable({type:"text",name:d.currId,placement:"bottom",emptytext:"none",display:!1,url:function(a){if(""!==a.value){var b=a.value,e="/userData/"+a.name+"/name/last/";if(c.updateData(e,b),a.name===g.getId()){var f=g.getUserData();f.name.last=b,g.setUserData(f),g.setUserName(f.name.first,f.name.last)}d.update()}}});break;case 4:$(b).find("span.dtr-data").addClass("editable editable-click"),$('ul>li[data-dtr-index="4"]>span.dtr-data').editable({type:"combodate",name:d.currId,placement:"bottom",emptytext:"none",format:"MM/DD/YYYY",viewformat:"MM/DD/YYYY",template:"MMM / DD / YYYY",combodate:{template:"MMM / DD / YYYY",minYear:1900,maxYear:2020},display:!1,url:function(a){if(""!==a.value){var b=a.value,e="/userData/"+a.name+"/DOB/";if(c.updateData(e,b),a.name===g.getId()){var f=g.getUserData();f.DOB=b,g.setUserData(f)}d.update()}}});break;case 5:break;case 6:$(document).on("click",'ul>li[data-dtr-index="6"]>span.dtr-data',function(){$("#phonenum").mask("(999)999-9999")}),$(b).find("span.dtr-data").addClass("editable editable-click"),$('ul>li[data-dtr-index="6"]>span.dtr-data').editable({type:"text",name:d.currId,placement:"bottom",emptytext:"none",tpl:"<input id='phonenum'>",display:!1,url:function(a){if(""!==a.value){var b=a.value,e="/userData/"+a.name+"/phone/";if(c.updateData(e,b),a.name===g.getId()){var f=g.getUserData();f.phone=b,g.setUserData(f)}d.update()}}});break;case 7:$(b).find("span.dtr-data").addClass("editable editable-click"),$('ul>li[data-dtr-index="7"]>span.dtr-data').editable({type:"select",name:d.currId,placement:"bottom",emptytext:"none",showbuttons:!1,display:!1,url:function(a){if(""!==a.value){var b=g.getId();if(d.currId!==b){var e={role:a.value},f="/userRoles/"+a.name;c.updateData(f,e),a.name===g.getId()&&g.setRole(e),d.update()}else swal("Alert","You cannot edit your own role!","error")}},source:function(){var b=g.getRole();if("National Staff"===b)return a.siteData.roles;var c=["Participant","Volunteer","Chapter Lead"];return c}});break;case 8:$(b).find("span.dtr-data").addClass("editable editable-click"),$("#membersTable").off("click",'ul>li[data-dtr-index="8"]>span.dtr-data'),$("#membersTable").on("click",'ul>li[data-dtr-index="8"]>span.dtr-data',function(){var a=this;e.open({templateUrl:"/parts/changeChapter.html",controller:"ChangeChapterCtrl",resolve:{selectedUID:function(){var b=$(a).parent().data("dt-row"),c=$(a).parent().parent().parent().parent().parent().find('input[data-row-id="'+b+'"]').val();return c}}})});break;case 9:$(b).find("span.dtr-data").addClass("editable editable-click"),$("#membersTable").off("click",'ul>li[data-dtr-index="9"]>span.dtr-data'),$("#membersTable").on("click",'ul>li[data-dtr-index="9"]>span.dtr-data',function(){var a=this;e.open({templateUrl:"/parts/manageadditionalchapters.html",controller:"ManageAdditionalChapters",resolve:{selectedUID:function(){var b=$(a).parent().data("dt-row"),c=$(a).parent().parent().parent().parent().parent().find('input[data-row-id="'+b+'"]').val();return c}}})});break;case 10:$('ul>li[data-dtr-index="10"]>span.dtr-data').editable({type:"text",name:d.currId,placement:"bottom",emptytext:"none",display:!1,url:function(a){if(""!==a.value){var b=a.value,e="/userData/"+a.name+"/branch/";if(c.updateData(e,b),d.currId===g.getId()){var f=g.getUserData();f.branch=b,g.setUserData(f)}d.update()}}});break;default:console.log("Should not be here")}})}),$("#membersTable-select-all").on("click",function(){var a=d.membersTable.rows({search:"applied"}).nodes();$('input[type="checkbox"]',a).prop("checked",this.checked)}),$("#membersTable tbody").on("change",'input[type="checkbox"]',function(){if(!this.checked){var a=$("#membersTable-select-all").get(0);a&&a.checked&&"indeterminate"in a&&(a.indeterminate=!0)}})})},d.update=function(){var a=c.getData("/userData/"),e=c.getData("/userRoles/"),f=g.getRole(),h=g.getUserData();b.all([a,e]).then(function(a){var b=[],c=[],e=[],g=0;_.each(a[1],function(a,b){switch(f){case"National Staff":c.push(a.role),e.push(b);break;case"Chapter Lead":("Participant"===a.role||"Volunteer"===a.role||"Chapter Lead"===a.role)&&(c.push(a.role),e.push(b));break;default:console.log("should not be here")}}),_.each(e,function(){_.each(a[0],function(a,d){switch(f){case"National Staff":e[g]===d&&(a.key=d,a.role=c[g],b.push(a));break;case"Chapter Lead":e[g]===d&&h.Chapter===a.Chapter&&(a.key=d,a.role=c[g],b.push(a));break;default:console.log("should not be here")}}),g++}),d.buildTable(b)})},d.roleChangeRequests=function(){e.open({templateUrl:"/parts/managerolechangerequest.html",controller:"ManageRoleChangeRequestCtrl"})},d.chapterStatus=function(){e.open({templateUrl:"/parts/chapterStatus.html",controller:"ChapterStatusCtrl"})},d.remove=function(){0===d.checkedBoxes.length?swal("","No records selected!","warning"):swal({title:"Are you sure?",text:"Get ready to kiss it goodbye!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){_.each(d.checkedBoxes,function(a){c.removeData("/userData/"+a),c.removeData("/userRoles/"+a)}),swal("Deleted!","Your file has been deleted.","success"),d.update()})}}]),angular.module("ohanaApp").controller("DetailsCtrl",["$http","$scope","$location","DAO","$routeParams","commonServices","$q",function(a,b,c,d,e,f,g){"use strict";b.selectedEvent=null;var h=f.getData("/events/"+e.id);g.all([h]).then(function(a){console.log("hello me",a),a[0]?(b.selectedEvent=a[0],b.apply):console.log(a)},function(a){console.log("the error is",a)}),b.goBackToEvents=function(){c.url("/manage/events")},$(document).ready(function(){$(".nav li a").click(function(a){$(".nav li").removeClass("active");var b=$(this).parent();b.hasClass("active")||b.addClass("active"),a.preventDefault()})})}]),angular.module("ohanaApp").controller("EventdetaildescriptionCtrl",["$http","$location","$scope","DAO",function(a,b,c,d){"use strict";console.log("hello"),c.selectedEvent=d.selectedEvent,console.log("hello:"+selectedEvent),c.startTime="",c.endTime="",c.startDate="",c.endDate="",c.dateOptions={formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1,showWeeks:!1},c.openStartDate=function(){c.startDate.opened=!0},c.openEndDate=function(){c.endDate.opened=!0},c.startDate={opened:!1},c.endDate={opened:!1},c.combineTimes=function(){var a=new Date(c.startTime),b=new Date(c.endTime),d=new Date(c.startDate),e=new Date(c.endDate),f=new Date(d.getFullYear(),d.getMonth(),d.getDate(),a.getHours(),a.getMinutes()),g=new Date(e.getFullYear(),e.getMonth(),e.getDate(),b.getHours(),b.getMinutes());console.log(f,g);var h=[f,g];return h},c.saveEventDescription=function(){}}]),angular.module("ohanaApp").controller("EventdetailvolunteersCtrl",["$scope","$uibModal","Api","dataGridUtil",function(a,b,c,d){"use strict";a.selectedParticipants=[],a.add=function(){b.open({scope:a,templateUrl:"/parts/addParticipantsToEvent.html",controller:"EventaddvolunteersCtrl"})},a.removed=function(b){var c=a.selectedParticipants.indexOf(b);a.selectedParticipants.splice(c,1)},a.onSelectCallback=function(b){a.selectedParticipants.push(b)},c.member.query().$promise.then(function(b){console.log(b),a.participantList=b.map(function(a){var b={};return b.name=a.first_name+" "+a.last_name,b.email=a.email,b.id=a.id,b})},function(a){console.log(a)}),a.addParticipants=function(){var b=[];0==a.selectedParticipants.length&&swal("","No records selected!","warning"),a.selectedParticipants.forEach(function(d,e,f){0!==f.length&&b.push(c.addMemberToEvent.save({event_id:a.howEvent.currentEvent.id,member_id:d.id}).$promise)}),$q.all(b).then(function(){a.refresh()})},a.refresh=function(){a.update()},a.buildTable=function(b){var c=d.buildEventPeopleTableData(b);a.currId="",angular.element(document).ready(function(){$.fn.DataTable.isDataTable($("#eventVolunteersTable"))&&a.eventVolunteersTable.destroy(),a.eventVolunteersTable=$("#eventVolunteersTable").DataTable({data:c,columns:[{},{title:"ID",data:"DT_RowId"},{title:"First Name",data:"first_name"},{title:"Last Name",data:"last_name"},{title:"Email",data:"email",orderable:!1}],columnDefs:[{targets:1,visible:!1},{targets:0,width:"15px",searchable:!1,orderable:!1,className:"dt-body-center",render:function(a){return'<input type="checkbox" id="eventVolunteersTable-select" value="'+$("<div/>").text(a).html()+'">'}},{targets:2,width:"200px"},{targets:3,width:"200px"}],order:[[3,"asc"]],headerCallback:function(a){$(a).find("th").eq(0).html('<input type="checkbox" id="eventVolunteersTable-select-all">')},rowCallback:function(a,b,c){},drawCallback:function(b){$("#eventVolunteersTable").on("click","tr",function(){a.currId=a.eventVolunteersTable.row(this).id()})}}),$("#eventVolunteersTable-select-all").on("click",function(){var b=a.eventVolunteersTable.rows({search:"applied"}).nodes();$('input[type="checkbox"]',b).prop("checked",this.checked)}),$("#eventVolunteersTable tbody").on("change",'input[type="checkbox"]',function(){if(!this.checked){var a=$("#eventVolunteersTable-select-all").get(0);a&&a.checked&&"indeterminate"in a&&(a.indeterminate=!0)}})})},a.update=function(){c.getMembersByEvent.query({event_id:a.howEvent.currentEvent.id}).$promise.then(function(b){a.buildTable(b),a.dataStack=b},function(b){a.buildTable(b),a.dataStack=b,swal({text:"Connection failed. Could not "+b.config.method+" from "+b.config.url,type:"warning",timer:2500})})},a.remove=function(){var b,d,e=a.eventVolunteersTable.rows({search:"applied"}).nodes(),f=[];for(b=0;b<e.length;b++)$('input[type="checkbox"]',e[b]).prop("checked")&&f.push(a.dataStack[b]);0===f.length?swal("","No records selected!","warning"):swal({title:"Are you sure?",text:"Get ready to kiss it goodbye!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){for(d=0;d<f.length;d++)console.log(c.dropMemberFromEvent.remove({event_id:a.howEvent.currentEvent.id,member_id:f[d].id}));swal("Deleted!","Your file has been deleted.","success"),$("#eventVolunteersTable-select-all").prop("checked",!1),$('input[type="checkbox"]',e).prop("checked",!1),a.update()})}}]),angular.module("ohanaApp").controller("EventdetailparticipantsCtrl",["$q","$scope","$uibModal","Api","dataGridUtil",function(a,b,c,d,e){"use strict";b.error=!1,b.person={selected:[]},b.disabled=void 0,b.selectedParticipants=[],b.onSelectCallback=function(a){b.selectedParticipants.push(a)},b.add=function(){b.m=c.open({scope:b,templateUrl:"/parts/addParticipantsToEvent.html",controller:"EventaddparticipantsCtrl"})},b.removed=function(a){var c=b.selectedParticipants.indexOf(a);b.selectedParticipants.splice(c,1)},d.member.query().$promise.then(function(a){console.log(a),b.participantList=a.map(function(a){var b={};return b.name=a.first_name+" "+a.last_name,b.email=a.email,b.id=a.id,b})},function(a){console.log(a)}),b.addParticipants=function(){var c=[];0==b.selectedParticipants.length&&swal("","No records selected!","warning"),b.selectedParticipants.forEach(function(a,e,f){0!==f.length&&c.push(d.addMemberToEvent.save({event_id:b.howEvent.currentEvent.id,member_id:a.id}).$promise)}),a.all(c).then(function(){b.refresh()})},b.refresh=function(){b.update()},b.buildTable=function(a){var c=e.buildEventPeopleTableData(a);b.currId="",angular.element(document).ready(function(){$.fn.DataTable.isDataTable($("#eventParticipantsTable"))&&b.eventParticipantsTable.destroy(),b.eventParticipantsTable=$("#eventParticipantsTable").DataTable({data:c,columns:[{},{title:"ID",data:"DT_RowId"},{title:"First Name",data:"first_name"},{title:"Last Name",data:"last_name"},{title:"Email",data:"email",orderable:!1}],columnDefs:[{targets:1,visible:!1},{targets:0,width:"15px",searchable:!1,orderable:!1,className:"dt-body-center",render:function(a){return'<input type="checkbox" id="eventParticipantsTable-select" value="'+$("<div/>").text(a).html()+'">'}},{targets:2,width:"200px"},{targets:3,width:"200px"}],order:[[3,"asc"]],headerCallback:function(a){$(a).find("th").eq(0).html('<input type="checkbox" id="eventParticipantsTable-select-all">')},rowCallback:function(a,b,c){},drawCallback:function(a){$("#eventParticipantsTable").on("click","tr",function(){b.currId=b.eventParticipantsTable.row(this).id()})}}),$("#eventParticipantsTable-select-all").on("click",function(){var a=b.eventParticipantsTable.rows({search:"applied"}).nodes();$('input[type="checkbox"]',a).prop("checked",this.checked)}),$("#eventParticipantsTable tbody").on("change",'input[type="checkbox"]',function(){if(!this.checked){var a=$("#eventParticipantsTable-select-all").get(0);a&&a.checked&&"indeterminate"in a&&(a.indeterminate=!0)}})})},b.update=function(){d.getMembersByEvent.query({event_id:b.howEvent.currentEvent.id}).$promise.then(function(a){b.buildTable(a),b.dataStack=a},function(a){b.buildTable(a),b.dataStack=a,swal({text:"Connection failed. Could not "+a.config.method+" from "+a.config.url,type:"warning",timer:2500})})},b.remove=function(){var c,e,f=b.eventParticipantsTable.rows({search:"applied"}).nodes(),g=[];for(c=0;c<f.length;c++)$('input[type="checkbox"]',f[c]).prop("checked")&&g.push(b.dataStack[c]);0===g.length?swal("","No records selected!","warning"):swal({title:"Are you sure?",text:"Get ready to kiss it goodbye!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){var c=[];for(e=0;e<g.length;e++)c.push(d.dropMemberFromEvent.remove({member_id:g[e].id,event_id:b.howEvent.currentEvent.id}).$promise);a.all(c).then(function(){console.log("deleted"),b.update()}),swal("Deleted!","Your file has been deleted.","success"),$("#eventParticipantsTable-select-all").prop("checked",!1),$('input[type="checkbox"]',f).prop("checked",!1)})}}]),angular.module("ohanaApp").controller("EventdetailequipmentCtrl",["$q","$scope","$uibModal","Api","dataGridUtil",function(a,b,c,d,e){"use strict";b.error=!1,b.person={selected:[]},b.disabled=void 0,b.selectedInventory=[],b.onSelectCallback=function(a){b.selectedInventory.push(a)},b.add=function(){b.m=c.open({scope:b,templateUrl:"/parts/addInventoryToEvent.html",controller:"EventaddinventoryCtrl"})},b.removed=function(a){var c=b.selectedInventory.indexOf(a);b.selectedInventory.splice(c,1)},d.getChapterItems.query({chapter_id:b.howEvent.currentEvent.chapter.id}).$promise.then(function(a){b.selectedInventory=a.map(function(a){var b={};return b.name=a.name,b.category=a.category,b.id=a.id,b})},function(a){console.log(a)}),b.addParticipants=function(){var c=[];0==b.selectedInventory.length&&swal("","No records selected!","warning"),b.selectedInventory.forEach(function(a,e,f){0!==f.length&&c.push(d.reserveItemToEvent.save({event_id:b.howEvent.currentEvent.id,item_id:a.id,date:b.howEvent.currentEvent.createdAt}).$promise)}),a.all(c).then(function(){b.refresh()})},b.refresh=function(){b.update()},b.buildTable=function(a){var c=e.buildEventPeopleTableData(a);b.currId="",angular.element(document).ready(function(){$.fn.DataTable.isDataTable($("#eventInventoryTable"))&&b.eventInventoryTable.destroy(),b.eventInventoryTable=$("#eventInventoryTable").DataTable({data:c,columns:[{},{title:"ID",data:"DT_RowId"},{title:"Item Name",data:"name"},{title:"Category",data:"category"}],columnDefs:[{targets:1,visible:!1},{targets:0,width:"15px",searchable:!1,orderable:!1,className:"dt-body-center",render:function(a){return'<input type="checkbox" id="eventInventoryTable-select" value="'+$("<div/>").text(a).html()+'">'}},{targets:2,width:"200px"},{targets:3,width:"200px"}],order:[[3,"asc"]],headerCallback:function(a){$(a).find("th").eq(0).html('<input type="checkbox" id="eventInventoryTable-select-all">')},rowCallback:function(a,b,c){},drawCallback:function(a){$("#eventInventoryTable").on("click","tr",function(){b.currId=b.eventInventoryTable.row(this).id()})}}),$("#eventInventoryTable-select-all").on("click",function(){var a=b.eventInventoryTable.rows({search:"applied"}).nodes();$('input[type="checkbox"]',a).prop("checked",this.checked)}),$("#eventInventoryTable tbody").on("change",'input[type="checkbox"]',function(){if(!this.checked){var a=$("#eventInventoryTable-select-all").get(0);a&&a.checked&&"indeterminate"in a&&(a.indeterminate=!0)}})})},b.update=function(){d.getEventItems.query({event_id:b.howEvent.currentEvent.id}).$promise.then(function(a){b.buildTable(a),b.dataStack=a},function(a){b.buildTable(a),b.dataStack=a,swal({text:"Connection failed. Could not "+a.config.method+" from "+a.config.url,type:"warning",timer:2500})})},b.remove=function(){var c,e,f=b.eventInventoryTable.rows({search:"applied"}).nodes(),g=[];for(c=0;c<f.length;c++)$('input[type="checkbox"]',f[c]).prop("checked")&&g.push(b.dataStack[c]);0===g.length?swal("","No records selected!","warning"):swal({title:"Are you sure?",text:"Get ready to kiss it goodbye!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){var c=[];for(e=0;e<g.length;e++)c.push(d.dropMemberFromEvent.remove({member_id:g[e].id,event_id:b.howEvent.currentEvent.id}).$promise);a.all(c).then(function(){console.log("deleted"),b.update()}),swal("Deleted!","Your file has been deleted.","success"),$("#eventInventoryTable-select-all").prop("checked",!1),$('input[type="checkbox"]',f).prop("checked",!1)})}}]),angular.module("ohanaApp").controller("EventdetailnotificationCtrl",["$scope",function(a){"use strict";a.distros=["b@example.com","c@example.com"],a.recipient=[],a.ccVisible=!1,a.bccVisible=!1,a.toggleCC=function(){this.ccVisible=!this.ccVisible},a.toggleBCC=function(){this.bccVisible=!this.bccVisible},a.options={height:600},a.sendTime="",a.dateOptions={formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1,showWeeks:!1},a.today=function(){var b=new Date;a.t=b},a.today(),a.openSendDate=function(){a.sendDate.opened=!0},a.sendDate={opened:!1},a.sendEventNotification=function(){eventDetailsNotifications.reset()}}]),angular.module("ohanaApp").controller("ChadminCtrl",["$rootScope","$q","commonServices","$scope","$uibModal","dataGridUtil","userService",function(a,b,c,d,e,f,g){"use strict";d.chapterTableData={},d.$on("modalClosing",function(){d.update()}),d.buildTable=function(a){var b,e=f.buildChaptersTableData(a);d.chapterTableData=e,d.currId="",d.checkedBoxes=[],angular.element(document).ready(function(){$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={type:"PUT"},$.fn.DataTable.isDataTable($("#chaptersTable"))&&d.chaptersTable.destroy(),d.chaptersTable=$("#chaptersTable").DataTable({data:e,columns:[{},{title:"KEY",data:"zip"},{title:"Chapter Name",data:"name"},{title:"Description",data:"description"},{title:"Chapter Admin",data:"chadmin"},{title:"Region",data:"region"},{title:"State",data:"state"},{title:"Zip",data:"zip",orderable:!1},{title:"Email",data:"email",orderable:!1},{title:"Website",data:"facebook_link"},{title:"Location",data:"googleMaps_Link"},{title:"Donations",data:"donation_link"}],columnDefs:[{targets:1,visible:!1},{targets:0,searchable:!1,orderable:!1,className:"dt-body-center",render:function(){return'<input type="checkbox" id="chaptersTable-select">'}},{targets:3,width:"50px"},{targets:5,width:"90px"}],order:[[3,"asc"]],headerCallback:function(a){$(a).find("th").eq(0).html('<input type="checkbox" id="chaptersTable-select-all">')},rowCallback:function(a,c,d){for($(a).find('input[type="checkbox"]').eq(0).attr("value",c.key),$(a).children().eq(1).addClass("tdCName"),$(a).children().eq(2).addClass("tdDescription"),$(a).children().eq(3).addClass("tdChapterAdmin"),$(a).children().eq(4).addClass("tdSelectRegion"),$(a).children().eq(5).addClass("tdSelectState"),$(a).children().eq(6).addClass("tdSelectZip"),$(a).children().eq(7).addClass("tdEmail"),b=2;7>b;b++)4!=b&&5!=b&&6!=b&&$(a).children().eq(b).wrapInner('<a class="editable editable-click" style="border: none;"></a>');return a},drawCallback:function(a){$("#chaptersTable").off("click","tr"),$("#chaptersTable").on("click","tr",function(){if(d.currId=$(this).find('input[type="checkbox"]').val(),d.editValue=$(this)[0].cells,$(this).find('input[type="checkbox"]').is(":checked"))d.checkedBoxes.push(d.currId);else for(var a=0;a<d.checkedBoxes.length;a++)d.checkedBoxes[a]===d.currId&&d.checkedBoxes.splice(a,1)}),$("#chaptersTable .tdCName  a").editable({type:"text",name:"Chapter Name",placement:"bottom",emptytext:"none",url:function(a){var b=a.value,e={region:d.editValue[4].textContent,text:a.value,value:a.value},f="/Regions/"+d.editValue[4].textContent+"/"+d.editValue[5].textContent+"/"+$(d.editValue).find("#chaptersTable-select").val()+"/name",g="/siteData/chapters/"+$(d.editValue).find("#chaptersTable-select").val();c.updateData(f,b),c.updateData(g,e)}}),$("#chaptersTable .tdDescription a").editable({type:"text",name:"description",placement:"bottom",emptytext:"none",url:function(a){var b=a.value,e="/Regions/"+d.editValue[4].textContent+"/"+d.editValue[5].textContent+"/"+$(d.editValue).find("#chaptersTable-select").val()+"/description";c.updateData(e,b)}}),$("#chaptersTable .tdChapterAdmin a").editable({type:"text",name:"chadmin",placement:"bottom",emptytext:"none",url:function(a){var b=a.value,e="/Regions/"+d.editValue[4].textContent+"/"+d.editValue[5].textContent+"/"+$(d.editValue).find("#chaptersTable-select").val()+"/lead";c.updateData(e,b)}}),$("#chaptersTable .tdSelectZip a").editable({type:"text",name:"zip",placement:"bottom",emptytext:"none",url:function(a){var b=a.value,e="/Regions/"+d.editValue[4].textContent+"/"+d.editValue[5].textContent+"/"+$(d.editValue).find("#chaptersTable-select").val()+"/zip";c.updateData(e,b)}}),$("#chaptersTable .tdEmail a").editable({type:"email",name:"email",placement:"bottom",emptytext:"none",url:function(a){var b=a.value,e="/Regions/"+d.editValue[4].textContent+"/"+d.editValue[5].textContent+"/"+$(d.editValue).find("#chaptersTable-select").val()+"/email";c.updateData(e,b)}})}}),$("#chaptersTable-select-all").on("click",function(){var a=d.chaptersTable.rows({search:"applied"}).nodes();$('input[type="checkbox"]',a).prop("checked",this.checked)}),$("#chaptersTable tbody").on("change",'input[type="checkbox"]',function(){if(!this.checked){var a=$("#chaptersTable-select-all").get(0);a&&a.checked&&"indeterminate"in a&&(a.indeterminate=!0)}})})},d.update=function(){var a=c.getData("/Regions/"),e=g.getRole(),f=g.getUserData();b.all([a]).then(function(a){var b=[],c=[],g=[],h=0;_.each(a[0],function(a,b){switch(e){case"admin":case"National Staff":c.push(a),g.push(b);break;case"Chapter Lead":("Participant"===a.role||"Volunteer"===a.role||"Chapter Lead"===a.role)&&(c.push(a),g.push(b));break;default:console.log("Not an admin, staff, or chapter ltm. Should not load data.")}}),_.each(g,function(){_.each(a[0],function(a,d){switch(e){case"admin":case"National Staff":g[h]===d&&(a.key=d,a.regions=c[h],b.push(a));break;case"Chapter Lead":g[h]===d&&f.Chapter===a.Chapter&&(a.key=d,a.regions=c[h],b.push(a));break;default:console.log("Not an admin, staff, or chapter ltm. Should not load data.")}}),h++}),d.buildTable(b)})},d.addChapter=function(){console.log(d.chaptersTable);var a=e.open({templateUrl:"/parts/chapterAdd.html",controller:"ChapterAddCtrl"});a.result.then(function(a){d.chaptersTable.row.add(a)})},d.removeChapter=function(){0===d.checkedBoxes.length?swal("","No records selected!","warning"):swal({title:"Are you sure?",text:"Get ready to kiss it goodbye!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){_.each(d.checkedBoxes,function(a){console.log(d.checkedBoxes)}),swal("Deleted!","Your file has been deleted.","success"),d.update()})}}]),angular.module("ohanaApp").controller("ProfileCtrl",["$scope","$rootScope","$q","commonServices","$uibModal","userService","$filter","$http",function(a,b,c,d,e,f,g,h){"use strict";a.$on("updateProfile",function(b,c){c&&a.update()}),a.$on("modalClosing",function(){a.update()}),a.update=function(){a.profileData=f.getUserData(),a.profileData.years=parseInt(a.profileData.years),a.profileData.role=f.getRole(),a.userUID=f.getId();var b=d.getData("/roleChangeRequests/");c.all([b]).then(function(b){a.requests=[],_.each(b[0],function(b,c){b.uid===a.userUID&&(b.key=c,a.requests.push(b))}),a.addEditableListeners()})},a.rcs_status=!1,a.rcs_show=function(){a.rcs_status?(a.rcs_status=!1,a.update()):(a.rcs_status=!0,a.update())},a.deleteRequest=function(b){swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){swal("Deleted!","Your file has been deleted.","success").then(function(){
d.removeData("/roleChangeRequests/"+b),a.update()})})},a.opened={},a.open=function(b,c){b.preventDefault(),b.stopPropagation(),a.opened[c]=!a.opened[c]},a.saveUserData=function(c,e){function g(a,b,d){var e=d-1;b.includes(".")?g(a[b.split(".")[0]],b.split(".")[1],e):a[b]=c}var h=null;switch(e){case"name.first":h="/name/first/";break;case"name.last":h="/name/last/";break;case"address.line1":h="/address/line1/";break;case"address.line2":h="/address/line2/";break;case"address.city":h="/address/city/";break;case"address.state":h="/address/state/";break;case"address.zip":h="/address/zip/";break;case"phone":h="/phone/";break;case"Region":h="/Region/";break;case"Chapter":h="/Chapter/";break;case"DOB":h="/DOB/";break;case"branch":h="/branch/";break;case"gender":h="/gender/";break;case"years":h="/years/"}var i=c,j=(f.getUserData(),"/userData/"+a.userUID+h);return d.updateData(j,i),e.includes(".")?g(b.userData,e,e.split(".").length):b.userData[e]=c,f.setUserData(b.userData),!0},a.changeChapter=function(){e.open({templateUrl:"/parts/changeChapter.html",controller:"ChangeChapterCtrl",resolve:{selectedUID:function(){return!1}}})},a.editChapters=function(){e.open({templateUrl:"/parts/manageadditionalchapters.html",controller:"ManageAdditionalChapters",resolve:{selectedUID:function(){return!1}}})},a.roleChangeRequest=function(){var b=e.open({templateUrl:"/parts/rolerequestchangeform.html",controller:"RoleRequestChangeFormCtrl as rrcf"});b||a.update()},a.feedBackRequest=function(){e.open({templateUrl:"/parts/giveFeedback.html",controller:"GiveFeedbackCtrl as feedback"})},a.addEditableListeners=function(){var c=[];_.each(b.siteData.states,function(a){c.push(a.name)}),$("#profile_first_name").editable({type:"text",name:"first",placement:"bottom",emptytext:"null",display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"name.first"),a.update())}}),$("#profile_last_name").editable({type:"text",name:"last",placement:"bottom",emptytext:"null",display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"name.last"),a.update())}}),$("#profile_dob").editable({type:"combodate",name:"dob",placement:"bottom",emptytext:"null",format:"MM/DD/YYYY",viewformat:"MM/DD/YYYY",template:"MMM / DD / YYYY",combodate:{template:"MMM / DD / YYYY",minYear:1900,maxYear:2020},display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"DOB"),a.update())}}),$("#profile_gender").editable({type:"select",name:"gender",placement:"bottom",emptytext:"null",showbuttons:!1,display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"gender"),a.update())},source:function(){return["M","F","N/A"]}}),$("#profile_addr1").editable({type:"text",name:"addr1",placement:"bottom",emptytext:"null",display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"address.line1"),a.update())}}),$("#profile_addr2").editable({type:"text",name:"addr2",placement:"bottom",emptytext:"none",display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"address.line2"),a.update())}}),$("#profile_city").editable({type:"text",name:"city",placement:"bottom",emptytext:"null",display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"address.city"),a.update())}}),$("#profile_state").editable({type:"select",name:"state",placement:"bottom",emptytext:"null",showbuttons:!1,display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"address.state"),a.update())},source:function(){return c}}),$(document).on("click","#profile_zip",function(){$("#profile_zip_num").mask("99999")}),$("#profile_zip").editable({type:"number",name:"zip",placement:"bottom",emptytext:"null",tpl:'<input id="profile_zip_num">',display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"address.zip"),a.update())}}),$(document).on("click","#profile_phone",function(){$("#profile_phone_num").mask("(999)999-9999")}),$("#profile_phone").editable({type:"number",name:"phone",placement:"bottom",emptytext:"null",tpl:'<input id="profile_phone_num">',display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"phone"),a.update())}}),$("#profile_branch").editable({type:"text",name:"branch",placement:"bottom",emptytext:"null",display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"branch"),a.update())}}),$("#profile_years").editable({type:"number",name:"years",placement:"bottom",emptytext:"null",tpl:"<input>",display:!1,url:function(b){""!==b.value&&(a.saveUserData(b.value,"years"),a.update())}})}}]),angular.module("ohanaApp").controller("RegadminCtrl",function(){"use strict"}),angular.module("ohanaApp").controller("SuperadminCtrl",function(){"use strict"}),angular.module("ohanaApp").service("commonServices",["$rootScope","$firebaseAuth","DAO","expenseservice","$firebaseArray","$q",function(a,b,c,d,e,f){this.register=function(a){return firebase.auth().createUserWithEmailAndPassword(a.email,a.password).then(function(){var b=firebase.auth().currentUser.uid;return console.log("success : user registered"),delete a.Chapter.$$hashKey,firebase.database().ref("/userData/"+b).set(a).then(function(c){return console.log("success : user data added"),firebase.database().ref("/userRoles/"+b).set({role:"Participant",name:a.name,email:a.email}),!0})["catch"](function(a){a.code,a.message;return console.log("ERROR: "+a.code+": "+a.message),!1})})["catch"](function(a){a.code,a.message;return console.log("ERROR: "+a.code+": "+a.message),!1})},this.signin=function(a){return firebase.auth().signInWithEmailAndPassword(a.email,a.password).then(function(a){return console.log("success : "+firebase.auth().currentUser.email+" signed In"),{type:"SUCCESS"}})["catch"](function(a){a.code,a.message;return console.log("ERROR: "+a.code+": "+a.message),{type:"ERROR",code:a.code,message:a.message}})},this.signout=function(){firebase.auth().signOut().then(function(b){console.log("success : Signed out"),a.userData={},a.userRole={}})["catch"](function(a){a.code,a.message;console.log("ERROR: "+a.code+": "+a.message)})},this.sendPasswordReset=function(a){return firebase.auth().sendPasswordResetEmail(a.email).then(function(a){return console.log("success : password reset sent"),!0})["catch"](function(a){a.code,a.message;return console.log("ERROR: "+a.code+": "+a.message),!1})},this.getCurrentUserEmail=function(){var a=firebase.auth().currentUser;return null!=a?a.email:""},this.getCurrentUserUid=function(){var a=firebase.auth().currentUser;return null!=a?a.uid:""},this.getCurrentUserRole=function(){var a=firebase.auth().currentUser.uid;return firebase.database().ref("/userRoles/"+a+"/role/").once("value").then(function(a){return a.val()})},this.setData=function(a,b){firebase.database().ref(a).set(b).then(function(a){console.log("success : data set")})["catch"](function(a){a.code,a.message;console.log("ERROR: "+a.code+": "+a.message)})},this.pushData=function(a,b){return firebase.database().ref(a).push(b).once("value").then(function(a){return console.log("success : data pushed"),a.val()})["catch"](function(a){a.code,a.message;console.log("ERROR: "+a.code+": "+a.message)})},this.getNewKey=function(a){return firebase.database().ref(a).push().key},this.updateData=function(a,b){var c={};c[a]=b,firebase.database().ref().update(c).then(function(a){console.log("success : data updated")})["catch"](function(a){a.code,a.message;console.log("ERROR: "+a.code+": "+a.message)})},this.removeData=function(a){firebase.database().ref(a).remove().then(function(a){console.log("success : data Deleted")})["catch"](function(a){a.code,a.message;console.log("ERROR: "+a.code+": "+a.message)})},this.getData=function(a){return firebase.database().ref(a).once("value").then(function(a){return a.val()})},this.getUserByEmail=function(a){return firebase.database().ref("userData").orderByChild("email").equalTo(a).once("value").then(function(a){return a.val()})},this.getUserByEmailAtPath=function(a,b){return firebase.database().ref(b).orderByChild("email").equalTo(a).once("value").then(function(a){return a.val()})},this.getPublicEvents=function(){return firebase.database().ref("events").once("value").then(function(a){return console.log("Data received"),a.val()})["catch"](function(a){a.code,a.message;console.log("ERROR: "+a.code+": "+a.message)})},this.DAO=c,this.getEvent=function(a){return firebase.database().ref("/events").orderByChild("name").equalTo(a.name).once("value").then(function(a){return console.log("Data received"),a.val()})["catch"](function(a){a.code,a.message;console.log("ERROR: "+a.code+": "+a.message)})},this.addressLookup=function(a,b){var c=new google.maps.Geocoder;c.geocode({address:a.toString()},function(a,c){if(c==google.maps.GeocoderStatus.OK&&a.length>0){var d=a[0].geometry.location;b(c==google.maps.GeocoderStatus.OK?{success:!0,err:null,results:d}:{success:!1,err:new Error("Geocode was not successful for the following reason: "+c),results:null})}})},this.zipCompare=function(b){var c,d,e=null,g=this,h=[];return _.each(a.siteData.regions,function(a){var i="/Regions/"+a.text+"/",j=g.getData(i);h.push(j),f.all([j]).then(function(f){f[0]?_.each(f[0],function(f){_.each(f,function(f){var g=new google.maps.LatLng(f.lat,f.lng),h=google.maps.geometry.spherical.computeDistanceBetween(b,g);null==e?e=h:e>h&&(e=h,c=f.name,d=a)})}):console.log("Failed to get Chapters...")})}),f.all(h).then(function(){var a=[];return a.push(c),a.push(d),a})}}]),angular.module("ohanaApp").service("DAO",function(){var a=function(){this.address=null,this.branch=null,this.email=null,this.emergency={name:null,phone:null},this.gender=null,this.name={first:null,last:null},this.phone=null,this.years=null,1==arguments.length&&angular.extend(this,arguments[0])},b=function(){this.name=null,this.url=null,this.data=null,this.regionId=null,this.chapterId=null,this.creatorId=null,this.lastModifiedId=null,this.typeOfReport=null,1==arguments.length&&angular.extend(this.prototype,arguments[0])},c=function(){this.users=null,this.location={address:null,address2:null,city:null,state:null,zip:null},this.staff={},this.events={title:null,allDay:null,start:null,end:null,description:null,name:null,data:null,images:{},participants:null,volunteers:null,LTMs:null,location:{address:null,address2:null,city:null,state:null,zip:null}},this.reports={},1==arguments.length&&angular.extend(this.prototype,arguments[0])},d=function(){this.title=null,this.allDay=null,this.startTime=null,this.endTime=null,this.description=null,this.name=null,this.data=null,this.images=null,this.participants=null,this.volunteers=null,this.location=null,1==arguments.length&&angular.extend(this.prototype,arguments[0])};return{userData:a,report:b,chapter:c,selectedEvent:d}}),angular.module("ohanaApp").factory("pageAuthInterceptor",["$q","$rootScope",function(a,b){var c={request:function(a){switch(a.url){case"views/manage/directory.html":"National Staff"===b.userRole||"Chapter Lead"===b.userRole?console.log("Authorized"):(window.location.replace("#/home"),console.log("Not Authorized!"))}return a}};return c}]),angular.module("ohanaApp").service("pdfService",function(){var a="../assets/Media_Waiver_Form.pdf",b="../assets/Adult_Waiver_Release_of_Liability_rev_3-19-12.pdf";PDFJS.disableWorker=!0,PDFJS.workerSrc="http://mozilla.github.io/pdf.js/build/pdf.worker.js",Promise.all([PDFJS.getDocument(a).promise,PDFJS.getDocument(b).promise]).then(function(a){a.forEach(function(a,b){postprocessor(a,b+1)})},function(a){console.error(a)}),this.postprocessor=function(a,b){console.log("PDF loaded");var c=1;a.getPage(c).then(function(a){var c=1.5,d=a.getViewport(c),e=document.getElementById("the-canvas"+b),f=e.getContext("2d");e.height=d.height,e.width=d.width;var g={canvasContext:f,viewport:d},h=a.render(g);h.then(function(){console.log("Page rendered")})})},this.updateMediaWaiverTemplate=function(a,b){var c=a.value,d=document.getElementById("the-canvas1").getContext("2d");switch(d.font="16px Verdana",b){case 1:d.fillText(c,120,450);break;case 2:d.fillText(c,95,610);break;case 3:d.fillText(c,630,610);break;case 4:d.fillText(c,95,725);break;case 5:d.fillText(c,630,725);break;case 6:d.fillText(c,95,781.5);break;case 7:d.fillText(c,295,781.5);break;case 8:d.fillText(c,520,781.5);break;case 9:d.fillText(c,665,781.5);break;case 10:d.fillText(c,755,781.5);break;case 11:d.fillText(c,95,940);break;case 12:d.fillText(c,630,940);break;case 13:d.fillText(c,95,1055);break;case 14:d.fillText(c,630,1055)}},this.updateReleaseWaiverTemplate=function(a,b){var c=a.value,d=document.getElementById("the-canvas2").getContext("2d");switch(d.font="16px Verdana",b){case 1:d.fillText(c,55,1055);break;case 2:d.fillText(c,550,1e3);break;case 3:d.fillText(c,500,1050)}},this.saveImgPerEvent=function(){createMediaWaiver()},this.saveImgPerUser=function(){createReleaseWaiver()},this.createMediaWaiver=function(){var a=document.getElementById("the-canvas1"),b=document;updateMediaWaiverTemplate(b.getElementById("author_name"),1),updateMediaWaiverTemplate(b.getElementById("author_name"),2),updateMediaWaiverTemplate(b.getElementById("author_date"),3),overlayAuthorSignature(),updateMediaWaiverTemplate(b.getElementById("author_email"),4),updateMediaWaiverTemplate(b.getElementById("author_phone"),5),updateMediaWaiverTemplate(b.getElementById("author_street"),6),updateMediaWaiverTemplate(b.getElementById("author_apt"),7),updateMediaWaiverTemplate(b.getElementById("author_city"),8),updateMediaWaiverTemplate(b.getElementById("author_state"),9),updateMediaWaiverTemplate(b.getElementById("author_zip"),10),updateMediaWaiverTemplate(b.getElementById("witness_name"),11),updateMediaWaiverTemplate(b.getElementById("witness_date"),12),overlayWitnessSignature(),updateMediaWaiverTemplate(b.getElementById("witness_email"),13),updateMediaWaiverTemplate(b.getElementById("witness_phone"),14),setTimeout(function(){document.getElementById("mediaWaiver").src=a.toDataURL()},0)},this.createReleaseWaiver=function(){var a=document.getElementById("the-canvas2"),b=document;updateReleaseWaiverTemplate(b.getElementById("author_name"),1),updateReleaseWaiverTemplate(b.getElementById("author_date"),2),updateReleaseWaiverTemplate({value:"crayon's events"},3),setTimeout(function(){document.getElementById("releaseWaiver").src=a.toDataURL()},0)};var c=document.getElementById("signatureCanvas"),d=new SignaturePad(c),e=document.getElementById("signatureCanvas2"),f=new SignaturePad(e);this.clearCanvas=function(){d.clear()},this.overlayAuthorSignature=function(){var a=d.toDataURL(),b=new Image;b.onload=function(){var a=document.getElementById("the-canvas1").getContext("2d");a.drawImage(b,95,638),a=document.getElementById("the-canvas2").getContext("2d"),a.drawImage(b,45,964)},b.src=a},this.clearCanvas2=function(){f.clear()},this.overlayWitnessSignature=function(){var a=f.toDataURL(),b=new Image;b.onload=function(){var a=document.getElementById("the-canvas1").getContext("2d");a.drawImage(b,95,963)},b.src=a}}),function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.editableform.defaults,c),this.$div=a(b),this.options.scope||(this.options.scope=this)};b.prototype={constructor:b,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value),this.input.prerender()},initTemplate:function(){this.$form=a(a.fn.editableform.template)},initButtons:function(){var b=this.$form.find(".editable-buttons");b.append(a.fn.editableform.buttons),"bottom"===this.options.showbuttons&&b.addClass("editable-buttons-bottom")},render:function(){this.$loading=a(a.fn.editableform.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove(),this.showLoading(),this.isSaving=!1,this.$div.triggerHandler("rendering"),this.initInput(),this.$form.find("div.editable-input").append(this.input.$tpl),this.$div.append(this.$form),a.when(this.input.render()).then(a.proxy(function(){if(this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(a.proxy(this.cancel,this)),this.input.error)this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(a){a.preventDefault()});else{this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled");var b=null===this.value||void 0===this.value||""===this.value?this.options.defaultValue:this.value;this.input.value2input(b),this.$form.submit(a.proxy(this.submit,this))}this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var a,b;this.$form?(a=this.$form.outerWidth(),b=this.$form.outerHeight(),a&&this.$loading.width(a),b&&this.$loading.height(b),this.$form.hide()):(a=this.$loading.parent().width(),a&&this.$loading.width(a)),this.$loading.show()},showForm:function(a){this.$loading.hide(),this.$form.show(),a!==!1&&this.input.activate(),this.$div.triggerHandler("show")},error:function(b){var c,d=this.$form.find(".control-group"),e=this.$form.find(".editable-error-block");if(b===!1)d.removeClass(a.fn.editableform.errorGroupClass),e.removeClass(a.fn.editableform.errorBlockClass).empty().hide();else{if(b){c=(""+b).split("\n");for(var f=0;f<c.length;f++)c[f]=a("<div>").text(c[f]).html();b=c.join("<br>")}d.addClass(a.fn.editableform.errorGroupClass),e.addClass(a.fn.editableform.errorBlockClass).html(b).show()}},submit:function(b){b.stopPropagation(),b.preventDefault();var c=this.input.input2value(),d=this.validate(c);if("object"===a.type(d)&&void 0!==d.newValue){if(c=d.newValue,this.input.value2input(c),"string"==typeof d.msg)return this.error(d.msg),void this.showForm()}else if(d)return this.error(d),void this.showForm();if(!this.options.savenochange&&this.input.value2str(c)==this.input.value2str(this.value))return void this.$div.triggerHandler("nochange");var e=this.input.value2submit(c);this.isSaving=!0,a.when(this.save(e)).done(a.proxy(function(a){this.isSaving=!1;var b="function"==typeof this.options.success?this.options.success.call(this.options.scope,a,c):null;return b===!1?(this.error(!1),void this.showForm(!1)):"string"==typeof b?(this.error(b),void this.showForm()):(b&&"object"==typeof b&&b.hasOwnProperty("newValue")&&(c=b.newValue),this.error(!1),this.value=c,void this.$div.triggerHandler("save",{newValue:c,submitValue:e,response:a}))},this)).fail(a.proxy(function(a){this.isSaving=!1;var b;b="function"==typeof this.options.error?this.options.error.call(this.options.scope,a,c):"string"==typeof a?a:a.responseText||a.statusText||"Unknown error!",this.error(b),this.showForm()},this))},save:function(b){this.options.pk=a.fn.editableutils.tryParseJson(this.options.pk,!0);var c,d="function"==typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk,e=!!("function"==typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&null!==d&&void 0!==d));return e?(this.showLoading(),c={name:this.options.name||"",value:b,pk:d},"function"==typeof this.options.params?c=this.options.params.call(this.options.scope,c):(this.options.params=a.fn.editableutils.tryParseJson(this.options.params,!0),a.extend(c,this.options.params)),"function"==typeof this.options.url?this.options.url.call(this.options.scope,c):a.ajax(a.extend({url:this.options.url,data:c,type:"POST"},this.options.ajaxOptions))):void 0},validate:function(a){return void 0===a&&(a=this.value),"function"==typeof this.options.validate?this.options.validate.call(this.options.scope,a):void 0},option:function(a,b){a in this.options&&(this.options[a]=b),"value"===a&&this.setValue(b)},setValue:function(a,b){b?this.value=this.input.str2value(a):this.value=a,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},a.fn.editableform=function(c){var d=arguments;return this.each(function(){var e=a(this),f=e.data("editableform"),g="object"==typeof c&&c;f||e.data("editableform",f=new b(this,g)),"string"==typeof c&&f[c].apply(f,Array.prototype.slice.call(d,1))})},a.fn.editableform.Constructor=b,a.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},a.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>',a.fn.editableform.loading='<div class="editableform-loading"></div>',a.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>',a.fn.editableform.errorGroupClass=null,a.fn.editableform.errorBlockClass="editable-error",a.fn.editableform.engine="jquery"}(window.jQuery),function(a){"use strict";a.fn.editableutils={inherit:function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.superclass=b.prototype},setCursorPosition:function(a,b){if(a.setSelectionRange)a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}},tryParseJson:function(a,b){if("string"==typeof a&&a.length&&a.match(/^[\{\[].*[\}\]]$/))if(b)try{a=new Function("return "+a)()}catch(c){}finally{return a}else a=new Function("return "+a)();return a},sliceObj:function(b,c,d){var e,f,g={};if(!a.isArray(c)||!c.length)return g;for(var h=0;h<c.length;h++)e=c[h],b.hasOwnProperty(e)&&(g[e]=b[e]),d!==!0&&(f=e.toLowerCase(),b.hasOwnProperty(f)&&(g[e]=b[f]));return g},getConfigData:function(b){var c={};return a.each(b.data(),function(a,b){("object"!=typeof b||b&&"object"==typeof b&&(b.constructor===Object||b.constructor===Array))&&(c[a]=b)}),c},objectKeys:function(a){if(Object.keys)return Object.keys(a);if(a!==Object(a))throw new TypeError("Object.keys called on a non-object");var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c},escape:function(b){return a("<div>").text(b).html()},itemsByValue:function(b,c,d){if(!c||null===b)return[];if("function"!=typeof d){var e=d||"value";d=function(a){return a[e]}}var f=a.isArray(b),g=[],h=this;return a.each(c,function(c,e){if(e.children)g=g.concat(h.itemsByValue(b,e.children,d));else if(f)a.grep(b,function(a){return a==(e&&"object"==typeof e?d(e):e)}).length&&g.push(e);else{var i=e&&"object"==typeof e?d(e):e;b==i&&g.push(e)}}),g},createInput:function(b){var c,d,e,f=b.type;return"date"===f&&("inline"===b.mode?a.fn.editabletypes.datefield?f="datefield":a.fn.editabletypes.dateuifield&&(f="dateuifield"):a.fn.editabletypes.date?f="date":a.fn.editabletypes.dateui&&(f="dateui"),"date"!==f||a.fn.editabletypes.date||(f="combodate")),"datetime"===f&&"inline"===b.mode&&(f="datetimefield"),"wysihtml5"!==f||a.fn.editabletypes[f]||(f="textarea"),"function"==typeof a.fn.editabletypes[f]?(c=a.fn.editabletypes[f],d=this.sliceObj(b,this.objectKeys(c.defaults)),e=new c(d)):(a.error("Unknown type: "+f),!1)},supportsTransitions:function(){var a=document.body||document.documentElement,b=a.style,c="transition",d=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof b[c])return!0;c=c.charAt(0).toUpperCase()+c.substr(1);for(var e=0;e<d.length;e++)if("string"==typeof b[d[e]+c])return!0;return!1}}}(window.jQuery),function(a){"use strict";var b=function(a,b){this.init(a,b)},c=function(a,b){this.init(a,b)};b.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(c,d){this.$element=a(c),this.options=a.extend({},a.fn.editableContainer.defaults,d),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.delayedHide=!1,this.$element.on("destroyed",a.proxy(function(){this.destroy()},this)),a(document).data("editable-handlers-attached")||(a(document).on("keyup.editable",function(b){27===b.which&&a(".editable-open").editableContainer("hide")}),a(document).on("click.editable",function(c){var d,e=a(c.target),f=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(a.contains(document.documentElement,c.target)&&!e.is(document)){for(d=0;d<f.length;d++)if(e.is(f[d])||e.parents(f[d]).length)return;b.prototype.closeOthers(c.target)}}),a(document).data("editable-handlers-attached",!0))},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!a.fn[this.containerName])throw new Error(this.containerName+" not found. Have you included corresponding js file?");for(var b in this.options)b in this.defaults?this.containerOptions[b]=this.options[b]:this.formOptions[b]=this.options[b]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var a;return this.containerDataName&&(a=this.$element.data(this.containerDataName))?a:a=this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:a.proxy(this.save,this),nochange:a.proxy(function(){this.hide("nochange")},this),cancel:a.proxy(function(){this.hide("cancel")},this),show:a.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},this),rendering:a.proxy(this.setPosition,this),resize:a.proxy(this.setPosition,this),rendered:a.proxy(function(){this.$element.triggerHandler("shown",a(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(b){this.$element.addClass("editable-open"),b!==!1&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass(this.containerClass),this.$form,this.$form=a("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(a){if(this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")){if(this.$form.data("editableform").isSaving)return void(this.delayedHide={reason:a});this.delayedHide=!1,this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",a||"manual")}},innerShow:function(){},innerHide:function(){},toggle:function(a){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(a)},setPosition:function(){},save:function(a,b){this.$element.triggerHandler("save",b),this.hide("save")},option:function(a,b){this.options[a]=b,a in this.containerOptions?(this.containerOptions[a]=b,this.setContainerOption(a,b)):(this.formOptions[a]=b,this.$form&&this.$form.editableform("option",a,b))},setContainerOption:function(a,b){this.call("option",a,b)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(b){a(".editable-open").each(function(c,d){if(d!==b&&!a(d).find(b).length){var e=a(d),f=e.data("editableContainer");f&&("cancel"===f.options.onblur?e.data("editableContainer").hide("onblur"):"submit"===f.options.onblur&&e.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}},a.fn.editableContainer=function(d){var e=arguments;return this.each(function(){var f=a(this),g="editableContainer",h=f.data(g),i="object"==typeof d&&d,j="inline"===i.mode?c:b;h||f.data(g,h=new j(this,i)),"string"==typeof d&&h[d].apply(h,Array.prototype.slice.call(e,1))})},a.fn.editableContainer.Popup=b,a.fn.editableContainer.Inline=c,a.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"},jQuery.event.special.destroyed={remove:function(a){a.handler&&a.handler()}}}(window.jQuery),function(a){"use strict";a.extend(a.fn.editableContainer.Inline.prototype,a.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=a("<span></span>"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,a.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(window.jQuery),function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.editable.defaults,c,a.fn.editableutils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init(),this.options.highlight&&!a.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};b.prototype={constructor:b,init:function(){var b,c=!1;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=a.fn.editableutils.createInput(this.options),this.input){switch(void 0===this.options.value||null===this.options.value?(this.value=this.input.html2value(a.trim(this.$element.html())),c=!0):(this.options.value=a.fn.editableutils.tryParseJson(this.options.value,!0),"string"==typeof this.options.value?this.value=this.input.str2value(this.options.value):this.value=this.options.value),this.$element.addClass("editable"),"textarea"===this.input.type&&this.$element.addClass("editable-pre-wrapped"),"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+".editable",a.proxy(function(a){if(this.options.disabled||a.preventDefault(),"mouseenter"===this.options.toggle)this.show();else{var b="click"!==this.options.toggle;this.toggle(b)}},this))):this.$element.attr("tabindex",-1),"function"==typeof this.options.display&&(this.options.autotext="always"),this.options.autotext){case"always":b=!0;break;case"auto":b=!a.trim(this.$element.text()).length&&null!==this.value&&void 0!==this.value&&!c;break;default:b=!1}a.when(b?this.render():!0).then(a.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this))}},initLive:function(){var b=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable",b,a.proxy(function(b){var c=a(b.target);c.data("editable")||(c.hasClass(this.options.emptyclass)&&c.empty(),c.editable(this.options).trigger(b))},this))},render:function(a){return this.options.display!==!1?this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,a):"function"==typeof this.options.display?this.options.display.call(this.$element[0],this.value,a):this.input.value2html(this.value,this.$element[0]):void 0},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable-disabled"),this.handleEmpty(this.isEmpty),"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(b,c){return b&&"object"==typeof b?void a.each(b,a.proxy(function(b,c){this.option(a.trim(b),c)},this)):(this.options[b]=c,"disabled"===b?c?this.disable():this.enable():("value"===b&&this.setValue(c),this.container&&this.container.option(b,c),void(this.input.option&&this.input.option(b,c))))},handleEmpty:function(b){this.options.display!==!1&&(void 0!==b?this.isEmpty=b:"function"==typeof this.input.isEmpty?this.isEmpty=this.input.isEmpty(this.$element):this.isEmpty=""===a.trim(this.$element.html()),this.options.disabled?this.isEmpty&&(this.$element.empty(),
this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(b){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var c=a.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(c),this.$element.on("save.internal",a.proxy(this.save,this)),this.container=this.$element.data("editableContainer")}this.container.show(b)}},hide:function(){this.container&&this.container.hide()},toggle:function(a){this.container&&this.container.tip().is(":visible")?this.hide():this.show(a)},save:function(a,b){if(this.options.unsavedclass){var c=!1;c=c||"function"==typeof this.options.url,c=c||this.options.display===!1,c=c||void 0!==b.response,c=c||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(b.newValue),c?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var d=this.$element,e=d.css("background-color");d.css("background-color",this.options.highlight),setTimeout(function(){"transparent"===e&&(e=""),d.css("background-color",e),d.addClass("editable-bg-transition"),setTimeout(function(){d.removeClass("editable-bg-transition")},1700)},10)}this.setValue(b.newValue,!1,b.response)},validate:function(){return"function"==typeof this.options.validate?this.options.validate.call(this,this.value):void 0},setValue:function(b,c,d){c?this.value=this.input.str2value(b):this.value=b,this.container&&this.container.option("value",this.value),a.when(this.render(d)).then(a.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable(),this.container&&this.container.destroy(),this.input.destroy(),"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable")),this.$element.off("save.internal"),this.$element.removeClass("editable editable-open editable-disabled"),this.$element.removeData("editable")}},a.fn.editable=function(c){var d={},e=arguments,f="editable";switch(c){case"validate":return this.each(function(){var b,c=a(this),e=c.data(f);e&&(b=e.validate())&&(d[e.options.name]=b)}),d;case"getValue":return 2===arguments.length&&arguments[1]===!0?d=this.eq(0).data(f).value:this.each(function(){var b=a(this),c=b.data(f);c&&void 0!==c.value&&null!==c.value&&(d[c.options.name]=c.input.value2submit(c.value))}),d;case"submit":var g=arguments[1]||{},h=this,i=this.editable("validate");if(a.isEmptyObject(i)){var j={};if(1===h.length){var k=h.data("editable"),l={name:k.options.name||"",value:k.input.value2submit(k.value),pk:"function"==typeof k.options.pk?k.options.pk.call(k.options.scope):k.options.pk};"function"==typeof k.options.params?l=k.options.params.call(k.options.scope,l):(k.options.params=a.fn.editableutils.tryParseJson(k.options.params,!0),a.extend(l,k.options.params)),j={url:k.options.url,data:l,type:"POST"},g.success=g.success||k.options.success,g.error=g.error||k.options.error}else{var m=this.editable("getValue");j={url:g.url,data:m,type:"POST"}}j.success="function"==typeof g.success?function(a){g.success.call(h,a,g)}:a.noop,j.error="function"==typeof g.error?function(){g.error.apply(h,arguments)}:a.noop,g.ajaxOptions&&a.extend(j,g.ajaxOptions),g.data&&a.extend(j.data,g.data),a.ajax(j)}else"function"==typeof g.error&&g.error.call(h,i);return this}return this.each(function(){var d=a(this),g=d.data(f),h="object"==typeof c&&c;return h&&h.selector?void(g=new b(this,h)):(g||d.data(f,g=new b(this,h)),void("string"==typeof c&&g[c].apply(g,Array.prototype.slice.call(e,1))))})},a.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery),function(a){"use strict";a.fn.editabletypes={};var b=function(){};b.prototype={init:function(b,c,d){this.type=b,this.options=a.extend({},d,c)},prerender:function(){this.$tpl=a(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(b,c){a(c)[this.options.escape?"text":"html"](a.trim(b))},html2value:function(b){return a("<div>").html(b).text()},value2str:function(a){return a},str2value:function(a){return a},value2submit:function(a){return a},value2input:function(a){this.$input.val(a)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(b){return a("<div>").text(b).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(a){void 0!==this.options[a]&&null!==this.options[a]&&this.$input.attr(a,this.options[a])},option:function(a,b){this.options[a]=b}},b.defaults={tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0},a.extend(a.fn.editabletypes,{abstractinput:b})}(window.jQuery),function(a){"use strict";var b=function(a){};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput),a.extend(b.prototype,{render:function(){var b=a.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),b.resolve()},function(){this.error=this.options.sourceError,b.resolve()}),b.promise()},html2value:function(a){return null},value2html:function(b,c,d,e){var f=a.Deferred(),g=function(){"function"==typeof d?d.call(c,b,this.sourceData,e):this.value2htmlFinal(b,c),f.resolve()};return null===b?g.call(this):this.onSourceReady(g,function(){f.resolve()}),f.promise()},onSourceReady:function(b,c){var d;if(a.isFunction(this.options.source)?(d=this.options.source.call(this.options.scope),this.sourceData=null):d=this.options.source,this.options.sourceCache&&a.isArray(this.sourceData))return void b.call(this);try{d=a.fn.editableutils.tryParseJson(d,!1)}catch(e){return void c.call(this)}if("string"==typeof d){if(this.options.sourceCache){var f,g=d;if(a(document).data(g)||a(document).data(g,{}),f=a(document).data(g),f.loading===!1&&f.sourceData)return this.sourceData=f.sourceData,this.doPrepend(),void b.call(this);if(f.loading===!0)return f.callbacks.push(a.proxy(function(){this.sourceData=f.sourceData,this.doPrepend(),b.call(this)},this)),void f.err_callbacks.push(a.proxy(c,this));f.loading=!0,f.callbacks=[],f.err_callbacks=[]}var h=a.extend({url:d,type:"get",cache:!1,dataType:"json",success:a.proxy(function(d){f&&(f.loading=!1),this.sourceData=this.makeArray(d),a.isArray(this.sourceData)?(f&&(f.sourceData=this.sourceData,a.each(f.callbacks,function(){this.call()})),this.doPrepend(),b.call(this)):(c.call(this),f&&a.each(f.err_callbacks,function(){this.call()}))},this),error:a.proxy(function(){c.call(this),f&&(f.loading=!1,a.each(f.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);a.ajax(h)}else this.sourceData=this.makeArray(d),a.isArray(this.sourceData)?(this.doPrepend(),b.call(this)):c.call(this)},doPrepend:function(){null!==this.options.prepend&&void 0!==this.options.prepend&&(a.isArray(this.prependData)||(a.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=a.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"==typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),a.isArray(this.prependData)&&a.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(a,b){},makeArray:function(b){var c,d,e,f,g=[];if(!b||"string"==typeof b)return null;if(a.isArray(b)){f=function(a,b){return d={value:a,text:b},c++>=2?!1:void 0};for(var h=0;h<b.length;h++)e=b[h],"object"==typeof e?(c=0,a.each(e,f),1===c?g.push(d):c>1&&(e.children&&(e.children=this.makeArray(e.children)),g.push(e))):g.push({value:e,text:e})}else a.each(b,function(a,b){g.push({value:a,text:b})});return g},option:function(a,b){this.options[a]=b,"source"===a&&(this.sourceData=null),"prepend"===a&&(this.prependData=null)}}),b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null}),a.fn.editabletypes.list=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("text",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput),a.extend(b.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),a.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=a('<span class="editable-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(a.proxy(function(b){if(!~a.inArray(b.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var c=this;this.t=setTimeout(function(){c.toggleClear(b)},100)}},this)).parent().css("position","relative"),this.$clear.click(a.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(a){if(this.$clear){var b=this.$input.val().length,c=this.$clear.is(":visible");b&&!c&&this.$clear.show(),!b&&c&&this.$clear.hide()}},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),a.fn.editabletypes.text=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("textarea",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput),a.extend(b.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(b){b.ctrlKey&&13===b.which&&a(this).closest("form").submit()})},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)}}),b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),a.fn.editabletypes.textarea=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("select",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.list),a.extend(b.prototype,{renderList:function(){this.$input.empty();var b=function(c,d){var e;if(a.isArray(d))for(var f=0;f<d.length;f++)e={},d[f].children?(e.label=d[f].text,c.append(b(a("<optgroup>",e),d[f].children))):(e.value=d[f].value,d[f].disabled&&(e.disabled=!0),c.append(a("<option>",e).text(d[f].text)));return c};b(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable",function(b){13===b.which&&a(this).closest("form").submit()})},value2htmlFinal:function(b,c){var d="",e=a.fn.editableutils.itemsByValue(b,this.sourceData);e.length&&(d=e[0].text),a.fn.editabletypes.abstractinput.prototype.value2html.call(this,d,c)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){a(this).closest("form").submit()})}}),b.defaults=a.extend({},a.fn.editabletypes.list.defaults,{tpl:"<select></select>"}),a.fn.editabletypes.select=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("checklist",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.list),a.extend(b.prototype,{renderList:function(){var b;if(this.$tpl.empty(),a.isArray(this.sourceData)){for(var c=0;c<this.sourceData.length;c++)b=a("<label>").append(a("<input>",{type:"checkbox",value:this.sourceData[c].value})).append(a("<span>").text(" "+this.sourceData[c].text)),a("<div>").append(b).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(b){return a.isArray(b)?b.sort().join(a.trim(this.options.separator)):""},str2value:function(b){var c,d=null;return"string"==typeof b&&b.length?(c=new RegExp("\\s*"+a.trim(this.options.separator)+"\\s*"),d=b.split(c)):d=a.isArray(b)?b:[b],d},value2input:function(b){this.$input.prop("checked",!1),a.isArray(b)&&b.length&&this.$input.each(function(c,d){var e=a(d);a.each(b,function(a,b){e.val()==b&&e.prop("checked",!0)})})},input2value:function(){var b=[];return this.$input.filter(":checked").each(function(c,d){b.push(a(d).val())}),b},value2htmlFinal:function(b,c){var d=[],e=a.fn.editableutils.itemsByValue(b,this.sourceData),f=this.options.escape;e.length?(a.each(e,function(b,c){var e=f?a.fn.editableutils.escape(c.text):c.text;d.push(e)}),a(c).html(d.join("<br>"))):a(c).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(b){13===b.which&&a(this).closest("form").submit()})}}),b.defaults=a.extend({},a.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","}),a.fn.editabletypes.checklist=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("password",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text),a.extend(b.prototype,{value2html:function(b,c){b?a(c).text("[hidden]"):a(c).empty()},html2value:function(a){return null}}),b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="password">'}),a.fn.editabletypes.password=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("email",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text),b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="email">'}),a.fn.editabletypes.email=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("url",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text),b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="url">'}),a.fn.editabletypes.url=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("tel",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text),b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'}),a.fn.editabletypes.tel=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("number",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text),a.extend(b.prototype,{render:function(){b.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}}),b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),a.fn.editabletypes.number=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("range",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.number),a.extend(b.prototype,{render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){a(this).siblings("output").text(a(this).val())})},activate:function(){this.$input.focus()}}),b.defaults=a.extend({},a.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),a.fn.editabletypes.range=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("time",a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput),a.extend(b.prototype,{render:function(){this.setClass()}}),b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'}),a.fn.editabletypes.time=b}(window.jQuery),function(a){"use strict";var b=function(c){if(this.init("select2",c,b.defaults),c.select2=c.select2||{},this.sourceData=null,c.placeholder&&(c.select2.placeholder=c.placeholder),!c.select2.tags&&c.source){var d=c.source;a.isFunction(c.source)&&(d=c.source.call(c.scope)),"string"==typeof d?(c.select2.ajax=c.select2.ajax||{},c.select2.ajax.data||(c.select2.ajax.data=function(a){return{query:a}}),c.select2.ajax.results||(c.select2.ajax.results=function(a){return{results:a}}),c.select2.ajax.url=d):(this.sourceData=this.convertSource(d),c.select2.data=this.sourceData)}if(this.options.select2=a.extend({},b.defaults.select2,c.select2),this.isMultiple=this.options.select2.tags||this.options.select2.multiple,this.isRemote="ajax"in this.options.select2,this.idFunc=this.options.select2.id,"function"!=typeof this.idFunc){var e=this.idFunc||"id";this.idFunc=function(a){return a[e]}}this.formatSelection=this.options.select2.formatSelection,"function"!=typeof this.formatSelection&&(this.formatSelection=function(a){return a.text})};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput),a.extend(b.prototype,{render:function(){this.setClass(),this.isRemote&&this.$input.on("select2-loaded",a.proxy(function(a){this.sourceData=a.items.results},this)),this.isMultiple&&this.$input.on("change",function(){a(this).closest("form").parent().triggerHandler("resize")})},value2html:function(c,d){var e,f="",g=this;this.options.select2.tags?e=c:this.sourceData&&(e=a.fn.editableutils.itemsByValue(c,this.sourceData,this.idFunc)),a.isArray(e)?(f=[],a.each(e,function(a,b){f.push(b&&"object"==typeof b?g.formatSelection(b):b)})):e&&(f=g.formatSelection(e)),f=a.isArray(f)?f.join(this.options.viewseparator):f,b.superclass.value2html.call(this,f,d)},html2value:function(a){return this.options.select2.tags?this.str2value(a,this.options.viewseparator):null},value2input:function(b){if(a.isArray(b)&&(b=b.join(this.getSeparator())),this.$input.data("select2")?this.$input.val(b).trigger("change",!0):(this.$input.val(b),this.$input.select2(this.options.select2)),this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var c=this.options.select2.id,d=this.options.select2.formatSelection;if(!c&&!d){var e=a(this.options.scope);if(!e.data("editable").isEmpty){var f={id:b,text:e.text()};this.$input.select2("data",f)}}}},input2value:function(){return this.$input.select2("val")},str2value:function(b,c){if("string"!=typeof b||!this.isMultiple)return b;c=c||this.getSeparator();var d,e,f;if(null===b||b.length<1)return null;for(d=b.split(c),e=0,f=d.length;f>e;e+=1)d[e]=a.trim(d[e]);return d},autosubmit:function(){this.$input.on("change",function(b,c){c||a(this).closest("form").submit()})},getSeparator:function(){return this.options.select2.separator||a.fn.select2.defaults.separator},convertSource:function(b){if(a.isArray(b)&&b.length&&void 0!==b[0].value)for(var c=0;c<b.length;c++)void 0!==b[c].value&&(b[c].id=b[c].value,delete b[c].value);return b},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}}),b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),a.fn.editabletypes.select2=b}(window.jQuery),function(a){var b=function(b,c){return this.$element=a(b),this.$element.is("input")?(this.options=a.extend({},a.fn.combodate.defaults,c,this.$element.data()),void this.init()):void a.error("Combodate should be applied to INPUT element")};b.prototype={constructor:b,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=a('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",a.proxy(function(b){this.$element.val(this.getValue()).change(),this.options.smartDays&&(a(b.target).is(".month")||a(b.target).is(".year"))&&this.fillCombo("day")},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var b=this.options.template;return a.each(this.map,function(a,c){c=c[0];var d=new RegExp(c+"+"),e=c.length>1?c.substring(1,2):c;b=b.replace(d,"{"+e+"}")}),b=b.replace(/ /g,"&nbsp;"),a.each(this.map,function(a,c){c=c[0];var d=c.length>1?c.substring(1,2):c;b=b.replace("{"+d+"}",'<select class="'+a+'"></select>')}),b},initCombos:function(){for(var a in this.map){var b=this.$widget.find("."+a);this["$"+a]=b.length?b:null,this.fillCombo(a)}},fillCombo:function(a){var b=this["$"+a];if(b){var c="fill"+a.charAt(0).toUpperCase()+a.slice(1),d=this[c](),e=b.val();b.empty();for(var f=0;f<d.length;f++)b.append('<option value="'+d[f][0]+'">'+d[f][1]+"</option>");b.val(e)}},fillCommon:function(a){var b,c=[];if("name"===this.options.firstItem){b=moment.relativeTime||moment.langData()._relativeTime;var d="function"==typeof b[a]?b[a](1,!0,a,!1):b[a];d=d.split(" ").reverse()[0],c.push(["",d])}else"empty"===this.options.firstItem&&c.push(["",""]);return c},fillDay:function(){var a,b,c=this.fillCommon("d"),d=-1!==this.options.template.indexOf("DD"),e=31;if(this.options.smartDays&&this.$month&&this.$year){var f=parseInt(this.$month.val(),10),g=parseInt(this.$year.val(),10);isNaN(f)||isNaN(g)||(e=moment([g,f]).daysInMonth())}for(b=1;e>=b;b++)a=d?this.leadZero(b):b,c.push([b,a]);return c},fillMonth:function(){var a,b,c=this.fillCommon("M"),d=-1!==this.options.template.indexOf("MMMM"),e=-1!==this.options.template.indexOf("MMM"),f=-1!==this.options.template.indexOf("MM");for(b=0;11>=b;b++)a=d?moment().date(1).month(b).format("MMMM"):e?moment().date(1).month(b).format("MMM"):f?this.leadZero(b+1):b+1,c.push([b,a]);return c},fillYear:function(){var a,b,c=[],d=-1!==this.options.template.indexOf("YYYY");for(b=this.options.maxYear;b>=this.options.minYear;b--)a=d?b:(b+"").substring(2),c[this.options.yearDescending?"push":"unshift"]([b,a]);return c=this.fillCommon("y").concat(c)},fillHour:function(){var a,b,c=this.fillCommon("h"),d=-1!==this.options.template.indexOf("h"),e=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),f=d?1:0,g=d?12:23;for(b=f;g>=b;b++)a=e?this.leadZero(b):b,c.push([b,a]);return c},fillMinute:function(){var a,b,c=this.fillCommon("m"),d=-1!==this.options.template.indexOf("mm");for(b=0;59>=b;b+=this.options.minuteStep)a=d?this.leadZero(b):b,c.push([b,a]);return c},fillSecond:function(){var a,b,c=this.fillCommon("s"),d=-1!==this.options.template.indexOf("ss");for(b=0;59>=b;b+=this.options.secondStep)a=d?this.leadZero(b):b,c.push([b,a]);return c},fillAmpm:function(){var a=-1!==this.options.template.indexOf("a"),b=(-1!==this.options.template.indexOf("A"),[["am",a?"am":"AM"],["pm",a?"pm":"PM"]]);return b},getValue:function(b){var c,d={},e=this,f=!1;return a.each(this.map,function(a,b){if("ampm"!==a){var c="day"===a?1:0;return d[a]=e["$"+a]?parseInt(e["$"+a].val(),10):c,isNaN(d[a])?(f=!0,!1):void 0}}),f?"":(this.$ampm&&(12===d.hour?d.hour="am"===this.$ampm.val()?0:12:d.hour="am"===this.$ampm.val()?d.hour:d.hour+12),c=moment([d.year,d.month,d.day,d.hour,d.minute,d.second]),this.highlight(c),b=void 0===b?this.options.format:b,null===b?c.isValid()?c:null:c.isValid()?c.format(b):"")},setValue:function(b){function c(b,c){var d={};return b.children("option").each(function(b,e){var f,g=a(e).attr("value");""!==g&&(f=Math.abs(g-c),("undefined"==typeof d.distance||f<d.distance)&&(d={value:g,distance:f}))}),d.value}if(b){var d="string"==typeof b?moment(b,this.options.format):moment(b),e=this,f={};d.isValid()&&(a.each(this.map,function(a,b){"ampm"!==a&&(f[a]=d[b[1]]())}),this.$ampm&&(f.hour>=12?(f.ampm="pm",f.hour>12&&(f.hour-=12)):(f.ampm="am",0===f.hour&&(f.hour=12))),a.each(f,function(a,b){e["$"+a]&&("minute"===a&&e.options.minuteStep>1&&e.options.roundTime&&(b=c(e["$"+a],b)),"second"===a&&e.options.secondStep>1&&e.options.roundTime&&(b=c(e["$"+a],b)),e["$"+a].val(b))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(d.format(this.options.format)).change())}},highlight:function(a){a.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(a){return 9>=a?"0"+a:a},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},a.fn.combodate=function(c){var d,e=Array.apply(null,arguments);return e.shift(),"getValue"===c&&this.length&&(d=this.eq(0).data("combodate"))?d.getValue.apply(d,e):this.each(function(){var d=a(this),f=d.data("combodate"),g="object"==typeof c&&c;f||d.data("combodate",f=new b(this,g)),"string"==typeof c&&"function"==typeof f[c]&&f[c].apply(f,e)})},a.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0,smartDays:!1}}(window.jQuery),function(a){"use strict";var b=function(c){this.init("combodate",c,b.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),c.combodate=a.fn.editableutils.tryParseJson(c.combodate,!0),this.options.combodate=a.extend({},b.defaults.combodate,c.combodate,{format:this.options.format,template:this.options.template})};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput),a.extend(b.prototype,{render:function(){this.$input.combodate(this.options.combodate),"bs3"===a.fn.editableform.engine&&this.$input.siblings().find("select").addClass("form-control"),this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(a,c){var d=a?a.format(this.options.viewformat):"";b.superclass.value2html.call(this,d,c)},html2value:function(a){return a?moment(a,this.options.viewformat):null},value2str:function(a){return a?a.format(this.options.format):""},str2value:function(a){return a?moment(a,this.options.format):null},value2submit:function(a){return this.value2str(a)},value2input:function(a){this.$input.combodate("setValue",a)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null}),a.fn.editabletypes.combodate=b}(window.jQuery),function(a){"use strict";var b=a.fn.editableform.Constructor.prototype.initInput;a.extend(a.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=a(a.fn.editableform.template),this.$form.find(".control-group").addClass("form-group"),this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){b.apply(this);var c=null===this.input.options.inputclass||this.input.options.inputclass===!1,d="input-sm",e="text,select,textarea,password,email,url,tel,number,range,time,typeaheadjs".split(",");~a.inArray(this.input.type,e)&&(this.input.$input.addClass("form-control"),c&&(this.input.options.inputclass=d,this.input.$input.addClass(d)));for(var f=this.$form.find(".editable-buttons"),g=c?[d]:this.input.options.inputclass.split(" "),h=0;h<g.length;h++)"input-lg"===g[h].toLowerCase()&&f.find("button").removeClass("btn-sm").addClass("btn-lg")}}),a.fn.editableform.buttons='<button type="submit" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button><button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>',a.fn.editableform.errorGroupClass="has-error",a.fn.editableform.errorBlockClass=null,a.fn.editableform.engine="bs3"}(window.jQuery),function(a){"use strict";a.extend(a.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:a.fn.popover.Constructor.DEFAULTS,initContainer:function(){a.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var b;this.$element.data("template")&&(b=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),b&&this.$element.data("template",b)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(a,b){this.container().options[a]=b},setPosition:function(){(function(){var a=this.tip(),b="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,c=/\s?auto?\s?/i,d=c.test(b);d&&(b=b.replace(c,"")||"top");var e=this.getPosition(),f=a[0].offsetWidth,g=a[0].offsetHeight;if(d){var h=this.$element.parent(),i=b,j=document.documentElement.scrollTop||document.body.scrollTop,k="body"==this.options.container?window.innerWidth:h.outerWidth(),l="body"==this.options.container?window.innerHeight:h.outerHeight(),m="body"==this.options.container?0:h.offset().left;b="bottom"==b&&e.top+e.height+g-j>l?"top":"top"==b&&e.top-j-g<0?"bottom":"right"==b&&e.right+f>k?"left":"left"==b&&e.left-f<m?"right":b,a.removeClass(i).addClass(b)}var n=this.getCalculatedOffset(b,e,f,g);this.applyPlacement(n,b)}).call(this.container())}})}(window.jQuery),function(a){function b(){return new Date(Date.UTC.apply(Date,arguments))}function c(b,c){var d,e=a(b).data(),f={},g=new RegExp("^"+c.toLowerCase()+"([A-Z])"),c=new RegExp("^"+c.toLowerCase());for(var h in e)c.test(h)&&(d=h.replace(g,function(a,b){return b.toLowerCase()}),f[d]=e[h]);return f}function d(b){var c={};if(k[b]||(b=b.split("-")[0],k[b])){var d=k[b];return a.each(j,function(a,b){b in d&&(c[b]=d[b])}),c}}var e=function(b,c){this._process_options(c),this.element=a(b),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=a(l.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(a,b){return parseInt(b)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};e.prototype={constructor:e,_process_options:function(b){this._o=a.extend({},this._o,b);var c=this.o=a.extend({},this._o),d=c.language;switch(k[d]||(d=d.split("-")[0],k[d]||(d=i.language)),c.language=d,c.startView){case 2:case"decade":c.startView=2;break;case 1:case"year":c.startView=1;break;default:c.startView=0}switch(c.minViewMode){case 1:case"months":c.minViewMode=1;break;case 2:case"years":c.minViewMode=2;break;default:c.minViewMode=0}c.startView=Math.max(c.startView,c.minViewMode),c.weekStart%=7,c.weekEnd=(c.weekStart+6)%7;var e=l.parseFormat(c.format);c.startDate!==-(1/0)&&(c.startDate=l.parseDate(c.startDate,e,c.language)),c.endDate!==1/0&&(c.endDate=l.parseDate(c.endDate,e,c.language)),c.daysOfWeekDisabled=c.daysOfWeekDisabled||[],a.isArray(c.daysOfWeekDisabled)||(c.daysOfWeekDisabled=c.daysOfWeekDisabled.split(/[,\s]*/)),c.daysOfWeekDisabled=a.map(c.daysOfWeekDisabled,function(a){return parseInt(a,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var b,c,d=0;d<a.length;d++)b=a[d][0],c=a[d][1],b.on(c)},_unapplyEvents:function(a){for(var b,c,d=0;d<a.length;d++)b=a[d][0],c=a[d][1],b.off(c)},_buildEvents:function(){this.isInput?this._events=[[this.element,{
focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{mousedown:a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).size()||this.picker.is(a.target)||this.picker.find(a.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var d=c||this.date,e=new Date(d.getTime()+6e4*d.getTimezoneOffset());this.element.trigger({type:b,date:e,format:a.proxy(function(a){var b=a||this.o.format;return l.formatDate(d,b,this.o.language)},this)})},show:function(a){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),a&&a.preventDefault(),this._trigger("show")},hide:function(a){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6e4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6e4*a.getTimezoneOffset()))},setUTCDate:function(a){this.date=a,this.setValue()},setValue:function(){var a=this.getFormattedDate();this.isInput?this.element.val(a):this.component&&this.element.find("input").val(a)},getFormattedDate:function(a){return void 0===a&&(a=this.o.format),l.formatDate(this.date,a,this.o.language)},setStartDate:function(a){this._process_options({startDate:a}),this.update(),this.updateNavArrows()},setEndDate:function(a){this._process_options({endDate:a}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var b=parseInt(this.element.parents().filter(function(){return"auto"!=a(this).css("z-index")}).first().css("z-index"))+10,c=this.component?this.component.parent().offset():this.element.offset(),d=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:c.top+d,left:c.left,zIndex:b})}},_allow_update:!0,update:function(){if(this._allow_update){var a,b=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(a=arguments[0],b=!0):(a=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=l.parseDate(a,this.o.format,this.o.language),b&&this.setValue(),this.date<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.date>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=new Date(this.date),this.fill()}},fillDow:function(){var a=this.o.weekStart,b="<tr>";if(this.o.calendarWeeks){var c='<th class="cw">&nbsp;</th>';b+=c,this.picker.find(".datepicker-days thead tr:first-child").prepend(c)}for(;a<this.o.weekStart+7;)b+='<th class="dow">'+k[this.o.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+k[this.o.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(b){b&&b.length?this.range=a.map(b,function(a){return a.valueOf()}):delete this.range,this.fill()},getClassNames:function(b){var c=[],d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),f=this.date.valueOf(),g=new Date;return b.getUTCFullYear()<d||b.getUTCFullYear()==d&&b.getUTCMonth()<e?c.push("old"):(b.getUTCFullYear()>d||b.getUTCFullYear()==d&&b.getUTCMonth()>e)&&c.push("new"),this.o.todayHighlight&&b.getUTCFullYear()==g.getFullYear()&&b.getUTCMonth()==g.getMonth()&&b.getUTCDate()==g.getDate()&&c.push("today"),f&&b.valueOf()==f&&c.push("active"),(b.valueOf()<this.o.startDate||b.valueOf()>this.o.endDate||-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled))&&c.push("disabled"),this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&c.push("range"),-1!=a.inArray(b.valueOf(),this.range)&&c.push("selected")),c},fill:function(){var c,d=new Date(this.viewDate),e=d.getUTCFullYear(),f=d.getUTCMonth(),g=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),h=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),i=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,j=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf();this.picker.find(".datepicker-days thead th.datepicker-switch").text(k[this.o.language].months[f]+" "+e),this.picker.find("tfoot th.today").text(k[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(k[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var m=b(e,f-1,28,0,0,0,0),n=l.getDaysInMonth(m.getUTCFullYear(),m.getUTCMonth());m.setUTCDate(n),m.setUTCDate(n-(m.getUTCDay()-this.o.weekStart+7)%7);var o=new Date(m);o.setUTCDate(o.getUTCDate()+42),o=o.valueOf();for(var p,q=[];m.valueOf()<o;){if(m.getUTCDay()==this.o.weekStart&&(q.push("<tr>"),this.o.calendarWeeks)){var r=new Date(+m+(this.o.weekStart-m.getUTCDay()-7)%7*864e5),s=new Date(+r+(11-r.getUTCDay())%7*864e5),t=new Date(+(t=b(s.getUTCFullYear(),0,1))+(11-t.getUTCDay())%7*864e5),u=(s-t)/864e5/7+1;q.push('<td class="cw">'+u+"</td>")}p=this.getClassNames(m),p.push("day");var v=this.o.beforeShowDay(m);void 0===v?v={}:"boolean"==typeof v?v={enabled:v}:"string"==typeof v&&(v={classes:v}),v.enabled===!1&&p.push("disabled"),v.classes&&(p=p.concat(v.classes.split(/\s+/))),v.tooltip&&(c=v.tooltip),p=a.unique(p),q.push('<td class="'+p.join(" ")+'"'+(c?' title="'+c+'"':"")+">"+m.getUTCDate()+"</td>"),m.getUTCDay()==this.o.weekEnd&&q.push("</tr>"),m.setUTCDate(m.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(q.join(""));var w=this.date&&this.date.getUTCFullYear(),x=this.picker.find(".datepicker-months").find("th:eq(1)").text(e).end().find("span").removeClass("active");w&&w==e&&x.eq(this.date.getUTCMonth()).addClass("active"),(g>e||e>i)&&x.addClass("disabled"),e==g&&x.slice(0,h).addClass("disabled"),e==i&&x.slice(j+1).addClass("disabled"),q="",e=10*parseInt(e/10,10);var y=this.picker.find(".datepicker-years").find("th:eq(1)").text(e+"-"+(e+9)).end().find("td");e-=1;for(var z=-1;11>z;z++)q+='<span class="year'+(-1==z?" old":10==z?" new":"")+(w==e?" active":"")+(g>e||e>i?" disabled":"")+'">'+e+"</span>",e+=1;y.html(q)},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()&&c<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()&&c>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(c){c.preventDefault();var d=a(c.target).closest("span, td, th");if(1==d.length)switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var e=l.modes[this.viewMode].navStep*("prev"==d[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,e);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,e)}this.fill();break;case"today":var f=new Date;f=b(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0),this.showMode(-2);var g="linked"==this.o.todayBtn?null:"view";this._setDate(f,g);break;case"clear":var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input")),h&&h.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!d.is(".disabled")){if(this.viewDate.setUTCDate(1),d.is(".month")){var i=1,j=d.parent().find("span").index(d),k=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(j),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(b(k,j,i,0,0,0,0))}else{var k=parseInt(d.text(),10)||0,i=1,j=0;this.viewDate.setUTCFullYear(k),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(b(k,j,i,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(d.is(".day")&&!d.is(".disabled")){var i=parseInt(d.text(),10)||1,k=this.viewDate.getUTCFullYear(),j=this.viewDate.getUTCMonth();d.is(".old")?0===j?(j=11,k-=1):j-=1:d.is(".new")&&(11==j?(j=0,k+=1):j+=1),this._setDate(b(k,j,i,0,0,0,0))}}},_setDate:function(a,b){b&&"date"!=b||(this.date=new Date(a)),b&&"view"!=b||(this.viewDate=new Date(a)),this.fill(),this.setValue(),this._trigger("changeDate");var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&(c.change(),!this.o.autoclose||b&&"date"!=b||this.hide())},moveMonth:function(a,b){if(!b)return a;var c,d,e=new Date(a.valueOf()),f=e.getUTCDate(),g=e.getUTCMonth(),h=Math.abs(b);if(b=b>0?1:-1,1==h)d=-1==b?function(){return e.getUTCMonth()==g}:function(){return e.getUTCMonth()!=c},c=g+b,e.setUTCMonth(c),(0>c||c>11)&&(c=(c+12)%12);else{for(var i=0;h>i;i++)e=this.moveMonth(e,b);c=e.getUTCMonth(),e.setUTCDate(f),d=function(){return c!=e.getUTCMonth()}}for(;d();)e.setUTCDate(--f),e.setUTCMonth(c);return e},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))return void(27==a.keyCode&&this.show());var b,c,d,e=!1;switch(a.keyCode){case 27:this.hide(),a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;b=37==a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):a.shiftKey?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):(c=new Date(this.date),c.setUTCDate(this.date.getUTCDate()+b),d=new Date(this.viewDate),d.setUTCDate(this.viewDate.getUTCDate()+b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;b=38==a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):a.shiftKey?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):(c=new Date(this.date),c.setUTCDate(this.date.getUTCDate()+7*b),d=new Date(this.viewDate),d.setUTCDate(this.viewDate.getUTCDate()+7*b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 13:this.hide(),a.preventDefault();break;case 9:this.hide()}if(e){this._trigger("changeDate");var f;this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.change()}},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+l.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var f=function(b,c){this.element=a(b),this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a}),delete c.inputs,a(this.inputs).datepicker(c).bind("changeDate",a.proxy(this.dateUpdated,this)),this.pickers=a.map(this.inputs,function(b){return a(b).data("datepicker")}),this.updateDates()};f.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.date}),this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){var c=a(b.target).data("datepicker"),d=c.getUTCDate(),e=a.inArray(b.target,this.inputs),f=this.inputs.length;if(-1!=e){if(d<this.dates[e])for(;e>=0&&d<this.dates[e];)this.pickers[e--].setUTCDate(d);else if(d>this.dates[e])for(;f>e&&d>this.dates[e];)this.pickers[e++].setUTCDate(d);this.updateDates()}},remove:function(){a.map(this.pickers,function(a){a.remove()}),delete this.element.data().datepicker}};var g=a.fn.datepicker,h=a.fn.datepicker=function(b){var g=Array.apply(null,arguments);g.shift();var h;return this.each(function(){var j=a(this),k=j.data("datepicker"),l="object"==typeof b&&b;if(!k){var m=c(this,"date"),n=a.extend({},i,m,l),o=d(n.language),p=a.extend({},i,o,m,l);if(j.is(".input-daterange")||p.inputs){var q={inputs:p.inputs||j.find("input").toArray()};j.data("datepicker",k=new f(this,a.extend(p,q)))}else j.data("datepicker",k=new e(this,p))}return"string"==typeof b&&"function"==typeof k[b]&&(h=k[b].apply(k,g),void 0!==h)?!1:void 0}),void 0!==h?h:this},i=a.fn.datepicker.defaults={autoclose:!1,beforeShowDay:a.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},j=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=e;var k=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},l={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,l.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00"),c=a.match(this.validParts);if(!b||!b.length||!c||0===c.length)throw new Error("Invalid date format.");return{separators:b,parts:c}},parseDate:function(c,d,f){if(c instanceof Date)return c;if("string"==typeof d&&(d=l.parseFormat(d)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(c)){var g,h,i=/([\-+]\d+)([dmwy])/,j=c.match(/([\-+]\d+)([dmwy])/g);c=new Date;for(var m=0;m<j.length;m++)switch(g=i.exec(j[m]),h=parseInt(g[1]),g[2]){case"d":c.setUTCDate(c.getUTCDate()+h);break;case"m":c=e.prototype.moveMonth.call(e.prototype,c,h);break;case"w":c.setUTCDate(c.getUTCDate()+7*h);break;case"y":c=e.prototype.moveYear.call(e.prototype,c,h)}return b(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),0,0,0)}var n,o,g,j=c&&c.match(this.nonpunctuation)||[],c=new Date,p={},q=["yyyy","yy","M","MM","m","mm","d","dd"],r={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!=b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};r.M=r.MM=r.mm=r.m,r.dd=r.d,c=b(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0);var s=d.parts.slice();if(j.length!=s.length&&(s=a(s).filter(function(b,c){return-1!==a.inArray(c,q)}).toArray()),j.length==s.length){for(var m=0,t=s.length;t>m;m++){if(n=parseInt(j[m],10),g=s[m],isNaN(n))switch(g){case"MM":o=a(k[f].months).filter(function(){var a=this.slice(0,j[m].length),b=j[m].slice(0,a.length);return a==b}),n=a.inArray(o[0],k[f].months)+1;break;case"M":o=a(k[f].monthsShort).filter(function(){var a=this.slice(0,j[m].length),b=j[m].slice(0,a.length);return a==b}),n=a.inArray(o[0],k[f].monthsShort)+1}p[g]=n}for(var u,m=0;m<q.length;m++)u=q[m],u in p&&!isNaN(p[u])&&r[u](c,p[u])}return c},formatDate:function(b,c,d){"string"==typeof c&&(c=l.parseFormat(c));var e={d:b.getUTCDate(),D:k[d].daysShort[b.getUTCDay()],DD:k[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:k[d].monthsShort[b.getUTCMonth()],MM:k[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m;for(var b=[],f=a.extend([],c.separators),g=0,h=c.parts.length;h>=g;g++)f.length&&b.push(f.shift()),b.push(e[c.parts[g]]);return b.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};l.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+l.headTemplate+"<tbody></tbody>"+l.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+l.headTemplate+l.contTemplate+l.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+l.headTemplate+l.contTemplate+l.footTemplate+"</table></div></div>",a.fn.datepicker.DPGlobal=l,a.fn.datepicker.noConflict=function(){return a.fn.datepicker=g,this},a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),h.call(c,"show"))}),a(function(){h.call(a('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(a){"use strict";a.fn.bdatepicker=a.fn.datepicker.noConflict(),a.fn.datepicker||(a.fn.datepicker=a.fn.bdatepicker);var b=function(a){this.init("date",a,b.defaults),this.initPicker(a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput),a.extend(b.prototype,{initPicker:function(b,c){this.options.viewformat||(this.options.viewformat=this.options.format),b.datepicker=a.fn.editableutils.tryParseJson(b.datepicker,!0),this.options.datepicker=a.extend({},c.datepicker,b.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=a.fn.bdatepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker),this.options.clear&&(this.$clear=a('<a href="#"></a>').html(this.options.clear).click(a.proxy(function(a){a.preventDefault(),a.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(a('<div class="editable-clear">').append(this.$clear)))},value2html:function(a,c){var d=a?this.dpg.formatDate(a,this.parsedViewFormat,this.options.datepicker.language):"";b.superclass.value2html.call(this,d,c)},html2value:function(a){return this.parseDate(a,this.parsedViewFormat)},value2str:function(a){return a?this.dpg.formatDate(a,this.parsedFormat,this.options.datepicker.language):""},str2value:function(a){return this.parseDate(a,this.parsedFormat)},value2submit:function(a){return this.value2str(a)},value2input:function(a){this.$input.bdatepicker("update",a)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(b){if(!a(b.currentTarget).is(".old")&&!a(b.currentTarget).is(".new")){var c=a(this).closest("form");setTimeout(function(){c.submit()},200)}})},parseDate:function(a,b){var c,d=null;return a&&(d=this.dpg.parseDate(a,b,this.options.datepicker.language),"string"==typeof a&&(c=this.dpg.formatDate(d,b,this.options.datepicker.language),a!==c&&(d=null))),d}}),b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"}),a.fn.editabletypes.date=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("datefield",a,b.defaults),this.initPicker(a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.date),a.extend(b.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.bdatepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(a.proxy(function(){this.$tpl.removeData("date"),this.$tpl.bdatepicker("update")},this))},value2input:function(a){this.$input.val(a?this.dpg.formatDate(a,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),b.defaults=a.extend({},a.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!0}}),a.fn.editabletypes.datefield=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("datetime",a,b.defaults),this.initPicker(a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput),a.extend(b.prototype,{initPicker:function(b,c){this.options.viewformat||(this.options.viewformat=this.options.format),b.datetimepicker=a.fn.editableutils.tryParseJson(b.datetimepicker,!0),this.options.datetimepicker=a.extend({},c.datetimepicker,b.datetimepicker,{format:this.options.viewformat}),this.options.datetimepicker.language=this.options.datetimepicker.language||"en",this.dpg=a.fn.datetimepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker),this.$input.on("changeMode",function(b){var c=a(this).closest("form").parent();setTimeout(function(){c.triggerHandler("resize")},0)}),this.options.clear&&(this.$clear=a('<a href="#"></a>').html(this.options.clear).click(a.proxy(function(a){a.preventDefault(),a.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(a('<div class="editable-clear">').append(this.$clear)))},value2html:function(a,c){var d=a?this.dpg.formatDate(this.toUTC(a),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";return c?void b.superclass.value2html.call(this,d,c):d},html2value:function(a){var b=this.parseDate(a,this.parsedViewFormat);return b?this.fromUTC(b):null},value2str:function(a){return a?this.dpg.formatDate(this.toUTC(a),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(a){var b=this.parseDate(a,this.parsedFormat);return b?this.fromUTC(b):null},value2submit:function(a){return this.value2str(a)},value2input:function(a){a&&this.$input.data("datetimepicker").setDate(a)},input2value:function(){var a=this.$input.data("datetimepicker");return a.date?a.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(b){var c=a(this).closest("form");setTimeout(function(){c.submit()},200)})},toUTC:function(a){return a?new Date(a.valueOf()-6e4*a.getTimezoneOffset()):a},fromUTC:function(a){return a?new Date(a.valueOf()+6e4*a.getTimezoneOffset()):a},parseDate:function(a,b){var c,d=null;return a&&(d=this.dpg.parseDate(a,b,this.options.datetimepicker.language,this.options.formatType),"string"==typeof a&&(c=this.dpg.formatDate(d,b,this.options.datetimepicker.language,this.options.formatType),a!==c&&(d=null))),d}}),b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"}),a.fn.editabletypes.datetime=b}(window.jQuery),function(a){"use strict";var b=function(a){this.init("datetimefield",a,b.defaults),this.initPicker(a,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.datetime),a.extend(b.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datetimepicker(this.options.datetimepicker),this.$input.off("focus keydown"),this.$input.keyup(a.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datetimepicker("update")},this))},value2input:function(a){this.$input.val(this.value2html(a)),this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),b.defaults=a.extend({},a.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}}),a.fn.editabletypes.datetimefield=b}(window.jQuery),function(){"use strict";var a=navigator.userAgent,b=/Android/.test(a),c=/Android\s[0-2][^\d]/.test(a),d=/Android\s[0-4][^\d]/.test(a),e=a.indexOf("Chrom")>=0,f=/Chrome\/(39|40)\./.test(a),g=a.indexOf("Trident")>=0,h=/\b(iPad|iPhone|iPod)(?=;)/.test(a),i=a.indexOf("Opera")>=0,j=/Safari\//.test(a)&&!/(Chrome\/|Android\s)/.test(a);"undefined"==typeof PDFJS&&(("undefined"!=typeof window?window:this).PDFJS={}),function(){function a(a,b){return new c(this.slice(a,b))}function b(a,b){arguments.length<2&&(b=0);for(var c=0,d=a.length;d>c;++c,++b)this[b]=255&a[c]}function c(c){var d,e,f;if("number"==typeof c)for(d=[],e=0;c>e;++e)d[e]=0;else if("slice"in c)d=c.slice(0);else for(d=[],e=0,f=c.length;f>e;++e)d[e]=c[e];return d.subarray=a,d.buffer=d,d.byteLength=d.length,d.set=b,"object"==typeof c&&c.buffer&&(d.buffer=c.buffer),d}return"undefined"!=typeof Uint8Array?("undefined"==typeof Uint8Array.prototype.subarray&&(Uint8Array.prototype.subarray=function(a,b){return new Uint8Array(this.slice(a,b))},Float32Array.prototype.subarray=function(a,b){return new Float32Array(this.slice(a,b))}),void("undefined"==typeof Float64Array&&(window.Float64Array=Float32Array))):(window.Uint8Array=c,window.Int8Array=c,window.Uint32Array=c,window.Int32Array=c,window.Uint16Array=c,window.Float32Array=c,void(window.Float64Array=c))}(),function(){window.URL||(window.URL=window.webkitURL)}(),function(){if("undefined"!=typeof Object.defineProperty){var a=!0;try{Object.defineProperty(new Image,"id",{value:"test"});var b=function(){};b.prototype={get id(){}},Object.defineProperty(new b,"id",{value:"",configurable:!0,enumerable:!0,writable:!1})}catch(c){a=!1}if(a)return}Object.defineProperty=function(a,b,c){delete a[b],"get"in c&&a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set),"value"in c&&(a.__defineSetter__(b,function(a){return this.__defineGetter__(b,function(){return a}),a}),a[b]=c.value)}}(),function(){var a=XMLHttpRequest.prototype,b=new XMLHttpRequest;return"overrideMimeType"in b||Object.defineProperty(a,"overrideMimeType",{value:function(a){}}),"responseType"in b?void 0:(PDFJS.disableWorker=!0,Object.defineProperty(a,"responseType",{get:function(){return this._responseType||"text"},set:function(a){("text"===a||"arraybuffer"===a)&&(this._responseType=a,"arraybuffer"===a&&"function"==typeof this.overrideMimeType&&this.overrideMimeType("text/plain; charset=x-user-defined"))}}),"undefined"!=typeof VBArray?void Object.defineProperty(a,"response",{get:function(){return"arraybuffer"===this.responseType?new Uint8Array(new VBArray(this.responseBody).toArray()):this.responseText}}):void Object.defineProperty(a,"response",{get:function(){if("arraybuffer"!==this.responseType)return this.responseText;var a,b=this.responseText,c=b.length,d=new Uint8Array(c);for(a=0;c>a;++a)d[a]=255&b.charCodeAt(a);return d.buffer}}))}(),function(){if(!("btoa"in window)){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";window.btoa=function(b){var c,d,e="";for(c=0,d=b.length;d>c;c+=3){var f=255&b.charCodeAt(c),g=255&b.charCodeAt(c+1),h=255&b.charCodeAt(c+2),i=f>>2,j=(3&f)<<4|g>>4,k=d>c+1?(15&g)<<2|h>>6:64,l=d>c+2?63&h:64;e+=a.charAt(i)+a.charAt(j)+a.charAt(k)+a.charAt(l)}return e}}}(),function(){if(!("atob"in window)){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";window.atob=function(b){if(b=b.replace(/=+$/,""),b.length%4===1)throw new Error("bad atob input");for(var c,d,e=0,f=0,g="";d=b.charAt(f++);~d&&(c=e%4?64*c+d:d,e++%4)?g+=String.fromCharCode(255&c>>(-2*e&6)):0)d=a.indexOf(d);return g}}}(),function(){"undefined"==typeof Function.prototype.bind&&(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments,1),d=function(){var d=c.concat(Array.prototype.slice.call(arguments));return b.apply(a,d)};return d})}(),function(){var a=document.createElement("div");"dataset"in a||Object.defineProperty(HTMLElement.prototype,"dataset",{get:function(){if(this._dataset)return this._dataset;for(var a={},b=0,c=this.attributes.length;c>b;b++){var d=this.attributes[b];if("data-"===d.name.substring(0,5)){var e=d.name.substring(5).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()});a[e]=d.value}}return Object.defineProperty(this,"_dataset",{value:a,writable:!1,enumerable:!1}),a},enumerable:!0})}(),function(){function a(a,b,c,d){var e=a.className||"",f=e.split(/\s+/g);""===f[0]&&f.shift();var g=f.indexOf(b);return 0>g&&c&&f.push(b),g>=0&&d&&f.splice(g,1),a.className=f.join(" "),g>=0}var b=document.createElement("div");if(!("classList"in b)){var c={add:function(b){a(this.element,b,!0,!1)},contains:function(b){return a(this.element,b,!1,!1)},remove:function(b){a(this.element,b,!1,!0)},toggle:function(b){a(this.element,b,!0,!0)}};Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){if(this._classList)return this._classList;var a=Object.create(c,{element:{value:this,writable:!1,enumerable:!0}});return Object.defineProperty(this,"_classList",{value:a,writable:!1,enumerable:!1}),a},enumerable:!0})}}(),function(){"console"in window?"bind"in console.log||(console.log=function(a){return function(b){return a(b)}}(console.log),console.error=function(a){return function(b){return a(b)}}(console.error),console.warn=function(a){return function(b){return a(b)}}(console.warn)):window.console={log:function(){},error:function(){},warn:function(){}}}(),function(){function a(a){b(a.target)&&a.stopPropagation()}function b(a){return a.disabled||a.parentNode&&b(a.parentNode)}i&&document.addEventListener("click",a,!0);
}(),function(){g&&(PDFJS.disableCreateObjectURL=!0)}(),function(){"language"in navigator||(PDFJS.locale=navigator.userLanguage||"en-US")}(),function(){(j||c||f||h)&&(PDFJS.disableRange=!0,PDFJS.disableStream=!0)}(),function(){(!history.pushState||c)&&(PDFJS.disableHistory=!0)}(),function(){if(window.CanvasPixelArray)"function"!=typeof window.CanvasPixelArray.prototype.set&&(window.CanvasPixelArray.prototype.set=function(a){for(var b=0,c=this.length;c>b;b++)this[b]=a[b]});else{var c,f=!1;if(e?(c=a.match(/Chrom(e|ium)\/([0-9]+)\./),f=c&&parseInt(c[2])<21):b?f=d:j&&(c=a.match(/Version\/([0-9]+)\.([0-9]+)\.([0-9]+) Safari\//),f=c&&parseInt(c[1])<6),f){var g=window.CanvasRenderingContext2D.prototype,h=g.createImageData;g.createImageData=function(a,b){var c=h.call(this,a,b);return c.data.set=function(a){for(var b=0,c=this.length;c>b;b++)this[b]=a[b]},c},g=null}}}(),function(){function a(a){window.setTimeout(a,20)}return h?void(window.requestAnimationFrame=a):void("requestAnimationFrame"in window||(window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||a))}(),function(){(h||b)&&(PDFJS.maxCanvasPixels=5242880)}(),function(){g&&window.parent!==window&&(PDFJS.disableFullscreen=!0)}(),function(){"currentScript"in document||Object.defineProperty(document,"currentScript",{get:function(){var a=document.getElementsByTagName("script");return a[a.length-1]},enumerable:!0,configurable:!0})}(),function(){var a=document.createElement("input");try{a.type="number"}catch(b){var c=a.constructor.prototype,d=Object.getOwnPropertyDescriptor(c,"type");Object.defineProperty(c,"type",{get:function(){return d.get.call(this)},set:function(a){d.set.call(this,"number"===a?"text":a)},enumerable:!0,configurable:!0})}}(),function(){if(document.attachEvent){var a=document.constructor.prototype,b=Object.getOwnPropertyDescriptor(a,"readyState");Object.defineProperty(a,"readyState",{get:function(){var a=b.get.call(this);return"interactive"===a?"loading":a},set:function(a){b.set.call(this,a)},enumerable:!0,configurable:!0})}}(),function(){"undefined"==typeof Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)})}()}.call("undefined"==typeof window?this:window),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define("pdfjs-dist/build/pdf",[],b):"object"==typeof exports?exports["pdfjs-dist/build/pdf"]=b():a["pdfjs-dist/build/pdf"]=a.pdfjsDistBuildPdf=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=13)}([function(a,b,c){"use strict";(function(a){function c(a){_=a}function d(){return _}function e(a){_>=Z.infos&&console.log("Info: "+a)}function f(a){_>=Z.warnings&&console.log("Warning: "+a)}function g(a){console.log("Deprecated API usage: "+a)}function h(a){throw _>=Z.errors&&(console.log("Error: "+a),console.log(i())),new Error(a)}function i(){try{throw new Error}catch(a){return a.stack?a.stack.split("\n").slice(2).join("\n"):""}}function j(a,b){a||h(b)}function k(a,b){try{var c=new URL(a);if(!c.origin||"null"===c.origin)return!1}catch(d){return!1}var e=new URL(b,c);return c.origin===e.origin}function l(a){if(!a)return!1;switch(a.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function m(a,b){if(!a)return null;try{var c=b?new URL(a,b):new URL(a);if(l(c))return c}catch(d){}return null}function n(a,b,c){return Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!1}),c}function o(a){var b;return function(){return a&&(b=Object.create(null),a(b),a=null),b}}function p(a){return"string"!=typeof a?(f("The argument for removeNullCharacters must be a string."),a):a.replace(ka,"")}function q(a){j(null!==a&&"object"==typeof a&&void 0!==a.length,"Invalid argument for bytesToString");var b=a.length,c=8192;if(c>b)return String.fromCharCode.apply(null,a);for(var d=[],e=0;b>e;e+=c){var f=Math.min(e+c,b),g=a.subarray(e,f);d.push(String.fromCharCode.apply(null,g))}return d.join("")}function r(a){j("string"==typeof a,"Invalid argument for stringToBytes");for(var b=a.length,c=new Uint8Array(b),d=0;b>d;++d)c[d]=255&a.charCodeAt(d);return c}function s(a){return void 0!==a.length?a.length:(j(void 0!==a.byteLength),a.byteLength)}function t(a){if(1===a.length&&a[0]instanceof Uint8Array)return a[0];var b,c,d,e=0,f=a.length;for(b=0;f>b;b++)c=a[b],d=s(c),e+=d;var g=0,h=new Uint8Array(e);for(b=0;f>b;b++)c=a[b],c instanceof Uint8Array||(c="string"==typeof c?r(c):new Uint8Array(c)),d=c.byteLength,h.set(c,g),g+=d;return h}function u(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a)}function v(a){for(var b=1,c=0;a>b;)b<<=1,c++;return c}function w(a,b){return a[b]<<24>>24}function x(a,b){return a[b]<<8|a[b+1]}function y(a,b){return(a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3])>>>0}function z(){var a=new Uint8Array(2);a[0]=1;var b=new Uint16Array(a.buffer);return 1===b[0]}function A(){try{return new Function(""),!0}catch(a){return!1}}function B(a){var b,c=a.length,d=[];if("þ"===a[0]&&"ÿ"===a[1])for(b=2;c>b;b+=2)d.push(String.fromCharCode(a.charCodeAt(b)<<8|a.charCodeAt(b+1)));else for(b=0;c>b;++b){var e=pa[a.charCodeAt(b)];d.push(e?String.fromCharCode(e):a.charAt(b))}return d.join("")}function C(a){return decodeURIComponent(escape(a))}function D(a){return unescape(encodeURIComponent(a))}function E(a){for(var b in a)return!1;return!0}function F(a){return"boolean"==typeof a}function G(a){return"number"==typeof a&&(0|a)===a}function H(a){return"number"==typeof a}function I(a){return"string"==typeof a}function J(a){return a instanceof Array}function K(a){return"object"==typeof a&&null!==a&&void 0!==a.byteLength}function L(a){return 32===a||9===a||13===a||10===a}function M(){var a={};return a.promise=new Promise(function(b,c){a.resolve=b,a.reject=c}),a}function N(a,b,c){this.sourceName=a,this.targetName=b,this.comObj=c,this.callbackIndex=1,this.postMessageTransfers=!0;var d=this.callbacksCapabilities=Object.create(null),e=this.actionHandler=Object.create(null);this._onComObjOnMessage=function(a){var b=a.data;if(b.targetName===this.sourceName)if(b.isReply){var f=b.callbackId;if(b.callbackId in d){var g=d[f];delete d[f],"error"in b?g.reject(b.error):g.resolve(b.data)}else h("Cannot resolve callback "+f)}else if(b.action in e){var i=e[b.action];if(b.callbackId){var j=this.sourceName,k=b.sourceName;Promise.resolve().then(function(){return i[0].call(i[1],b.data)}).then(function(a){c.postMessage({sourceName:j,targetName:k,isReply:!0,callbackId:b.callbackId,data:a})},function(a){a instanceof Error&&(a+=""),c.postMessage({sourceName:j,targetName:k,isReply:!0,callbackId:b.callbackId,error:a})})}else i[0].call(i[1],b.data)}else h("Unknown action from worker: "+b.action)}.bind(this),c.addEventListener("message",this._onComObjOnMessage)}function O(a,b,c){var d=new Image;d.onload=function(){c.resolve(a,d)},d.onerror=function(){c.resolve(a,null),f("Error during JPEG image loading")},d.src=b}var P="undefined"!=typeof window?window:"undefined"!=typeof a?a:"undefined"!=typeof self?self:this,Q=[.001,0,0,.001,0,0],R={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},S={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},T={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},U={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},V={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},W={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},X={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9},Y={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10},Z={errors:0,warnings:1,infos:5},$={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},_=Z.warnings,aa={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"},ba={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},ca=function(){function a(a,b){this.name="PasswordException",this.message=a,this.code=b}return a.prototype=new Error,a.constructor=a,a}(),da=function(){function a(a,b){this.name="UnknownErrorException",this.message=a,this.details=b}return a.prototype=new Error,a.constructor=a,a}(),ea=function(){function a(a){this.name="InvalidPDFException",this.message=a}return a.prototype=new Error,a.constructor=a,a}(),fa=function(){function a(a){this.name="MissingPDFException",this.message=a}return a.prototype=new Error,a.constructor=a,a}(),ga=function(){function a(a,b){this.name="UnexpectedResponseException",this.message=a,this.status=b}return a.prototype=new Error,a.constructor=a,a}(),ha=function(){function a(a){this.message=a}return a.prototype=new Error,a.prototype.name="NotImplementedException",a.constructor=a,a}(),ia=function(){function a(a,b){this.begin=a,this.end=b,this.message="Missing data ["+a+", "+b+")"}return a.prototype=new Error,a.prototype.name="MissingDataException",a.constructor=a,a}(),ja=function(){function a(a){this.message=a}return a.prototype=new Error,a.prototype.name="XRefParseException",a.constructor=a,a}(),ka=/\x00/g,la=function(){function a(a,b){this.buffer=a,this.byteLength=a.length,this.length=void 0===b?this.byteLength>>2:b,c(this.length)}function b(a){return{get:function(){var b=this.buffer,c=a<<2;return(b[c]|b[c+1]<<8|b[c+2]<<16|b[c+3]<<24)>>>0},set:function(b){var c=this.buffer,d=a<<2;c[d]=255&b,c[d+1]=b>>8&255,c[d+2]=b>>16&255,c[d+3]=b>>>24&255}}}function c(c){for(;c>d;)Object.defineProperty(a.prototype,d,b(d)),d++}a.prototype=Object.create(null);var d=0;return a}();b.Uint32ArrayView=la;var ma=[1,0,0,1,0,0],na=function(){function a(){}var b=["rgb(",0,",",0,",",0,")"];a.makeCssRgb=function(a,c,d){return b[1]=a,b[3]=c,b[5]=d,b.join("")},a.transform=function(a,b){return[a[0]*b[0]+a[2]*b[1],a[1]*b[0]+a[3]*b[1],a[0]*b[2]+a[2]*b[3],a[1]*b[2]+a[3]*b[3],a[0]*b[4]+a[2]*b[5]+a[4],a[1]*b[4]+a[3]*b[5]+a[5]]},a.applyTransform=function(a,b){var c=a[0]*b[0]+a[1]*b[2]+b[4],d=a[0]*b[1]+a[1]*b[3]+b[5];return[c,d]},a.applyInverseTransform=function(a,b){var c=b[0]*b[3]-b[1]*b[2],d=(a[0]*b[3]-a[1]*b[2]+b[2]*b[5]-b[4]*b[3])/c,e=(-a[0]*b[1]+a[1]*b[0]+b[4]*b[1]-b[5]*b[0])/c;return[d,e]},a.getAxialAlignedBoundingBox=function(b,c){var d=a.applyTransform(b,c),e=a.applyTransform(b.slice(2,4),c),f=a.applyTransform([b[0],b[3]],c),g=a.applyTransform([b[2],b[1]],c);return[Math.min(d[0],e[0],f[0],g[0]),Math.min(d[1],e[1],f[1],g[1]),Math.max(d[0],e[0],f[0],g[0]),Math.max(d[1],e[1],f[1],g[1])]},a.inverseTransform=function(a){var b=a[0]*a[3]-a[1]*a[2];return[a[3]/b,-a[1]/b,-a[2]/b,a[0]/b,(a[2]*a[5]-a[4]*a[3])/b,(a[4]*a[1]-a[5]*a[0])/b]},a.apply3dTransform=function(a,b){return[a[0]*b[0]+a[1]*b[1]+a[2]*b[2],a[3]*b[0]+a[4]*b[1]+a[5]*b[2],a[6]*b[0]+a[7]*b[1]+a[8]*b[2]]},a.singularValueDecompose2dScale=function(a){var b=[a[0],a[2],a[1],a[3]],c=a[0]*b[0]+a[1]*b[2],d=a[0]*b[1]+a[1]*b[3],e=a[2]*b[0]+a[3]*b[2],f=a[2]*b[1]+a[3]*b[3],g=(c+f)/2,h=Math.sqrt((c+f)*(c+f)-4*(c*f-e*d))/2,i=g+h||1,j=g-h||1;return[Math.sqrt(i),Math.sqrt(j)]},a.normalizeRect=function(a){var b=a.slice(0);return a[0]>a[2]&&(b[0]=a[2],b[2]=a[0]),a[1]>a[3]&&(b[1]=a[3],b[3]=a[1]),b},a.intersect=function(b,c){function d(a,b){return a-b}var e=[b[0],b[2],c[0],c[2]].sort(d),f=[b[1],b[3],c[1],c[3]].sort(d),g=[];return b=a.normalizeRect(b),c=a.normalizeRect(c),e[0]===b[0]&&e[1]===c[0]||e[0]===c[0]&&e[1]===b[0]?(g[0]=e[1],g[2]=e[2],f[0]===b[1]&&f[1]===c[1]||f[0]===c[1]&&f[1]===b[1]?(g[1]=f[1],g[3]=f[2],g):!1):!1},a.sign=function(a){return 0>a?-1:1};var c=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];return a.toRoman=function(a,b){j(G(a)&&a>0,"The number should be a positive integer.");for(var d,e=[];a>=1e3;)a-=1e3,e.push("M");d=a/100|0,a%=100,e.push(c[d]),d=a/10|0,a%=10,e.push(c[10+d]),e.push(c[20+a]);var f=e.join("");return b?f.toLowerCase():f},a.appendToArray=function(a,b){Array.prototype.push.apply(a,b)},a.prependToArray=function(a,b){Array.prototype.unshift.apply(a,b)},a.extendObj=function(a,b){for(var c in b)a[c]=b[c]},a.getInheritableProperty=function(a,b,c){for(;a&&!a.has(b);)a=a.get("Parent");return a?c?a.getArray(b):a.get(b):null},a.inherit=function(a,b,c){a.prototype=Object.create(b.prototype),a.prototype.constructor=a;for(var d in c)a.prototype[d]=c[d]},a.loadScript=function(a,b){var c=document.createElement("script"),d=!1;c.setAttribute("src",a),b&&(c.onload=function(){d||b(),d=!0}),document.getElementsByTagName("head")[0].appendChild(c)},a}(),oa=function(){function a(a,b,c,d,e,f){this.viewBox=a,this.scale=b,this.rotation=c,this.offsetX=d,this.offsetY=e;var g,h,i,j,k=(a[2]+a[0])/2,l=(a[3]+a[1])/2;switch(c%=360,c=0>c?c+360:c){case 180:g=-1,h=0,i=0,j=1;break;case 90:g=0,h=1,i=1,j=0;break;case 270:g=0,h=-1,i=-1,j=0;break;default:g=1,h=0,i=0,j=-1}f&&(i=-i,j=-j);var m,n,o,p;0===g?(m=Math.abs(l-a[1])*b+d,n=Math.abs(k-a[0])*b+e,o=Math.abs(a[3]-a[1])*b,p=Math.abs(a[2]-a[0])*b):(m=Math.abs(k-a[0])*b+d,n=Math.abs(l-a[1])*b+e,o=Math.abs(a[2]-a[0])*b,p=Math.abs(a[3]-a[1])*b),this.transform=[g*b,h*b,i*b,j*b,m-g*b*k-i*b*l,n-h*b*k-j*b*l],this.width=o,this.height=p,this.fontScale=b}return a.prototype={clone:function(b){b=b||{};var c="scale"in b?b.scale:this.scale,d="rotation"in b?b.rotation:this.rotation;return new a(this.viewBox.slice(),c,d,this.offsetX,this.offsetY,b.dontFlip)},convertToViewportPoint:function(a,b){return na.applyTransform([a,b],this.transform)},convertToViewportRectangle:function(a){var b=na.applyTransform([a[0],a[1]],this.transform),c=na.applyTransform([a[2],a[3]],this.transform);return[b[0],b[1],c[0],c[1]]},convertToPdfPoint:function(a,b){return na.applyInverseTransform([a,b],this.transform)}},a}(),pa=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];!function(){if(P.Promise)return"function"!=typeof P.Promise.all&&(P.Promise.all=function(a){var b,c,d=0,e=[],f=new P.Promise(function(a,d){b=a,c=d});return a.forEach(function(a,f){d++,a.then(function(a){e[f]=a,d--,0===d&&b(e)},c)}),0===d&&b(e),f}),"function"!=typeof P.Promise.resolve&&(P.Promise.resolve=function(a){return new P.Promise(function(b){b(a)})}),"function"!=typeof P.Promise.reject&&(P.Promise.reject=function(a){return new P.Promise(function(b,c){c(a)})}),void("function"!=typeof P.Promise.prototype["catch"]&&(P.Promise.prototype["catch"]=function(a){return P.Promise.prototype.then(void 0,a)}));var a=0,b=1,c=2,d=500,e={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(b){b._status!==a&&(this.handlers=this.handlers.concat(b._handlers),b._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),0)))},runHandlers:function(){for(var a=1,d=Date.now()+a;this.handlers.length>0;){var e=this.handlers.shift(),f=e.thisPromise._status,g=e.thisPromise._value;try{f===b?"function"==typeof e.onResolve&&(g=e.onResolve(g)):"function"==typeof e.onReject&&(g=e.onReject(g),f=b,e.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(e.thisPromise))}catch(h){f=c,g=h}if(e.nextPromise._updateStatus(f,g),Date.now()>=d)break}return this.handlers.length>0?void setTimeout(this.runHandlers.bind(this),0):void(this.running=!1)},addUnhandledRejection:function(a){this.unhandledRejections.push({promise:a,time:Date.now()}),this.scheduleRejectionCheck()},removeUnhandeledRejection:function(a){a._unhandledRejection=!1;for(var b=0;b<this.unhandledRejections.length;b++)this.unhandledRejections[b].promise===a&&(this.unhandledRejections.splice(b),b--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=!1;for(var a=Date.now(),b=0;b<this.unhandledRejections.length;b++)if(a-this.unhandledRejections[b].time>d){var c=this.unhandledRejections[b].promise._value,e="Unhandled rejection: "+c;c.stack&&(e+="\n"+c.stack),f(e),this.unhandledRejections.splice(b),b--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),d))}},g=function(b){this._status=a,this._handlers=[];try{b.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(c){this._reject(c)}};g.all=function(a){function b(a){f._status!==c&&(i=[],e(a))}var d,e,f=new g(function(a,b){d=a,e=b}),h=a.length,i=[];if(0===h)return d(i),f;for(var j=0,k=a.length;k>j;++j){var l=a[j],m=function(a){return function(b){f._status!==c&&(i[a]=b,h--,0===h&&d(i))}}(j);g.isPromise(l)?l.then(m,b):m(l)}return f},g.isPromise=function(a){return a&&"function"==typeof a.then},g.resolve=function(a){return new g(function(b){b(a)})},g.reject=function(a){return new g(function(b,c){c(a)})},g.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(a,d){if(this._status!==b&&this._status!==c){if(a===b&&g.isPromise(d))return void d.then(this._updateStatus.bind(this,b),this._updateStatus.bind(this,c));this._status=a,this._value=d,a===c&&0===this._handlers.length&&(this._unhandledRejection=!0,e.addUnhandledRejection(this)),e.scheduleHandlers(this)}},_resolve:function(a){this._updateStatus(b,a)},_reject:function(a){this._updateStatus(c,a)},then:function(a,b){var c=new g(function(a,b){this.resolve=a,this.reject=b});return this._handlers.push({thisPromise:this,onResolve:a,onReject:b,nextPromise:c}),e.scheduleHandlers(this),c},"catch":function(a){return this.then(void 0,a)}},P.Promise=g}(),function(){function a(){this.id="$weakmap"+b++}if(!P.WeakMap){var b=0;a.prototype={has:function(a){return!!Object.getOwnPropertyDescriptor(a,this.id)},get:function(a,b){return this.has(a)?a[this.id]:b},set:function(a,b){Object.defineProperty(a,this.id,{value:b,enumerable:!1,configurable:!0})},"delete":function(a){delete a[this.id]}},P.WeakMap=a}}();var qa=function(){function a(a,b,c){for(;a.length<c;)a+=b;return a}function b(){this.started=Object.create(null),this.times=[],this.enabled=!0}return b.prototype={time:function(a){this.enabled&&(a in this.started&&f("Timer is already running for "+a),this.started[a]=Date.now())},timeEnd:function(a){this.enabled&&(a in this.started||f("Timer has not been started for "+a),this.times.push({name:a,start:this.started[a],end:Date.now()}),delete this.started[a])},toString:function(){var b,c,d=this.times,e="",f=0;for(b=0,c=d.length;c>b;++b){var g=d[b].name;g.length>f&&(f=g.length)}for(b=0,c=d.length;c>b;++b){var h=d[b],i=h.end-h.start;e+=a(h.name," ",f)+" "+i+"ms\n"}return e}},b}(),ra=function(a,b){return"undefined"!=typeof Blob?new Blob([a],{type:b}):void f('The "Blob" constructor is not supported.')},sa=function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(b,c,d){if(!d&&"undefined"!=typeof URL&&URL.createObjectURL){var e=ra(b,c);return URL.createObjectURL(e)}for(var f="data:"+c+";base64,",g=0,h=b.length;h>g;g+=3){var i=255&b[g],j=255&b[g+1],k=255&b[g+2],l=i>>2,m=(3&i)<<4|j>>4,n=h>g+1?(15&j)<<2|k>>6:64,o=h>g+2?63&k:64;f+=a[l]+a[m]+a[n]+a[o]}return f}}();N.prototype={on:function(a,b,c){var d=this.actionHandler;d[a]&&h('There is already an actionName called "'+a+'"'),d[a]=[b,c]},send:function(a,b,c){var d={sourceName:this.sourceName,targetName:this.targetName,action:a,data:b};this.postMessage(d,c)},sendWithPromise:function(a,b,c){var d=this.callbackIndex++,e={sourceName:this.sourceName,targetName:this.targetName,action:a,data:b,callbackId:d},f=M();this.callbacksCapabilities[d]=f;try{this.postMessage(e,c)}catch(g){f.reject(g)}return f.promise},postMessage:function(a,b){b&&this.postMessageTransfers?this.comObj.postMessage(a,b):this.comObj.postMessage(a)},destroy:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}},function(a){function b(a){return void 0!==m[a]}function c(){h.call(this),this._isInvalid=!0}function d(a){return""===a&&c.call(this),a.toLowerCase()}function e(a){var b=a.charCodeAt(0);return b>32&&127>b&&-1===[34,35,60,62,63,96].indexOf(b)?a:encodeURIComponent(a)}function f(a){var b=a.charCodeAt(0);return b>32&&127>b&&-1===[34,35,60,62,96].indexOf(b)?a:encodeURIComponent(a)}function g(a,g,h){function i(a){t.push(a)}var j=g||"scheme start",k=0,l="",r=!1,s=!1,t=[];a:for(;(a[k-1]!==o||0===k)&&!this._isInvalid;){var u=a[k];switch(j){case"scheme start":if(!u||!p.test(u)){if(g){i("Invalid scheme.");break a}l="",j="no scheme";continue}l+=u.toLowerCase(),j="scheme";break;case"scheme":if(u&&q.test(u))l+=u.toLowerCase();else{if(":"!==u){if(g){if(o===u)break a;i("Code point not allowed in scheme: "+u);break a}l="",k=0,j="no scheme";continue}if(this._scheme=l,l="",g)break a;b(this._scheme)&&(this._isRelative=!0),j="file"===this._scheme?"relative":this._isRelative&&h&&h._scheme===this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"===u?(this._query="?",j="query"):"#"===u?(this._fragment="#",j="fragment"):o!==u&&"	"!==u&&"\n"!==u&&"\r"!==u&&(this._schemeData+=e(u));break;case"no scheme":if(h&&b(h._scheme)){j="relative";continue}i("Missing scheme."),c.call(this);break;case"relative or authority":if("/"!==u||"/"!==a[k+1]){i("Expected /, got: "+u),j="relative";continue}j="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!==this._scheme&&(this._scheme=h._scheme),o===u){this._host=h._host,this._port=h._port,this._path=h._path.slice(),this._query=h._query,this._username=h._username,this._password=h._password;break a}if("/"===u||"\\"===u)"\\"===u&&i("\\ is an invalid code point."),j="relative slash";else if("?"===u)this._host=h._host,this._port=h._port,this._path=h._path.slice(),this._query="?",this._username=h._username,this._password=h._password,j="query";else{if("#"!==u){var v=a[k+1],w=a[k+2];("file"!==this._scheme||!p.test(u)||":"!==v&&"|"!==v||o!==w&&"/"!==w&&"\\"!==w&&"?"!==w&&"#"!==w)&&(this._host=h._host,this._port=h._port,this._username=h._username,this._password=h._password,this._path=h._path.slice(),this._path.pop()),j="relative path";continue}this._host=h._host,this._port=h._port,this._path=h._path.slice(),this._query=h._query,this._fragment="#",this._username=h._username,this._password=h._password,j="fragment"}break;case"relative slash":if("/"!==u&&"\\"!==u){"file"!==this._scheme&&(this._host=h._host,this._port=h._port,this._username=h._username,this._password=h._password),j="relative path";continue}"\\"===u&&i("\\ is an invalid code point."),j="file"===this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!==u){i("Expected '/', got: "+u),j="authority ignore slashes";continue}j="authority second slash";break;case"authority second slash":if(j="authority ignore slashes","/"!==u){i("Expected '/', got: "+u);continue}break;case"authority ignore slashes":if("/"!==u&&"\\"!==u){j="authority";continue}i("Expected authority, got: "+u);break;case"authority":if("@"===u){r&&(i("@ already seen."),l+="%40"),r=!0;for(var x=0;x<l.length;x++){var y=l[x];if("	"!==y&&"\n"!==y&&"\r"!==y)if(":"!==y||null!==this._password){var z=e(y);null!==this._password?this._password+=z:this._username+=z}else this._password="";else i("Invalid whitespace in authority.")}l=""}else{if(u===o||"/"===u||"\\"===u||"?"===u||"#"===u){k-=l.length,l="",j="host";continue}l+=u}break;case"file host":if(u===o||"/"===u||"\\"===u||"?"===u||"#"===u){2!==l.length||!p.test(l[0])||":"!==l[1]&&"|"!==l[1]?0===l.length?j="relative path start":(this._host=d.call(this,l),l="",j="relative path start"):j="relative path";continue}"	"===u||"\n"===u||"\r"===u?i("Invalid whitespace in file host."):l+=u;break;case"host":case"hostname":if(":"!==u||s){if(u===o||"/"===u||"\\"===u||"?"===u||"#"===u){if(this._host=d.call(this,l),l="",j="relative path start",g)break a;continue}"	"!==u&&"\n"!==u&&"\r"!==u?("["===u?s=!0:"]"===u&&(s=!1),l+=u):i("Invalid code point in host/hostname: "+u)}else if(this._host=d.call(this,l),l="",j="port","hostname"===g)break a;break;case"port":if(/[0-9]/.test(u))l+=u;else{if(u===o||"/"===u||"\\"===u||"?"===u||"#"===u||g){if(""!==l){var A=parseInt(l,10);A!==m[this._scheme]&&(this._port=A+""),l=""}if(g)break a;j="relative path start";continue}"	"===u||"\n"===u||"\r"===u?i("Invalid code point in port: "+u):c.call(this)}break;case"relative path start":if("\\"===u&&i("'\\' not allowed in path."),j="relative path","/"!==u&&"\\"!==u)continue;break;case"relative path":if(u!==o&&"/"!==u&&"\\"!==u&&(g||"?"!==u&&"#"!==u))"	"!==u&&"\n"!==u&&"\r"!==u&&(l+=e(u));else{"\\"===u&&i("\\ not allowed in relative path.");var B;(B=n[l.toLowerCase()])&&(l=B),".."===l?(this._path.pop(),"/"!==u&&"\\"!==u&&this._path.push("")):"."===l&&"/"!==u&&"\\"!==u?this._path.push(""):"."!==l&&("file"===this._scheme&&0===this._path.length&&2===l.length&&p.test(l[0])&&"|"===l[1]&&(l=l[0]+":"),this._path.push(l)),l="","?"===u?(this._query="?",j="query"):"#"===u&&(this._fragment="#",j="fragment")}break;case"query":g||"#"!==u?o!==u&&"	"!==u&&"\n"!==u&&"\r"!==u&&(this._query+=f(u)):(this._fragment="#",j="fragment");break;case"fragment":o!==u&&"	"!==u&&"\n"!==u&&"\r"!==u&&(this._fragment+=u)}k++}}function h(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function i(a,b){void 0===b||b instanceof i||(b=new i(String(b))),this._url=a,h.call(this);var c=a.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");g.call(this,c,null,b)}var j=!1;try{if("function"==typeof URL&&"object"==typeof URL.prototype&&"origin"in URL.prototype){var k=new URL("b","http://a");k.pathname="c%20d",j="http://a/c%20d"===k.href}}catch(l){}if(!j){var m=Object.create(null);m.ftp=21,m.file=0,m.gopher=70,m.http=80,m.https=443,m.ws=80,m.wss=443;var n=Object.create(null);n["%2e"]=".",n[".%2e"]="..",n["%2e."]="..",n["%2e%2e"]="..";var o,p=/[a-zA-Z]/,q=/[a-zA-Z0-9\+\-\.]/;i.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var a="";return(""!==this._username||null!==this._password)&&(a=this._username+(null!==this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+a+this.host:"")+this.pathname+this._query+this._fragment},set href(a){h.call(this),g.call(this,a)},get protocol(){return this._scheme+":"},set protocol(a){this._isInvalid||g.call(this,a+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(a){!this._isInvalid&&this._isRelative&&g.call(this,a,"host")},get hostname(){return this._host},set hostname(a){!this._isInvalid&&this._isRelative&&g.call(this,a,"hostname")},get port(){return this._port},set port(a){!this._isInvalid&&this._isRelative&&g.call(this,a,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(a){!this._isInvalid&&this._isRelative&&(this._path=[],g.call(this,a,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"===this._query?"":this._query},set search(a){!this._isInvalid&&this._isRelative&&(this._query="?","?"===a[0]&&(a=a.slice(1)),g.call(this,a,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"===this._fragment?"":this._fragment},set hash(a){this._isInvalid||(this._fragment="#","#"===a[0]&&(a=a.slice(1)),g.call(this,a,"fragment"))},get origin(){var a;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return a=this.host,a?this._scheme+"://"+a:""}};var r=a.URL;r&&(i.createObjectURL=function(a){return r.createObjectURL.apply(r,arguments)},i.revokeObjectURL=function(a){r.revokeObjectURL(a)}),a.URL=i}}(P),b.FONT_IDENTITY_MATRIX=Q,b.IDENTITY_MATRIX=ma,b.OPS=$,b.VERBOSITY_LEVELS=Z,b.UNSUPPORTED_FEATURES=aa,b.AnnotationBorderStyleType=W,b.AnnotationFieldFlag=V,b.AnnotationFlag=U,b.AnnotationType=T,b.FontType=Y,b.ImageKind=S,b.InvalidPDFException=ea,b.MessageHandler=N,b.MissingDataException=ia,b.MissingPDFException=fa,b.NotImplementedException=ha,b.PageViewport=oa,b.PasswordException=ca,b.PasswordResponses=ba,b.StatTimer=qa,b.StreamType=X,b.TextRenderingMode=R,b.UnexpectedResponseException=ga,b.UnknownErrorException=da,b.Util=na,b.XRefParseException=ja,b.arrayByteLength=s,b.arraysToBytes=t,b.assert=j,b.bytesToString=q,b.createBlob=ra,b.createPromiseCapability=M,b.createObjectURL=sa,b.deprecated=g,b.error=h,b.getLookupTableFactory=o,b.getVerbosityLevel=d,b.globalScope=P,b.info=e,b.isArray=J,b.isArrayBuffer=K,b.isBool=F,b.isEmptyObj=E,b.isInt=G,b.isNum=H,b.isString=I,b.isSpace=L,b.isSameOrigin=k,b.createValidAbsoluteUrl=m,b.isLittleEndian=z,b.isEvalSupported=A,b.loadJpegStream=O,b.log2=v,b.readInt8=w,b.readUint16=x,b.readUint32=y,b.removeNullCharacters=p,b.setVerbosityLevel=c,b.shadow=n,b.string32=u,b.stringToBytes=r,b.stringToPDFString=B,b.stringToUTF8String=C,b.utf8StringToString=D,b.warn=f}).call(b,c(9))},function(a,b,c){"use strict";function d(){}function e(a,b){var c=b&&b.url;if(a.href=a.title=c?l(c):"",c){var d=b.target;"undefined"==typeof d&&(d=g("externalLinkTarget")),a.target=t[d];var e=b.rel;"undefined"==typeof e&&(e=g("externalLinkRel")),a.rel=e}}function f(a){var b=a.indexOf("#"),c=a.indexOf("?"),d=Math.min(b>0?b:a.length,c>0?c:a.length);return a.substring(a.lastIndexOf("/",d)+1,d);
}function g(a){var b=j.globalScope.PDFJS;switch(a){case"pdfBug":return b?b.pdfBug:!1;case"disableAutoFetch":return b?b.disableAutoFetch:!1;case"disableStream":return b?b.disableStream:!1;case"disableRange":return b?b.disableRange:!1;case"disableFontFace":return b?b.disableFontFace:!1;case"disableCreateObjectURL":return b?b.disableCreateObjectURL:!1;case"disableWebGL":return b?b.disableWebGL:!0;case"cMapUrl":return b?b.cMapUrl:null;case"cMapPacked":return b?b.cMapPacked:!1;case"postMessageTransfers":return b?b.postMessageTransfers:!0;case"workerSrc":return b?b.workerSrc:null;case"disableWorker":return b?b.disableWorker:!1;case"maxImageSize":return b?b.maxImageSize:-1;case"imageResourcesPath":return b?b.imageResourcesPath:"";case"isEvalSupported":return b?b.isEvalSupported:!0;case"externalLinkTarget":if(!b)return s.NONE;switch(b.externalLinkTarget){case s.NONE:case s.SELF:case s.BLANK:case s.PARENT:case s.TOP:return b.externalLinkTarget}return m("PDFJS.externalLinkTarget is invalid: "+b.externalLinkTarget),b.externalLinkTarget=s.NONE,s.NONE;case"externalLinkRel":return b?b.externalLinkRel:p;case"enableStats":return!(!b||!b.enableStats);default:throw new Error("Unknown default setting: "+a)}}function h(){var a=g("externalLinkTarget");switch(a){case s.NONE:return!1;case s.SELF:case s.BLANK:case s.PARENT:case s.TOP:return!0}}function i(a,b){n("isValidUrl(), please use createValidAbsoluteUrl() instead.");var c=b?"http://example.com":null;return null!==o(a,c)}var j=c(0),k=j.assert,l=j.removeNullCharacters,m=j.warn,n=j.deprecated,o=j.createValidAbsoluteUrl,p="noopener noreferrer nofollow";d.prototype={create:function(a,b){k(a>0&&b>0,"invalid canvas size");var c=document.createElement("canvas"),d=c.getContext("2d");return c.width=a,c.height=b,{canvas:c,context:d}},reset:function(a,b,c){k(a.canvas,"canvas is not specified"),k(b>0&&c>0,"invalid canvas size"),a.canvas.width=b,a.canvas.height=c},destroy:function(a){k(a.canvas,"canvas is not specified"),a.canvas.width=0,a.canvas.height=0,a.canvas=null,a.context=null}};var q,r=function(){function a(){}var b=["ms","Moz","Webkit","O"],c=Object.create(null);return a.getProp=function(a,d){if(1===arguments.length&&"string"==typeof c[a])return c[a];d=d||document.documentElement;var e,f,g=d.style;if("string"==typeof g[a])return c[a]=a;f=a.charAt(0).toUpperCase()+a.slice(1);for(var h=0,i=b.length;i>h;h++)if(e=b[h]+f,"string"==typeof g[e])return c[a]=e;return c[a]="undefined"},a.setProp=function(a,b,c){var d=this.getProp(a);"undefined"!==d&&(b.style[d]=c)},a}();q=function(){var a=document.createElement("canvas");a.width=a.height=1;var b=a.getContext("2d"),c=b.createImageData(1,1);return"undefined"!=typeof c.data.buffer};var s={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},t=["","_self","_blank","_parent","_top"];b.CustomStyle=r,b.addLinkAttributes=e,b.isExternalLinkTargetSet=h,b.isValidUrl=i,b.getFilenameFromUrl=f,b.LinkTarget=s,b.hasCanvasTypedArrays=q,b.getDefaultSetting=g,b.DEFAULT_LINK_REL=p,b.DOMCanvasFactory=d},function(a,b,c){"use strict";function d(){}var e=c(0),f=c(1),g=e.AnnotationBorderStyleType,h=e.AnnotationType,i=e.stringToPDFString,j=e.Util,k=f.addLinkAttributes,l=f.LinkTarget,m=f.getFilenameFromUrl,n=e.warn,o=f.CustomStyle,p=f.getDefaultSetting;d.prototype={create:function(a){var b=a.data.annotationType;switch(b){case h.LINK:return new r(a);case h.TEXT:return new s(a);case h.WIDGET:var c=a.data.fieldType;switch(c){case"Tx":return new u(a);case"Btn":if(a.data.radioButton)return new w(a);if(a.data.checkBox)return new v(a);n("Unimplemented button widget annotation: pushbutton");break;case"Ch":return new x(a)}return new t(a);case h.POPUP:return new y(a);case h.HIGHLIGHT:return new A(a);case h.UNDERLINE:return new B(a);case h.SQUIGGLY:return new C(a);case h.STRIKEOUT:return new D(a);case h.FILEATTACHMENT:return new E(a);default:return new q(a)}}};var q=function(){function a(a,b){this.isRenderable=b||!1,this.data=a.data,this.layer=a.layer,this.page=a.page,this.viewport=a.viewport,this.linkService=a.linkService,this.downloadManager=a.downloadManager,this.imageResourcesPath=a.imageResourcesPath,this.renderInteractiveForms=a.renderInteractiveForms,b&&(this.container=this._createContainer())}return a.prototype={_createContainer:function(){var a=this.data,b=this.page,c=this.viewport,d=document.createElement("section"),e=a.rect[2]-a.rect[0],f=a.rect[3]-a.rect[1];d.setAttribute("data-annotation-id",a.id);var h=j.normalizeRect([a.rect[0],b.view[3]-a.rect[1]+b.view[1],a.rect[2],b.view[3]-a.rect[3]+b.view[1]]);if(o.setProp("transform",d,"matrix("+c.transform.join(",")+")"),o.setProp("transformOrigin",d,-h[0]+"px "+-h[1]+"px"),a.borderStyle.width>0){d.style.borderWidth=a.borderStyle.width+"px",a.borderStyle.style!==g.UNDERLINE&&(e-=2*a.borderStyle.width,f-=2*a.borderStyle.width);var i=a.borderStyle.horizontalCornerRadius,k=a.borderStyle.verticalCornerRadius;if(i>0||k>0){var l=i+"px / "+k+"px";o.setProp("borderRadius",d,l)}switch(a.borderStyle.style){case g.SOLID:d.style.borderStyle="solid";break;case g.DASHED:d.style.borderStyle="dashed";break;case g.BEVELED:n("Unimplemented border style: beveled");break;case g.INSET:n("Unimplemented border style: inset");break;case g.UNDERLINE:d.style.borderBottomStyle="solid"}a.color?d.style.borderColor=j.makeCssRgb(0|a.color[0],0|a.color[1],0|a.color[2]):d.style.borderWidth=0}return d.style.left=h[0]+"px",d.style.top=h[1]+"px",d.style.width=e+"px",d.style.height=f+"px",d},_createPopup:function(a,b,c){b||(b=document.createElement("div"),b.style.height=a.style.height,b.style.width=a.style.width,a.appendChild(b));var d=new z({container:a,trigger:b,color:c.color,title:c.title,contents:c.contents,hideWrapper:!0}),e=d.render();e.style.left=a.style.width,a.appendChild(e)},render:function(){throw new Error("Abstract method AnnotationElement.render called")}},a}(),r=function(){function a(a){q.call(this,a,!0)}return j.inherit(a,q,{render:function(){this.container.className="linkAnnotation";var a=document.createElement("a");return k(a,{url:this.data.url,target:this.data.newWindow?l.BLANK:void 0}),this.data.url||(this.data.action?this._bindNamedAction(a,this.data.action):this._bindLink(a,this.data.dest)),this.container.appendChild(a),this.container},_bindLink:function(a,b){var c=this;a.href=this.linkService.getDestinationHash(b),a.onclick=function(){return b&&c.linkService.navigateTo(b),!1},b&&(a.className="internalLink")},_bindNamedAction:function(a,b){var c=this;a.href=this.linkService.getAnchorUrl(""),a.onclick=function(){return c.linkService.executeNamedAction(b),!1},a.className="internalLink"}}),a}(),s=function(){function a(a){var b=!!(a.data.hasPopup||a.data.title||a.data.contents);q.call(this,a,b)}return j.inherit(a,q,{render:function(){this.container.className="textAnnotation";var a=document.createElement("img");return a.style.height=this.container.style.height,a.style.width=this.container.style.width,a.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",a.alt="[{{type}} Annotation]",a.dataset.l10nId="text_annotation_type",a.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,a,this.data),this.container.appendChild(a),this.container}}),a}(),t=function(){function a(a,b){q.call(this,a,b)}return j.inherit(a,q,{render:function(){return this.container}}),a}(),u=function(){function a(a){var b=a.renderInteractiveForms||!a.data.hasAppearance&&!!a.data.fieldValue;t.call(this,a,b)}var b=["left","center","right"];return j.inherit(a,t,{render:function(){this.container.className="textWidgetAnnotation";var a=null;if(this.renderInteractiveForms){if(this.data.multiLine?(a=document.createElement("textarea"),a.textContent=this.data.fieldValue):(a=document.createElement("input"),a.type="text",a.setAttribute("value",this.data.fieldValue)),a.disabled=this.data.readOnly,null!==this.data.maxLen&&(a.maxLength=this.data.maxLen),this.data.comb){var c=this.data.rect[2]-this.data.rect[0],d=c/this.data.maxLen;a.classList.add("comb"),a.style.letterSpacing="calc("+d+"px - 1ch)"}}else{a=document.createElement("div"),a.textContent=this.data.fieldValue,a.style.verticalAlign="middle",a.style.display="table-cell";var e=null;this.data.fontRefName&&(e=this.page.commonObjs.getData(this.data.fontRefName)),this._setTextStyle(a,e)}return null!==this.data.textAlignment&&(a.style.textAlign=b[this.data.textAlignment]),this.container.appendChild(a),this.container},_setTextStyle:function(a,b){var c=a.style;if(c.fontSize=this.data.fontSize+"px",c.direction=this.data.fontDirection<0?"rtl":"ltr",b){c.fontWeight=b.black?b.bold?"900":"bold":b.bold?"bold":"normal",c.fontStyle=b.italic?"italic":"normal";var d=b.loadedName?'"'+b.loadedName+'", ':"",e=b.fallbackName||"Helvetica, sans-serif";c.fontFamily=d+e}}}),a}(),v=function(){function a(a){t.call(this,a,a.renderInteractiveForms)}return j.inherit(a,t,{render:function(){this.container.className="buttonWidgetAnnotation checkBox";var a=document.createElement("input");return a.disabled=this.data.readOnly,a.type="checkbox",this.data.fieldValue&&"Off"!==this.data.fieldValue&&a.setAttribute("checked",!0),this.container.appendChild(a),this.container}}),a}(),w=function(){function a(a){t.call(this,a,a.renderInteractiveForms)}return j.inherit(a,t,{render:function(){this.container.className="buttonWidgetAnnotation radioButton";var a=document.createElement("input");return a.disabled=this.data.readOnly,a.type="radio",a.name=this.data.fieldName,this.data.fieldValue===this.data.buttonValue&&a.setAttribute("checked",!0),this.container.appendChild(a),this.container}}),a}(),x=function(){function a(a){t.call(this,a,a.renderInteractiveForms)}return j.inherit(a,t,{render:function(){this.container.className="choiceWidgetAnnotation";var a=document.createElement("select");a.disabled=this.data.readOnly,this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0));for(var b=0,c=this.data.options.length;c>b;b++){var d=this.data.options[b],e=document.createElement("option");e.textContent=d.displayValue,e.value=d.exportValue,this.data.fieldValue.indexOf(d.displayValue)>=0&&e.setAttribute("selected",!0),a.appendChild(e)}return this.container.appendChild(a),this.container}}),a}(),y=function(){function a(a){var b=!(!a.data.title&&!a.data.contents);q.call(this,a,b)}return j.inherit(a,q,{render:function(){this.container.className="popupAnnotation";var a='[data-annotation-id="'+this.data.parentId+'"]',b=this.layer.querySelector(a);if(!b)return this.container;var c=new z({container:this.container,trigger:b,color:this.data.color,title:this.data.title,contents:this.data.contents}),d=parseFloat(b.style.left),e=parseFloat(b.style.width);return o.setProp("transformOrigin",this.container,-(d+e)+"px -"+b.style.top),this.container.style.left=d+e+"px",this.container.appendChild(c.render()),this.container}}),a}(),z=function(){function a(a){this.container=a.container,this.trigger=a.trigger,this.color=a.color,this.title=a.title,this.contents=a.contents,this.hideWrapper=a.hideWrapper||!1,this.pinned=!1}var b=.7;return a.prototype={render:function(){var a=document.createElement("div");a.className="popupWrapper",this.hideElement=this.hideWrapper?a:this.container,this.hideElement.setAttribute("hidden",!0);var c=document.createElement("div");c.className="popup";var d=this.color;if(d){var e=b*(255-d[0])+d[0],f=b*(255-d[1])+d[1],g=b*(255-d[2])+d[2];c.style.backgroundColor=j.makeCssRgb(0|e,0|f,0|g)}var h=this._formatContents(this.contents),i=document.createElement("h1");return i.textContent=this.title,this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),c.addEventListener("click",this._hide.bind(this,!0)),c.appendChild(i),c.appendChild(h),a.appendChild(c),a},_formatContents:function(a){for(var b=document.createElement("p"),c=a.split(/(?:\r\n?|\n)/),d=0,e=c.length;e>d;++d){var f=c[d];b.appendChild(document.createTextNode(f)),e-1>d&&b.appendChild(document.createElement("br"))}return b},_toggle:function(){this.pinned?this._hide(!0):this._show(!0)},_show:function(a){a&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)},_hide:function(a){a&&(this.pinned=!1),this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}},a}(),A=function(){function a(a){var b=!!(a.data.hasPopup||a.data.title||a.data.contents);q.call(this,a,b)}return j.inherit(a,q,{render:function(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}),a}(),B=function(){function a(a){var b=!!(a.data.hasPopup||a.data.title||a.data.contents);q.call(this,a,b)}return j.inherit(a,q,{render:function(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}),a}(),C=function(){function a(a){var b=!!(a.data.hasPopup||a.data.title||a.data.contents);q.call(this,a,b)}return j.inherit(a,q,{render:function(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}),a}(),D=function(){function a(a){var b=!!(a.data.hasPopup||a.data.title||a.data.contents);q.call(this,a,b)}return j.inherit(a,q,{render:function(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}),a}(),E=function(){function a(a){q.call(this,a,!0);var b=this.data.file;this.filename=m(b.filename),this.content=b.content,this.linkService.onFileAttachmentAnnotation({id:i(b.filename),filename:b.filename,content:b.content})}return j.inherit(a,q,{render:function(){this.container.className="fileAttachmentAnnotation";var a=document.createElement("div");return a.style.height=this.container.style.height,a.style.width=this.container.style.width,a.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,a,this.data),this.container.appendChild(a),this.container},_download:function(){return this.downloadManager?void this.downloadManager.downloadData(this.content,this.filename,""):void n("Download cannot be started due to unavailable download manager")}}),a}(),F=function(){return{render:function(a){for(var b=new d,c=0,e=a.annotations.length;e>c;c++){var f=a.annotations[c];if(f){var g=b.create({data:f,layer:a.div,page:a.page,viewport:a.viewport,linkService:a.linkService,downloadManager:a.downloadManager,imageResourcesPath:a.imageResourcesPath||p("imageResourcesPath"),renderInteractiveForms:a.renderInteractiveForms||!1});g.isRenderable&&a.div.appendChild(g.render())}}},update:function(a){for(var b=0,c=a.annotations.length;c>b;b++){var d=a.annotations[b],e=a.div.querySelector('[data-annotation-id="'+d.id+'"]');e&&o.setProp("transform",e,"matrix("+a.viewport.transform.join(",")+")")}a.div.removeAttribute("hidden")}}}();b.AnnotationLayer=F},function(a,b,c){"use strict";function d(a,b,c,d){var f=new U;arguments.length>1&&w("getDocument is called with pdfDataRangeTransport, passwordCallback or progressCallback argument"),b&&(b instanceof V||(b=Object.create(b),b.length=a.length,b.initialData=a.initialData,b.abort||(b.abort=function(){})),a=Object.create(a),a.range=b),f.onPassword=c||null,f.onProgress=d||null;var g;"string"==typeof a?g={url:a}:B(a)?g={data:a}:a instanceof V?g={range:a}:("object"!=typeof a&&v("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object"),a.url||a.data||a.range||v("Invalid parameter object: need either .data, .range or .url"),g=a);var h={},i=null,j=null;for(var k in g)if("url"!==k||"undefined"==typeof window)if("range"!==k)if("worker"!==k)if("data"!==k||g[k]instanceof Uint8Array)h[k]=g[k];else{var l=g[k];"string"==typeof l?h[k]=E(l):"object"!=typeof l||null===l||isNaN(l.length)?B(l)?h[k]=new Uint8Array(l):v("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property."):h[k]=new Uint8Array(l)}else j=g[k];else i=g[k];else h[k]=new URL(g[k],window.location).href;h.rangeChunkSize=h.rangeChunkSize||N,h.disableNativeImageDecoder=h.disableNativeImageDecoder===!0,j||(j=new Y,f._worker=j);var n=f.docId;return j.promise.then(function(){if(f.destroyed)throw new Error("Loading aborted");return e(j,h,i,n).then(function(a){if(f.destroyed)throw new Error("Loading aborted");var b=new m(n,a,j.port),c=new Z(b,f,i);f._transport=c,b.send("Ready",null)})})["catch"](f._capability.reject),f}function e(a,b,c,d){return a.destroyed?Promise.reject(new Error("Worker was destroyed")):(b.disableAutoFetch=L("disableAutoFetch"),b.disableStream=L("disableStream"),b.chunkedViewerLoading=!!c,c&&(b.length=c.length,b.initialData=c.initialData),a.messageHandler.sendWithPromise("GetDocRequest",{docId:d,source:b,disableRange:L("disableRange"),maxImageSize:L("maxImageSize"),cMapUrl:L("cMapUrl"),cMapPacked:L("cMapPacked"),disableFontFace:L("disableFontFace"),disableCreateObjectURL:L("disableCreateObjectURL"),postMessageTransfers:L("postMessageTransfers")&&!P,docBaseUrl:b.docBaseUrl,disableNativeImageDecoder:b.disableNativeImageDecoder}).then(function(b){if(a.destroyed)throw new Error("Worker was destroyed");return b}))}var f,g=c(0),h=c(11),i=c(10),j=c(6),k=c(1),l=g.InvalidPDFException,m=g.MessageHandler,n=g.MissingPDFException,o=g.PageViewport,p=g.PasswordException,q=g.StatTimer,r=g.UnexpectedResponseException,s=g.UnknownErrorException,t=g.Util,u=g.createPromiseCapability,v=g.error,w=g.deprecated,x=g.getVerbosityLevel,y=g.info,z=g.isInt,A=g.isArray,B=g.isArrayBuffer,C=g.isSameOrigin,D=g.loadJpegStream,E=g.stringToBytes,F=g.globalScope,G=g.warn,H=h.FontFaceObject,I=h.FontLoader,J=i.CanvasGraphics,K=j.Metadata,L=k.getDefaultSetting,M=k.DOMCanvasFactory,N=65536,O=!1,P=!1,Q="undefined"!=typeof document&&document.currentScript?document.currentScript.src:null,R=null,S=!1;if("undefined"==typeof __pdfjsdev_webpack__){"undefined"==typeof window?(O=!0,"undefined"==typeof require.ensure&&(require.ensure=require("node-ensure")),S=!0):"undefined"!=typeof require&&"function"==typeof require.ensure&&(S=!0),"undefined"!=typeof requirejs&&requirejs.toUrl&&(f=requirejs.toUrl("pdfjs-dist/build/pdf.worker.js"));var T="undefined"!=typeof requirejs&&requirejs.load;R=S?function(a){require.ensure([],function(){var b=require("./pdf.worker.js");a(b.WorkerMessageHandler)})}:T?function(a){requirejs(["pdfjs-dist/build/pdf.worker"],function(b){a(b.WorkerMessageHandler)})}:null}var U=function(){function a(){this._capability=u(),this._transport=null,this._worker=null,this.docId="d"+b++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}var b=0;return a.prototype={get promise(){return this._capability.promise},destroy:function(){this.destroyed=!0;var a=this._transport?this._transport.destroy():Promise.resolve();return a.then(function(){this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}.bind(this))},then:function(a,b){return this.promise.then.apply(this.promise,arguments)}},a}(),V=function(){function a(a,b){this.length=a,this.initialData=b,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._readyCapability=u()}return a.prototype={addRangeListener:function(a){this._rangeListeners.push(a)},addProgressListener:function(a){this._progressListeners.push(a)},addProgressiveReadListener:function(a){this._progressiveReadListeners.push(a)},onDataRange:function(a,b){for(var c=this._rangeListeners,d=0,e=c.length;e>d;++d)c[d](a,b)},onDataProgress:function(a){this._readyCapability.promise.then(function(){for(var b=this._progressListeners,c=0,d=b.length;d>c;++c)b[c](a)}.bind(this))},onDataProgressiveRead:function(a){this._readyCapability.promise.then(function(){for(var b=this._progressiveReadListeners,c=0,d=b.length;d>c;++c)b[c](a)}.bind(this))},transportReady:function(){this._readyCapability.resolve()},requestDataRange:function(a,b){throw new Error("Abstract method PDFDataRangeTransport.requestDataRange")},abort:function(){}},a}(),W=function(){function a(a,b,c){this.pdfInfo=a,this.transport=b,this.loadingTask=c}return a.prototype={get numPages(){return this.pdfInfo.numPages},get fingerprint(){return this.pdfInfo.fingerprint},getPage:function(a){return this.transport.getPage(a)},getPageIndex:function(a){return this.transport.getPageIndex(a)},getDestinations:function(){return this.transport.getDestinations()},getDestination:function(a){return this.transport.getDestination(a)},getPageLabels:function(){return this.transport.getPageLabels()},getAttachments:function(){return this.transport.getAttachments()},getJavaScript:function(){return this.transport.getJavaScript()},getOutline:function(){return this.transport.getOutline()},getMetadata:function(){return this.transport.getMetadata()},getData:function(){return this.transport.getData()},getDownloadInfo:function(){return this.transport.downloadInfoCapability.promise},getStats:function(){return this.transport.getStats()},cleanup:function(){this.transport.startCleanup()},destroy:function(){return this.loadingTask.destroy()}},a}(),X=function(){function a(a,b,c){this.pageIndex=a,this.pageInfo=b,this.transport=c,this.stats=new q,this.stats.enabled=L("enableStats"),this.commonObjs=c.commonObjs,this.objs=new $,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this.intentStates=Object.create(null),this.destroyed=!1}return a.prototype={get pageNumber(){return this.pageIndex+1},get rotate(){return this.pageInfo.rotate},get ref(){return this.pageInfo.ref},get userUnit(){return this.pageInfo.userUnit},get view(){return this.pageInfo.view},getViewport:function(a,b){return arguments.length<2&&(b=this.rotate),new o(this.view,a,b,0,0)},getAnnotations:function(a){var b=a&&a.intent||null;return this.annotationsPromise&&this.annotationsIntent===b||(this.annotationsPromise=this.transport.getAnnotations(this.pageIndex,b),this.annotationsIntent=b),this.annotationsPromise},render:function(a){function b(a){var b=g.renderTasks.indexOf(h);b>=0&&g.renderTasks.splice(b,1),j.cleanupAfterRender&&(j.pendingCleanup=!0),j._tryCleanup(),a?h.capability.reject(a):h.capability.resolve(),c.timeEnd("Rendering"),c.timeEnd("Overall")}var c=this.stats;c.time("Overall"),this.pendingCleanup=!1;var d="print"===a.intent?"print":"display",e=a.renderInteractiveForms===!0?!0:!1,f=a.canvasFactory||new M;this.intentStates[d]||(this.intentStates[d]=Object.create(null));var g=this.intentStates[d];g.displayReadyCapability||(g.receivingOperatorList=!0,g.displayReadyCapability=u(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this.stats.time("Page Request"),this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageNumber-1,intent:d,renderInteractiveForms:e}));var h=new aa(b,a,this.objs,this.commonObjs,g.operatorList,this.pageNumber,f);h.useRequestAnimationFrame="print"!==d,g.renderTasks||(g.renderTasks=[]),g.renderTasks.push(h);var i=h.task;a.continueCallback&&(w("render is used with continueCallback parameter"),i.onContinue=a.continueCallback);var j=this;return g.displayReadyCapability.promise.then(function(a){return j.pendingCleanup?void b():(c.time("Rendering"),h.initializeGraphics(a),void h.operatorListChanged())},function(a){b(a)}),i},getOperatorList:function(){function a(){if(d.operatorList.lastChunk){d.opListReadCapability.resolve(d.operatorList);var a=d.renderTasks.indexOf(c);a>=0&&d.renderTasks.splice(a,1)}}var b="oplist";this.intentStates[b]||(this.intentStates[b]=Object.create(null));var c,d=this.intentStates[b];return d.opListReadCapability||(c={},c.operatorListChanged=a,d.receivingOperatorList=!0,d.opListReadCapability=u(),d.renderTasks=[],d.renderTasks.push(c),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageIndex,intent:b})),d.opListReadCapability.promise},getTextContent:function(a){return this.transport.messageHandler.sendWithPromise("GetTextContent",{pageIndex:this.pageNumber-1,normalizeWhitespace:a&&a.normalizeWhitespace===!0?!0:!1,combineTextItems:a&&a.disableCombineTextItems===!0?!1:!0})},_destroy:function(){this.destroyed=!0,this.transport.pageCache[this.pageIndex]=null;var a=[];return Object.keys(this.intentStates).forEach(function(b){if("oplist"!==b){var c=this.intentStates[b];c.renderTasks.forEach(function(b){var c=b.capability.promise["catch"](function(){});a.push(c),b.cancel()})}},this),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(a)},destroy:function(){w("page destroy method, use cleanup() instead"),this.cleanup()},cleanup:function(){this.pendingCleanup=!0,this._tryCleanup()},_tryCleanup:function(){this.pendingCleanup&&!Object.keys(this.intentStates).some(function(a){var b=this.intentStates[a];return 0!==b.renderTasks.length||b.receivingOperatorList},this)&&(Object.keys(this.intentStates).forEach(function(a){delete this.intentStates[a]},this),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1)},_startRenderPage:function(a,b){var c=this.intentStates[b];c.displayReadyCapability&&c.displayReadyCapability.resolve(a)},_renderPageChunk:function(a,b){var c,d,e=this.intentStates[b];for(c=0,d=a.length;d>c;c++)e.operatorList.fnArray.push(a.fnArray[c]),e.operatorList.argsArray.push(a.argsArray[c]);for(e.operatorList.lastChunk=a.lastChunk,c=0;c<e.renderTasks.length;c++)e.renderTasks[c].operatorListChanged();a.lastChunk&&(e.receivingOperatorList=!1,this._tryCleanup())}},a}(),Y=function(){function a(){return"undefined"!=typeof f?f:L("workerSrc")?L("workerSrc"):Q?Q.replace(/\.js$/i,".worker.js"):void v("No PDFJS.workerSrc specified")}function b(){if(g)return g.promise;g=u();var b=R||function(b){t.loadScript(a(),function(){b(window.pdfjsDistBuildPdfWorker.WorkerMessageHandler)})};return b(g.resolve),g.promise}function c(a){this._listeners=[],this._defer=a,this._deferred=Promise.resolve(void 0)}function d(a){var b="importScripts('"+a+"');";return URL.createObjectURL(new Blob([b]))}function e(a){this.name=a,this.destroyed=!1,this._readyCapability=u(),this._port=null,this._webWorker=null,this._messageHandler=null,this._initialize()}var g,h=0;return c.prototype={postMessage:function(a,b){function c(a){if("object"!=typeof a||null===a)return a;if(d.has(a))return d.get(a);var e,f;if((f=a.buffer)&&B(f)){var g=b&&b.indexOf(f)>=0;return e=a===f?a:g?new a.constructor(f,a.byteOffset,a.byteLength):new a.constructor(a),d.set(a,e),e}e=A(a)?[]:{},d.set(a,e);for(var h in a){for(var i,j=a;!(i=Object.getOwnPropertyDescriptor(j,h));)j=Object.getPrototypeOf(j);"undefined"!=typeof i.value&&"function"!=typeof i.value&&(e[h]=c(i.value))}return e}if(!this._defer)return void this._listeners.forEach(function(b){b.call(this,{data:a})},this);var d=new WeakMap,e={data:c(a)};this._deferred.then(function(){this._listeners.forEach(function(a){a.call(this,e)},this)}.bind(this))},addEventListener:function(a,b){this._listeners.push(b)},removeEventListener:function(a,b){var c=this._listeners.indexOf(b);this._listeners.splice(c,1)},terminate:function(){this._listeners=[]}},e.prototype={get promise(){return this._readyCapability.promise},get port(){return this._port},get messageHandler(){return this._messageHandler},_initialize:function(){if(!O&&!L("disableWorker")&&"undefined"!=typeof Worker){var b=a();try{C(window.location.href,b)||(b=d(new URL(b,window.location).href));var c=new Worker(b),e=new m("main","worker",c),f=function(){c.removeEventListener("error",g),e.destroy(),c.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()}.bind(this),g=function(a){this._webWorker||f()}.bind(this);c.addEventListener("error",g),e.on("test",function(a){if(c.removeEventListener("error",g),this.destroyed)return void f();var b=a&&a.supportTypedArray;b?(this._messageHandler=e,this._port=c,this._webWorker=c,a.supportTransfers||(P=!0),this._readyCapability.resolve(),e.send("configure",{verbosity:x()})):(this._setupFakeWorker(),e.destroy(),c.terminate())}.bind(this)),e.on("console_log",function(a){console.log.apply(console,a)}),e.on("console_error",function(a){console.error.apply(console,a)}),e.on("ready",function(a){if(c.removeEventListener("error",g),this.destroyed)return void f();try{h()}catch(b){this._setupFakeWorker()}}.bind(this));var h=function(){var a=L("postMessageTransfers")&&!P,b=new Uint8Array([a?255:0]);try{e.send("test",b,[b.buffer])}catch(c){y("Cannot use postMessage transfers"),b[0]=0,e.send("test",b)}};return void h()}catch(i){y("The worker has been disabled.")}}this._setupFakeWorker()},_setupFakeWorker:function(){O||L("disableWorker")||(G("Setting up fake worker."),O=!0),b().then(function(a){if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));var b=Uint8Array!==Float32Array,d=new c(b);this._port=d;var e="fake"+h++,f=new m(e+"_worker",e,d);a.setup(f,d);var g=new m(e,e+"_worker",d);this._messageHandler=g,this._readyCapability.resolve()}.bind(this))},destroy:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}},e}(),Z=function(){function a(a,b,c){this.messageHandler=a,this.loadingTask=b,this.pdfDataRangeTransport=c,this.commonObjs=new $,this.fontLoader=new I(b.docId),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=u(),this.setupMessageHandler()}return a.prototype={destroy:function(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=u(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var a=[];this.pageCache.forEach(function(b){b&&a.push(b._destroy())}),this.pageCache=[],this.pagePromises=[];var b=this,c=this.messageHandler.sendWithPromise("Terminate",null);return a.push(c),Promise.all(a).then(function(){b.fontLoader.clear(),b.pdfDataRangeTransport&&(b.pdfDataRangeTransport.abort(),b.pdfDataRangeTransport=null),b.messageHandler&&(b.messageHandler.destroy(),b.messageHandler=null),b.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise},setupMessageHandler:function(){var a=this.messageHandler,b=this.loadingTask,c=this.pdfDataRangeTransport;c&&(c.addRangeListener(function(b,c){a.send("OnDataRange",{begin:b,chunk:c})}),c.addProgressListener(function(b){a.send("OnDataProgress",{loaded:b})}),c.addProgressiveReadListener(function(b){a.send("OnDataRange",{chunk:b})}),a.on("RequestDataRange",function(a){c.requestDataRange(a.begin,a.end)},this)),a.on("GetDoc",function(a){var b=a.pdfInfo;this.numPages=a.pdfInfo.numPages;var c=this.loadingTask,d=new W(b,this,c);this.pdfDocument=d,c._capability.resolve(d)},this),a.on("PasswordRequest",function(a){if(this._passwordCapability=u(),b.onPassword){var c=function(a){this._passwordCapability.resolve({password:a})}.bind(this);b.onPassword(c,a.code)}else this._passwordCapability.reject(new p(a.message,a.code));return this._passwordCapability.promise},this),a.on("PasswordException",function(a){b._capability.reject(new p(a.message,a.code))},this),a.on("InvalidPDF",function(a){this.loadingTask._capability.reject(new l(a.message))},this),a.on("MissingPDF",function(a){this.loadingTask._capability.reject(new n(a.message))},this),a.on("UnexpectedResponse",function(a){this.loadingTask._capability.reject(new r(a.message,a.status))},this),a.on("UnknownError",function(a){this.loadingTask._capability.reject(new s(a.message,a.details))},this),a.on("DataLoaded",function(a){this.downloadInfoCapability.resolve(a)},this),a.on("PDFManagerReady",function(a){this.pdfDataRangeTransport&&this.pdfDataRangeTransport.transportReady()},this),a.on("StartRenderPage",function(a){
if(!this.destroyed){var b=this.pageCache[a.pageIndex];b.stats.timeEnd("Page Request"),b._startRenderPage(a.transparency,a.intent)}},this),a.on("RenderPageChunk",function(a){if(!this.destroyed){var b=this.pageCache[a.pageIndex];b._renderPageChunk(a.operatorList,a.intent)}},this),a.on("commonobj",function(a){if(!this.destroyed){var b=a[0],c=a[1];if(!this.commonObjs.hasData(b))switch(c){case"Font":var d=a[2];if("error"in d){var e=d.error;G("Error during font loading: "+e),this.commonObjs.resolve(b,e);break}var f=null;L("pdfBug")&&F.FontInspector&&F.FontInspector.enabled&&(f={registerFont:function(a,b){F.FontInspector.fontAdded(a,b)}});var g=new H(d,{isEvalSuported:L("isEvalSupported"),disableFontFace:L("disableFontFace"),fontRegistry:f});this.fontLoader.bind([g],function(a){this.commonObjs.resolve(b,g)}.bind(this));break;case"FontPath":this.commonObjs.resolve(b,a[2]);break;default:v("Got unknown common object type "+c)}}},this),a.on("obj",function(a){if(!this.destroyed){var b,c=a[0],d=a[1],e=a[2],f=this.pageCache[d];if(!f.objs.hasData(c))switch(e){case"JpegStream":b=a[3],D(c,b,f.objs);break;case"Image":b=a[3],f.objs.resolve(c,b);var g=8e6;b&&"data"in b&&b.data.length>g&&(f.cleanupAfterRender=!0);break;default:v("Got unknown object type "+e)}}},this),a.on("DocProgress",function(a){if(!this.destroyed){var b=this.loadingTask;b.onProgress&&b.onProgress({loaded:a.loaded,total:a.total})}},this),a.on("PageError",function(a){if(!this.destroyed){var b=this.pageCache[a.pageNum-1],c=b.intentStates[a.intent];if(c.displayReadyCapability?c.displayReadyCapability.reject(a.error):v(a.error),c.operatorList){c.operatorList.lastChunk=!0;for(var d=0;d<c.renderTasks.length;d++)c.renderTasks[d].operatorListChanged()}}},this),a.on("UnsupportedFeature",function(a){if(!this.destroyed){var b=a.featureId,c=this.loadingTask;c.onUnsupportedFeature&&c.onUnsupportedFeature(b),ba.notify(b)}},this),a.on("JpegDecode",function(a){if(this.destroyed)return Promise.reject(new Error("Worker was destroyed"));if("undefined"==typeof document)return Promise.reject(new Error('"document" is not defined.'));var b=a[0],c=a[1];return 3!==c&&1!==c?Promise.reject(new Error("Only 3 components or 1 component can be returned")):new Promise(function(a,d){var e=new Image;e.onload=function(){var b=e.width,d=e.height,f=b*d,g=4*f,h=new Uint8Array(f*c),i=document.createElement("canvas");i.width=b,i.height=d;var j=i.getContext("2d");j.drawImage(e,0,0);var k,l,m=j.getImageData(0,0,b,d).data;if(3===c)for(k=0,l=0;g>k;k+=4,l+=3)h[l]=m[k],h[l+1]=m[k+1],h[l+2]=m[k+2];else if(1===c)for(k=0,l=0;g>k;k+=4,l++)h[l]=m[k];a({data:h,width:b,height:d})},e.onerror=function(){d(new Error("JpegDecode failed to load image"))},e.src=b})},this)},getData:function(){return this.messageHandler.sendWithPromise("GetData",null)},getPage:function(a,b){if(!z(a)||0>=a||a>this.numPages)return Promise.reject(new Error("Invalid page request"));var c=a-1;if(c in this.pagePromises)return this.pagePromises[c];var d=this.messageHandler.sendWithPromise("GetPage",{pageIndex:c}).then(function(a){if(this.destroyed)throw new Error("Transport destroyed");var b=new X(c,a,this);return this.pageCache[c]=b,b}.bind(this));return this.pagePromises[c]=d,d},getPageIndex:function(a){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:a})["catch"](function(a){return Promise.reject(new Error(a))})},getAnnotations:function(a,b){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:a,intent:b})},getDestinations:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)},getDestination:function(a){return this.messageHandler.sendWithPromise("GetDestination",{id:a})},getPageLabels:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)},getAttachments:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)},getJavaScript:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)},getOutline:function(){return this.messageHandler.sendWithPromise("GetOutline",null)},getMetadata:function(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(function(a){return{info:a[0],metadata:a[1]?new K(a[1]):null}})},getStats:function(){return this.messageHandler.sendWithPromise("GetStats",null)},startCleanup:function(){this.messageHandler.sendWithPromise("Cleanup",null).then(function(){for(var a=0,b=this.pageCache.length;b>a;a++){var c=this.pageCache[a];c&&c.cleanup()}this.commonObjs.clear(),this.fontLoader.clear()}.bind(this))}},a}(),$=function(){function a(){this.objs=Object.create(null)}return a.prototype={ensureObj:function(a){if(this.objs[a])return this.objs[a];var b={capability:u(),data:null,resolved:!1};return this.objs[a]=b,b},get:function(a,b){if(b)return this.ensureObj(a).capability.promise.then(b),null;var c=this.objs[a];return c&&c.resolved||v("Requesting object that isn't resolved yet "+a),c.data},resolve:function(a,b){var c=this.ensureObj(a);c.resolved=!0,c.data=b,c.capability.resolve(b)},isResolved:function(a){var b=this.objs;return b[a]?b[a].resolved:!1},hasData:function(a){return this.isResolved(a)},getData:function(a){var b=this.objs;return b[a]&&b[a].resolved?b[a].data:null},clear:function(){this.objs=Object.create(null)}},a}(),_=function(){function a(a){this._internalRenderTask=a,this.onContinue=null}return a.prototype={get promise(){return this._internalRenderTask.capability.promise},cancel:function(){this._internalRenderTask.cancel()},then:function(a,b){return this.promise.then.apply(this.promise,arguments)}},a}(),aa=function(){function a(a,b,c,d,e,f,g){this.callback=a,this.params=b,this.objs=c,this.commonObjs=d,this.operatorListIdx=null,this.operatorList=e,this.pageNumber=f,this.canvasFactory=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this.useRequestAnimationFrame=!1,this.cancelled=!1,this.capability=u(),this.task=new _(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this)}return a.prototype={initializeGraphics:function(a){if(!this.cancelled){L("pdfBug")&&F.StepperManager&&F.StepperManager.enabled&&(this.stepper=F.StepperManager.create(this.pageNumber-1),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var b=this.params;this.gfx=new J(b.canvasContext,this.commonObjs,this.objs,this.canvasFactory,b.imageLayer),this.gfx.beginDrawing(b.transform,b.viewport,a),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}},cancel:function(){this.running=!1,this.cancelled=!0,this.callback("cancelled")},operatorListChanged:function(){return this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),void(this.running||this._continue())):void(this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound))},_continue:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())},_scheduleNext:function(){this.useRequestAnimationFrame&&"undefined"!=typeof window?window.requestAnimationFrame(this._nextBound):Promise.resolve(void 0).then(this._nextBound)},_next:function(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this.callback())))}},a}(),ba=function(){var a=[];return{listen:function(b){w("Global UnsupportedManager.listen is used:  use PDFDocumentLoadingTask.onUnsupportedFeature instead"),a.push(b)},notify:function(b){for(var c=0,d=a.length;d>c;c++)a[c](b)}}}();b.version="1.7.294",b.build="8aad33e8",b.getDocument=d,b.PDFDataRangeTransport=V,b.PDFWorker=Y,b.PDFDocumentProxy=W,b.PDFPageProxy=X,b._UnsupportedManager=ba},function(a,b,c){"use strict";var d=c(0),e=d.FONT_IDENTITY_MATRIX,f=d.IDENTITY_MATRIX,g=d.ImageKind,h=d.OPS,i=d.Util,j=d.isNum,k=d.isArray,l=d.warn,m=d.createObjectURL,n={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},o=function(){function a(a,b,c){for(var d=-1,e=b;c>e;e++){var f=255&(d^a[e]),g=h[f];d=d>>>8^g}return-1^d}function b(b,c,d,e){var f=e,g=c.length;d[f]=g>>24&255,d[f+1]=g>>16&255,d[f+2]=g>>8&255,d[f+3]=255&g,f+=4,d[f]=255&b.charCodeAt(0),d[f+1]=255&b.charCodeAt(1),d[f+2]=255&b.charCodeAt(2),d[f+3]=255&b.charCodeAt(3),f+=4,d.set(c,f),f+=c.length;var h=a(d,e+4,f);d[f]=h>>24&255,d[f+1]=h>>16&255,d[f+2]=h>>8&255,d[f+3]=255&h}function c(a,b,c){for(var d=1,e=0,f=b;c>f;++f)d=(d+(255&a[f]))%65521,e=(e+d)%65521;return e<<16|d}function d(a,d,h){var i,j,k,l=a.width,n=a.height,o=a.data;switch(d){case g.GRAYSCALE_1BPP:j=0,i=1,k=l+7>>3;break;case g.RGB_24BPP:j=2,i=8,k=3*l;break;case g.RGBA_32BPP:j=6,i=8,k=4*l;break;default:throw new Error("invalid format")}var p,q,r=new Uint8Array((1+k)*n),s=0,t=0;for(p=0;n>p;++p)r[s++]=0,r.set(o.subarray(t,t+k),s),t+=k,s+=k;if(d===g.GRAYSCALE_1BPP)for(s=0,p=0;n>p;p++)for(s++,q=0;k>q;q++)r[s++]^=255;var u=new Uint8Array([l>>24&255,l>>16&255,l>>8&255,255&l,n>>24&255,n>>16&255,n>>8&255,255&n,i,j,0,0,0]),v=r.length,w=65535,x=Math.ceil(v/w),y=new Uint8Array(2+v+5*x+4),z=0;y[z++]=120,y[z++]=156;for(var A=0;v>w;)y[z++]=0,y[z++]=255,y[z++]=255,y[z++]=0,y[z++]=0,y.set(r.subarray(A,A+w),z),z+=w,A+=w,v-=w;y[z++]=1,y[z++]=255&v,y[z++]=v>>8&255,y[z++]=65535&~v&255,y[z++]=(65535&~v)>>8&255,y.set(r.subarray(A),z),z+=r.length-A;var B=c(r,0,r.length);y[z++]=B>>24&255,y[z++]=B>>16&255,y[z++]=B>>8&255,y[z++]=255&B;var C=e.length+3*f+u.length+y.length,D=new Uint8Array(C),E=0;return D.set(e,E),E+=e.length,b("IHDR",u,D,E),E+=f+u.length,b("IDATA",y,D,E),E+=f+y.length,b("IEND",new Uint8Array(0),D,E),m(D,"image/png",h)}for(var e=new Uint8Array([137,80,78,71,13,10,26,10]),f=12,h=new Int32Array(256),i=0;256>i;i++){for(var j=i,k=0;8>k;k++)j=1&j?3988292384^j>>1&2147483647:j>>1&2147483647;h[i]=j}return function(a,b){var c=void 0===a.kind?g.GRAYSCALE_1BPP:a.kind;return d(a,c,b)}}(),p=function(){function a(){this.fontSizeScale=1,this.fontWeight=n.fontWeight,this.fontSize=0,this.textMatrix=f,this.fontMatrix=e,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=n.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return a.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(a,b){this.x=a,this.y=b}},a}(),q=function(){function a(a){for(var b=[],c=[],d=a.length,e=0;d>e;e++)"save"!==a[e].fn?"restore"===a[e].fn?b=c.pop():b.push(a[e]):(b.push({fnId:92,fn:"group",items:[]}),c.push(b),b=b[b.length-1].items);return b}function b(a){if(a===(0|a))return a.toString();var b=a.toFixed(10),c=b.length-1;if("0"!==b[c])return b;do c--;while("0"===b[c]);return b.substr(0,"."===b[c]?c:c+1)}function c(a){if(0===a[4]&&0===a[5]){if(0===a[1]&&0===a[2])return 1===a[0]&&1===a[3]?"":"scale("+b(a[0])+" "+b(a[3])+")";if(a[0]===a[3]&&a[1]===-a[2]){var c=180*Math.acos(a[0])/Math.PI;return"rotate("+b(c)+")"}}else if(1===a[0]&&0===a[1]&&0===a[2]&&1===a[3])return"translate("+b(a[4])+" "+b(a[5])+")";return"matrix("+b(a[0])+" "+b(a[1])+" "+b(a[2])+" "+b(a[3])+" "+b(a[4])+" "+b(a[5])+")"}function d(a,b,c){this.current=new p,this.transformMatrix=f,this.transformStack=[],this.extraStack=[],this.commonObjs=a,this.objs=b,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!c}var g="http://www.w3.org/2000/svg",q="http://www.w3.org/XML/1998/namespace",r="http://www.w3.org/1999/xlink",s=["butt","round","square"],t=["miter","round","bevel"],u=0,v=0;return d.prototype={save:function(){this.transformStack.push(this.transformMatrix);var a=this.current;this.extraStack.push(a),this.current=a.clone()},restore:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.tgrp=null},group:function(a){this.save(),this.executeOpTree(a),this.restore()},loadDependencies:function(a){for(var b=a.fnArray,c=b.length,d=a.argsArray,e=this,f=0;c>f;f++)if(h.dependency===b[f])for(var g=d[f],i=0,j=g.length;j>i;i++){var k,l=g[i],m="g_"===l.substring(0,2);k=m?new Promise(function(a){e.commonObjs.get(l,a)}):new Promise(function(a){e.objs.get(l,a)}),this.current.dependencies.push(k)}return Promise.all(this.current.dependencies)},transform:function(a,b,c,d,e,f){var g=[a,b,c,d,e,f];this.transformMatrix=i.transform(this.transformMatrix,g),this.tgrp=null},getSVG:function(a,b){this.viewport=b;var c=this._initialize(b);return this.loadDependencies(a).then(function(){this.transformMatrix=f;var b=this.convertOpList(a);return this.executeOpTree(b),c}.bind(this))},convertOpList:function(b){var c=b.argsArray,d=b.fnArray,e=d.length,f=[],g=[];for(var i in h)f[h[i]]=i;for(var j=0;e>j;j++){var k=d[j];g.push({fnId:k,fn:f[k],args:c[j]})}return a(g)},executeOpTree:function(a){for(var b=a.length,c=0;b>c;c++){var d=a[c].fn,e=a[c].fnId,f=a[c].args;switch(0|e){case h.beginText:this.beginText();break;case h.setLeading:this.setLeading(f);break;case h.setLeadingMoveText:this.setLeadingMoveText(f[0],f[1]);break;case h.setFont:this.setFont(f);break;case h.showText:this.showText(f[0]);break;case h.showSpacedText:this.showText(f[0]);break;case h.endText:this.endText();break;case h.moveText:this.moveText(f[0],f[1]);break;case h.setCharSpacing:this.setCharSpacing(f[0]);break;case h.setWordSpacing:this.setWordSpacing(f[0]);break;case h.setHScale:this.setHScale(f[0]);break;case h.setTextMatrix:this.setTextMatrix(f[0],f[1],f[2],f[3],f[4],f[5]);break;case h.setLineWidth:this.setLineWidth(f[0]);break;case h.setLineJoin:this.setLineJoin(f[0]);break;case h.setLineCap:this.setLineCap(f[0]);break;case h.setMiterLimit:this.setMiterLimit(f[0]);break;case h.setFillRGBColor:this.setFillRGBColor(f[0],f[1],f[2]);break;case h.setStrokeRGBColor:this.setStrokeRGBColor(f[0],f[1],f[2]);break;case h.setDash:this.setDash(f[0],f[1]);break;case h.setGState:this.setGState(f[0]);break;case h.fill:this.fill();break;case h.eoFill:this.eoFill();break;case h.stroke:this.stroke();break;case h.fillStroke:this.fillStroke();break;case h.eoFillStroke:this.eoFillStroke();break;case h.clip:this.clip("nonzero");break;case h.eoClip:this.clip("evenodd");break;case h.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case h.paintJpegXObject:this.paintJpegXObject(f[0],f[1],f[2]);break;case h.paintImageXObject:this.paintImageXObject(f[0]);break;case h.paintInlineImageXObject:this.paintInlineImageXObject(f[0]);break;case h.paintImageMaskXObject:this.paintImageMaskXObject(f[0]);break;case h.paintFormXObjectBegin:this.paintFormXObjectBegin(f[0],f[1]);break;case h.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case h.closePath:this.closePath();break;case h.closeStroke:this.closeStroke();break;case h.closeFillStroke:this.closeFillStroke();break;case h.nextLine:this.nextLine();break;case h.transform:this.transform(f[0],f[1],f[2],f[3],f[4],f[5]);break;case h.constructPath:this.constructPath(f[0],f[1]);break;case h.endPath:this.endPath();break;case 92:this.group(a[c].items);break;default:l("Unimplemented operator "+d)}}},setWordSpacing:function(a){this.current.wordSpacing=a},setCharSpacing:function(a){this.current.charSpacing=a},nextLine:function(){this.moveText(0,this.current.leading)},setTextMatrix:function(a,c,d,e,f,h){var i=this.current;this.current.textMatrix=this.current.lineMatrix=[a,c,d,e,f,h],this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,i.xcoords=[],i.tspan=document.createElementNS(g,"svg:tspan"),i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",b(i.fontSize)+"px"),i.tspan.setAttributeNS(null,"y",b(-i.y)),i.txtElement=document.createElementNS(g,"svg:text"),i.txtElement.appendChild(i.tspan)},beginText:function(){this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.current.textMatrix=f,this.current.lineMatrix=f,this.current.tspan=document.createElementNS(g,"svg:tspan"),this.current.txtElement=document.createElementNS(g,"svg:text"),this.current.txtgrp=document.createElementNS(g,"svg:g"),this.current.xcoords=[]},moveText:function(a,c){var d=this.current;this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=c,d.xcoords=[],d.tspan=document.createElementNS(g,"svg:tspan"),d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",b(d.fontSize)+"px"),d.tspan.setAttributeNS(null,"y",b(-d.y))},showText:function(a){var d=this.current,e=d.font,f=d.fontSize;if(0!==f){var g,h=d.charSpacing,i=d.wordSpacing,k=d.fontDirection,l=d.textHScale*k,m=a.length,o=e.vertical,p=f*d.fontMatrix[0],r=0;for(g=0;m>g;++g){var s=a[g];if(null!==s)if(j(s))r+=-s*f*.001;else{d.xcoords.push(d.x+r*l);var t=s.width,u=s.fontChar,v=t*p+h*k;r+=v,d.tspan.textContent+=u}else r+=k*i}o?d.y-=r*l:d.x+=r*l,d.tspan.setAttributeNS(null,"x",d.xcoords.map(b).join(" ")),d.tspan.setAttributeNS(null,"y",b(-d.y)),d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",b(d.fontSize)+"px"),d.fontStyle!==n.fontStyle&&d.tspan.setAttributeNS(null,"font-style",d.fontStyle),d.fontWeight!==n.fontWeight&&d.tspan.setAttributeNS(null,"font-weight",d.fontWeight),d.fillColor!==n.fillColor&&d.tspan.setAttributeNS(null,"fill",d.fillColor),d.txtElement.setAttributeNS(null,"transform",c(d.textMatrix)+" scale(1, -1)"),d.txtElement.setAttributeNS(q,"xml:space","preserve"),d.txtElement.appendChild(d.tspan),d.txtgrp.appendChild(d.txtElement),this._ensureTransformGroup().appendChild(d.txtElement)}},setLeadingMoveText:function(a,b){this.setLeading(-b),this.moveText(a,b)},addFontStyle:function(a){this.cssStyle||(this.cssStyle=document.createElementNS(g,"svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var b=m(a.data,a.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'+a.loadedName+'"; src: url('+b+"); }\n"},setFont:function(a){var c=this.current,d=this.commonObjs.get(a[0]),f=a[1];this.current.font=d,this.embedFonts&&d.data&&!this.embeddedFonts[d.loadedName]&&(this.addFontStyle(d),this.embeddedFonts[d.loadedName]=d),c.fontMatrix=d.fontMatrix?d.fontMatrix:e;var h=d.black?d.bold?"bolder":"bold":d.bold?"bold":"normal",i=d.italic?"italic":"normal";0>f?(f=-f,c.fontDirection=-1):c.fontDirection=1,c.fontSize=f,c.fontFamily=d.loadedName,c.fontWeight=h,c.fontStyle=i,c.tspan=document.createElementNS(g,"svg:tspan"),c.tspan.setAttributeNS(null,"y",b(-c.y)),c.xcoords=[]},endText:function(){},setLineWidth:function(a){this.current.lineWidth=a},setLineCap:function(a){this.current.lineCap=s[a]},setLineJoin:function(a){this.current.lineJoin=t[a]},setMiterLimit:function(a){this.current.miterLimit=a},setStrokeRGBColor:function(a,b,c){var d=i.makeCssRgb(a,b,c);this.current.strokeColor=d},setFillRGBColor:function(a,b,c){var d=i.makeCssRgb(a,b,c);this.current.fillColor=d,this.current.tspan=document.createElementNS(g,"svg:tspan"),this.current.xcoords=[]},setDash:function(a,b){this.current.dashArray=a,this.current.dashPhase=b},constructPath:function(a,c){var d=this.current,e=d.x,f=d.y;d.path=document.createElementNS(g,"svg:path");for(var i=[],j=a.length,k=0,l=0;j>k;k++)switch(0|a[k]){case h.rectangle:e=c[l++],f=c[l++];var m=c[l++],n=c[l++],o=e+m,p=f+n;i.push("M",b(e),b(f),"L",b(o),b(f),"L",b(o),b(p),"L",b(e),b(p),"Z");break;case h.moveTo:e=c[l++],f=c[l++],i.push("M",b(e),b(f));break;case h.lineTo:e=c[l++],f=c[l++],i.push("L",b(e),b(f));break;case h.curveTo:e=c[l+4],f=c[l+5],i.push("C",b(c[l]),b(c[l+1]),b(c[l+2]),b(c[l+3]),b(e),b(f)),l+=6;break;case h.curveTo2:e=c[l+2],f=c[l+3],i.push("C",b(e),b(f),b(c[l]),b(c[l+1]),b(c[l+2]),b(c[l+3])),l+=4;break;case h.curveTo3:e=c[l+2],f=c[l+3],i.push("C",b(c[l]),b(c[l+1]),b(e),b(f),b(e),b(f)),l+=4;break;case h.closePath:i.push("Z")}d.path.setAttributeNS(null,"d",i.join(" ")),d.path.setAttributeNS(null,"stroke-miterlimit",b(d.miterLimit)),d.path.setAttributeNS(null,"stroke-linecap",d.lineCap),d.path.setAttributeNS(null,"stroke-linejoin",d.lineJoin),d.path.setAttributeNS(null,"stroke-width",b(d.lineWidth)+"px"),d.path.setAttributeNS(null,"stroke-dasharray",d.dashArray.map(b).join(" ")),d.path.setAttributeNS(null,"stroke-dashoffset",b(d.dashPhase)+"px"),d.path.setAttributeNS(null,"fill","none"),this._ensureTransformGroup().appendChild(d.path),d.element=d.path,d.setCurrentPoint(e,f)},endPath:function(){},clip:function(a){var b=this.current,d="clippath"+u;u++;var e=document.createElementNS(g,"svg:clipPath");e.setAttributeNS(null,"id",d),e.setAttributeNS(null,"transform",c(this.transformMatrix));var f=b.element.cloneNode();"evenodd"===a?f.setAttributeNS(null,"clip-rule","evenodd"):f.setAttributeNS(null,"clip-rule","nonzero"),e.appendChild(f),this.defs.appendChild(e),b.activeClipUrl&&(b.clipGroup=null,this.extraStack.forEach(function(a){a.clipGroup=null})),b.activeClipUrl="url(#"+d+")",this.tgrp=null},closePath:function(){var a=this.current,b=a.path.getAttributeNS(null,"d");b+="Z",a.path.setAttributeNS(null,"d",b)},setLeading:function(a){this.current.leading=-a},setTextRise:function(a){this.current.textRise=a},setHScale:function(a){this.current.textHScale=a/100},setGState:function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b],e=d[0],f=d[1];switch(e){case"LW":this.setLineWidth(f);break;case"LC":this.setLineCap(f);break;case"LJ":this.setLineJoin(f);break;case"ML":this.setMiterLimit(f);break;case"D":this.setDash(f[0],f[1]);break;case"Font":this.setFont(f);break;default:l("Unimplemented graphic state "+e)}}},fill:function(){var a=this.current;a.element.setAttributeNS(null,"fill",a.fillColor)},stroke:function(){var a=this.current;a.element.setAttributeNS(null,"stroke",a.strokeColor),a.element.setAttributeNS(null,"fill","none")},eoFill:function(){var a=this.current;a.element.setAttributeNS(null,"fill",a.fillColor),a.element.setAttributeNS(null,"fill-rule","evenodd")},fillStroke:function(){this.stroke(),this.fill()},eoFillStroke:function(){this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()},closeStroke:function(){this.closePath(),this.stroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},paintSolidColorImageMask:function(){var a=this.current,b=document.createElementNS(g,"svg:rect");b.setAttributeNS(null,"x","0"),b.setAttributeNS(null,"y","0"),b.setAttributeNS(null,"width","1px"),b.setAttributeNS(null,"height","1px"),b.setAttributeNS(null,"fill",a.fillColor),this._ensureTransformGroup().appendChild(b)},paintJpegXObject:function(a,c,d){var e=this.objs.get(a),f=document.createElementNS(g,"svg:image");f.setAttributeNS(r,"xlink:href",e.src),f.setAttributeNS(null,"width",e.width+"px"),f.setAttributeNS(null,"height",e.height+"px"),f.setAttributeNS(null,"x","0"),f.setAttributeNS(null,"y",b(-d)),f.setAttributeNS(null,"transform","scale("+b(1/c)+" "+b(-1/d)+")"),this._ensureTransformGroup().appendChild(f)},paintImageXObject:function(a){var b=this.objs.get(a);return b?void this.paintInlineImageXObject(b):void l("Dependent image isn't ready yet")},paintInlineImageXObject:function(a,c){var d=a.width,e=a.height,f=o(a,this.forceDataSchema),h=document.createElementNS(g,"svg:rect");h.setAttributeNS(null,"x","0"),h.setAttributeNS(null,"y","0"),h.setAttributeNS(null,"width",b(d)),h.setAttributeNS(null,"height",b(e)),this.current.element=h,this.clip("nonzero");var i=document.createElementNS(g,"svg:image");i.setAttributeNS(r,"xlink:href",f),i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y",b(-e)),i.setAttributeNS(null,"width",b(d)+"px"),i.setAttributeNS(null,"height",b(e)+"px"),i.setAttributeNS(null,"transform","scale("+b(1/d)+" "+b(-1/e)+")"),c?c.appendChild(i):this._ensureTransformGroup().appendChild(i)},paintImageMaskXObject:function(a){var c=this.current,d=a.width,e=a.height,f=c.fillColor;c.maskId="mask"+v++;var h=document.createElementNS(g,"svg:mask");h.setAttributeNS(null,"id",c.maskId);var i=document.createElementNS(g,"svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width",b(d)),i.setAttributeNS(null,"height",b(e)),i.setAttributeNS(null,"fill",f),i.setAttributeNS(null,"mask","url(#"+c.maskId+")"),this.defs.appendChild(h),this._ensureTransformGroup().appendChild(i),this.paintInlineImageXObject(a,h)},paintFormXObjectBegin:function(a,c){if(k(a)&&6===a.length&&this.transform(a[0],a[1],a[2],a[3],a[4],a[5]),k(c)&&4===c.length){var d=c[2]-c[0],e=c[3]-c[1],f=document.createElementNS(g,"svg:rect");f.setAttributeNS(null,"x",c[0]),f.setAttributeNS(null,"y",c[1]),f.setAttributeNS(null,"width",b(d)),f.setAttributeNS(null,"height",b(e)),this.current.element=f,this.clip("nonzero"),this.endPath()}},paintFormXObjectEnd:function(){},_initialize:function(a){var b=document.createElementNS(g,"svg:svg");b.setAttributeNS(null,"version","1.1"),b.setAttributeNS(null,"width",a.width+"px"),b.setAttributeNS(null,"height",a.height+"px"),b.setAttributeNS(null,"preserveAspectRatio","none"),b.setAttributeNS(null,"viewBox","0 0 "+a.width+" "+a.height);var d=document.createElementNS(g,"svg:defs");b.appendChild(d),this.defs=d;var e=document.createElementNS(g,"svg:g");return e.setAttributeNS(null,"transform",c(a.transform)),b.appendChild(e),this.svg=e,b},_ensureClipGroup:function(){if(!this.current.clipGroup){var a=document.createElementNS(g,"svg:g");a.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(a),this.current.clipGroup=a}return this.current.clipGroup},_ensureTransformGroup:function(){return this.tgrp||(this.tgrp=document.createElementNS(g,"svg:g"),this.tgrp.setAttributeNS(null,"transform",c(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}},d}();b.SVGGraphics=q},function(a,b,c){"use strict";var d=c(0),e=c(1),f=d.Util,g=d.createPromiseCapability,h=e.CustomStyle,i=e.getDefaultSetting,j=function(){function a(a){return!n.test(a)}function b(b,c,d){var e=document.createElement("div"),g={style:null,angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(b._textDivs.push(e),a(c.str))return g.isWhitespace=!0,void b._textDivProperties.set(e,g);var h=f.transform(b._viewport.transform,c.transform),j=Math.atan2(h[1],h[0]),k=d[c.fontName];k.vertical&&(j+=Math.PI/2);var l=Math.sqrt(h[2]*h[2]+h[3]*h[3]),m=l;k.ascent?m=k.ascent*m:k.descent&&(m=(1+k.descent)*m);var n,p;if(0===j?(n=h[4],p=h[5]-m):(n=h[4]+m*Math.sin(j),p=h[5]-m*Math.cos(j)),o[1]=n,o[3]=p,o[5]=l,o[7]=k.fontFamily,g.style=o.join(""),e.setAttribute("style",g.style),e.textContent=c.str,i("pdfBug")&&(e.dataset.fontName=c.fontName),0!==j&&(g.angle=j*(180/Math.PI)),c.str.length>1&&(k.vertical?g.canvasWidth=c.height*b._viewport.scale:g.canvasWidth=c.width*b._viewport.scale),b._textDivProperties.set(e,g),b._enhanceTextSelection){var q=1,r=0;0!==j&&(q=Math.cos(j),r=Math.sin(j));var s,t,u=(k.vertical?c.height:c.width)*b._viewport.scale,v=l;0!==j?(s=[q,r,-r,q,n,p],t=f.getAxialAlignedBoundingBox([0,0,u,v],s)):t=[n,p,n+u,p+v],b._bounds.push({left:t[0],top:t[1],right:t[2],bottom:t[3],div:e,size:[u,v],m:s})}}function c(a){if(!a._canceled){var b=a._container,c=a._textDivs,d=a._capability,e=c.length;if(e>m)return a._renderingDone=!0,void d.resolve();var f=document.createElement("canvas");f.mozOpaque=!0;for(var g,i,j=f.getContext("2d",{alpha:!1}),k=0;e>k;k++){var l=c[k],n=a._textDivProperties.get(l);if(!n.isWhitespace){var o=l.style.fontSize,p=l.style.fontFamily;(o!==g||p!==i)&&(j.font=o+" "+p,g=o,i=p);var q=j.measureText(l.textContent).width;b.appendChild(l);var r="";0!==n.canvasWidth&&q>0&&(n.scale=n.canvasWidth/q,r="scaleX("+n.scale+")"),0!==n.angle&&(r="rotate("+n.angle+"deg) "+r),""!==r&&(n.originalTransform=r,h.setProp("transform",l,r)),a._textDivProperties.set(l,n)}}a._renderingDone=!0,d.resolve()}}function d(a){for(var b=a._bounds,c=a._viewport,d=e(c.width,c.height,b),g=0;g<d.length;g++){var h=b[g].div,i=a._textDivProperties.get(h);if(0!==i.angle){var j=d[g],k=b[g],l=k.m,m=l[0],n=l[1],o=[[0,0],[0,k.size[1]],[k.size[0],0],k.size],p=new Float64Array(64);o.forEach(function(a,b){var c=f.applyTransform(a,l);p[b+0]=m&&(j.left-c[0])/m,p[b+4]=n&&(j.top-c[1])/n,p[b+8]=m&&(j.right-c[0])/m,p[b+12]=n&&(j.bottom-c[1])/n,p[b+16]=n&&(j.left-c[0])/-n,p[b+20]=m&&(j.top-c[1])/m,p[b+24]=n&&(j.right-c[0])/-n,p[b+28]=m&&(j.bottom-c[1])/m,p[b+32]=m&&(j.left-c[0])/-m,p[b+36]=n&&(j.top-c[1])/-n,p[b+40]=m&&(j.right-c[0])/-m,p[b+44]=n&&(j.bottom-c[1])/-n,p[b+48]=n&&(j.left-c[0])/n,p[b+52]=m&&(j.top-c[1])/-m,p[b+56]=n&&(j.right-c[0])/n,p[b+60]=m&&(j.bottom-c[1])/-m});var q=function(a,b,c){for(var d=0,e=0;c>e;e++){var f=a[b++];f>0&&(d=d?Math.min(f,d):f)}return d},r=1+Math.min(Math.abs(m),Math.abs(n));i.paddingLeft=q(p,32,16)/r,i.paddingTop=q(p,48,16)/r,i.paddingRight=q(p,0,16)/r,i.paddingBottom=q(p,16,16)/r,a._textDivProperties.set(h,i)}else i.paddingLeft=b[g].left-d[g].left,i.paddingTop=b[g].top-d[g].top,i.paddingRight=d[g].right-b[g].right,i.paddingBottom=d[g].bottom-b[g].bottom,a._textDivProperties.set(h,i)}}function e(a,b,c){var d=c.map(function(a,b){return{x1:a.left,y1:a.top,x2:a.right,y2:a.bottom,index:b,x1New:void 0,x2New:void 0}});j(a,d);var e=new Array(c.length);return d.forEach(function(a){var b=a.index;e[b]={left:a.x1New,top:0,right:a.x2New,bottom:0}}),c.map(function(b,c){var f=e[c],g=d[c];g.x1=b.top,g.y1=a-f.right,g.x2=b.bottom,g.y2=a-f.left,g.index=c,g.x1New=void 0,g.x2New=void 0}),j(b,d),d.forEach(function(a){var b=a.index;e[b].top=a.x1New,e[b].bottom=a.x2New}),e}function j(a,b){b.sort(function(a,b){return a.x1-b.x1||a.index-b.index});var c={x1:-(1/0),y1:-(1/0),x2:0,y2:1/0,index:-1,x1New:0,x2New:0},d=[{start:-(1/0),end:1/0,boundary:c}];b.forEach(function(a){for(var b=0;b<d.length&&d[b].end<=a.y1;)b++;for(var c=d.length-1;c>=0&&d[c].start>=a.y2;)c--;var e,f,g,h,i=-(1/0);for(g=b;c>=g;g++){e=d[g],f=e.boundary;var j;j=f.x2>a.x1?f.index>a.index?f.x1New:a.x1:void 0===f.x2New?(f.x2+a.x1)/2:f.x2New,j>i&&(i=j)}for(a.x1New=i,g=b;c>=g;g++)e=d[g],f=e.boundary,void 0===f.x2New?f.x2>a.x1?f.index>a.index&&(f.x2New=f.x2):f.x2New=i:f.x2New>i&&(f.x2New=Math.max(i,f.x2));var k=[],l=null;for(g=b;c>=g;g++){e=d[g],f=e.boundary;var m=f.x2>a.x2?f:a;l===m?k[k.length-1].end=e.end:(k.push({start:e.start,end:e.end,boundary:m}),l=m)}for(d[b].start<a.y1&&(k[0].start=a.y1,k.unshift({start:d[b].start,end:a.y1,boundary:d[b].boundary})),a.y2<d[c].end&&(k[k.length-1].end=a.y2,k.push({start:a.y2,end:d[c].end,boundary:d[c].boundary})),g=b;c>=g;g++)if(e=d[g],f=e.boundary,void 0===f.x2New){var n=!1;for(h=b-1;!n&&h>=0&&d[h].start>=f.y1;h--)n=d[h].boundary===f;for(h=c+1;!n&&h<d.length&&d[h].end<=f.y2;h++)n=d[h].boundary===f;for(h=0;!n&&h<k.length;h++)n=k[h].boundary===f;n||(f.x2New=i)}Array.prototype.splice.apply(d,[b,c-b+1].concat(k))}),d.forEach(function(b){var c=b.boundary;void 0===c.x2New&&(c.x2New=Math.max(a,c.x2))})}function k(a,b,c,d,e){this._textContent=a,this._container=b,this._viewport=c,this._textDivs=d||[],this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=g(),this._renderTimer=null,this._bounds=[],this._enhanceTextSelection=!!e}function l(a){var b=new k(a.textContent,a.container,a.viewport,a.textDivs,a.enhanceTextSelection);return b._render(a.timeout),b}var m=1e5,n=/\S/,o=["left: ",0,"px; top: ",0,"px; font-size: ",0,"px; font-family: ","",";"];return k.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0,null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject("canceled")},_render:function(a){for(var d=this._textContent.items,e=this._textContent.styles,f=0,g=d.length;g>f;f++)b(this,d[f],e);if(a){var h=this;this._renderTimer=setTimeout(function(){c(h),h._renderTimer=null;
},a)}else c(this)},expandTextDivs:function(a){if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(d(this),this._bounds=null);for(var b=0,c=this._textDivs.length;c>b;b++){var e=this._textDivs[b],f=this._textDivProperties.get(e);if(!f.isWhitespace)if(a){var g="",i="";1!==f.scale&&(g="scaleX("+f.scale+")"),0!==f.angle&&(g="rotate("+f.angle+"deg) "+g),0!==f.paddingLeft&&(i+=" padding-left: "+f.paddingLeft/f.scale+"px;",g+=" translateX("+-f.paddingLeft/f.scale+"px)"),0!==f.paddingTop&&(i+=" padding-top: "+f.paddingTop+"px;",g+=" translateY("+-f.paddingTop+"px)"),0!==f.paddingRight&&(i+=" padding-right: "+f.paddingRight/f.scale+"px;"),0!==f.paddingBottom&&(i+=" padding-bottom: "+f.paddingBottom+"px;"),""!==i&&e.setAttribute("style",f.style+i),""!==g&&h.setProp("transform",e,g)}else e.style.padding=0,h.setProp("transform",e,f.originalTransform||"")}}}},l}();b.renderTextLayer=j},function(a,b,c){"use strict";function d(a){return a.replace(/>\\376\\377([^<]+)/g,function(a,b){for(var c=b.replace(/\\([0-3])([0-7])([0-7])/g,function(a,b,c,d){return String.fromCharCode(64*b+8*c+1*d)}),d="",e=0;e<c.length;e+=2){var f=256*c.charCodeAt(e)+c.charCodeAt(e+1);d+=f>=32&&127>f&&60!==f&&62!==f&&38!==f?String.fromCharCode(f):"&#x"+(65536+f).toString(16).substring(1)+";"}return">"+d})}function e(a){if("string"==typeof a){a=d(a);var b=new DOMParser;a=b.parseFromString(a,"application/xml")}else a instanceof Document||g("Metadata: Invalid metadata object");this.metaDocument=a,this.metadata=Object.create(null),this.parse()}var f=c(0),g=f.error;e.prototype={parse:function(){var a=this.metaDocument,b=a.documentElement;if("rdf:rdf"!==b.nodeName.toLowerCase())for(b=b.firstChild;b&&"rdf:rdf"!==b.nodeName.toLowerCase();)b=b.nextSibling;var c=b?b.nodeName.toLowerCase():null;if(b&&"rdf:rdf"===c&&b.hasChildNodes()){var d,e,f,g,h,i,j,k=b.childNodes;for(g=0,i=k.length;i>g;g++)if(d=k[g],"rdf:description"===d.nodeName.toLowerCase())for(h=0,j=d.childNodes.length;j>h;h++)"#text"!==d.childNodes[h].nodeName.toLowerCase()&&(e=d.childNodes[h],f=e.nodeName.toLowerCase(),this.metadata[f]=e.textContent.trim())}},get:function(a){return this.metadata[a]||null},has:function(a){return"undefined"!=typeof this.metadata[a]}},b.Metadata=e},function(a,b,c){"use strict";var d=c(0),e=c(1),f=d.shadow,g=e.getDefaultSetting,h=function(){function a(a,b,c){var d=a.createShader(c);a.shaderSource(d,b),a.compileShader(d);var e=a.getShaderParameter(d,a.COMPILE_STATUS);if(!e){var f=a.getShaderInfoLog(d);throw new Error("Error during shader compilation: "+f)}return d}function b(b,c){return a(b,c,b.VERTEX_SHADER)}function c(b,c){return a(b,c,b.FRAGMENT_SHADER)}function d(a,b){for(var c=a.createProgram(),d=0,e=b.length;e>d;++d)a.attachShader(c,b[d]);a.linkProgram(c);var f=a.getProgramParameter(c,a.LINK_STATUS);if(!f){var g=a.getProgramInfoLog(c);throw new Error("Error during program linking: "+g)}return c}function e(a,b,c){a.activeTexture(c);var d=a.createTexture();return a.bindTexture(a.TEXTURE_2D,d),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b),d}function h(){n||(o=document.createElement("canvas"),n=o.getContext("webgl",{premultipliedalpha:!1}))}function i(){var a,e;h(),a=o,o=null,e=n,n=null;var f=b(e,p),g=c(e,q),i=d(e,[f,g]);e.useProgram(i);var j={};j.gl=e,j.canvas=a,j.resolutionLocation=e.getUniformLocation(i,"u_resolution"),j.positionLocation=e.getAttribLocation(i,"a_position"),j.backdropLocation=e.getUniformLocation(i,"u_backdrop"),j.subtypeLocation=e.getUniformLocation(i,"u_subtype");var k=e.getAttribLocation(i,"a_texCoord"),l=e.getUniformLocation(i,"u_image"),m=e.getUniformLocation(i,"u_mask"),s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(k),e.vertexAttribPointer(k,2,e.FLOAT,!1,0,0),e.uniform1i(l,0),e.uniform1i(m,1),r=j}function j(a,b,c){var d=a.width,f=a.height;r||i();var g=r,h=g.canvas,j=g.gl;h.width=d,h.height=f,j.viewport(0,0,j.drawingBufferWidth,j.drawingBufferHeight),j.uniform2f(g.resolutionLocation,d,f),c.backdrop?j.uniform4f(g.resolutionLocation,c.backdrop[0],c.backdrop[1],c.backdrop[2],1):j.uniform4f(g.resolutionLocation,0,0,0,0),j.uniform1i(g.subtypeLocation,"Luminosity"===c.subtype?1:0);var k=e(j,a,j.TEXTURE0),l=e(j,b,j.TEXTURE1),m=j.createBuffer();return j.bindBuffer(j.ARRAY_BUFFER,m),j.bufferData(j.ARRAY_BUFFER,new Float32Array([0,0,d,0,0,f,0,f,d,0,d,f]),j.STATIC_DRAW),j.enableVertexAttribArray(g.positionLocation),j.vertexAttribPointer(g.positionLocation,2,j.FLOAT,!1,0,0),j.clearColor(0,0,0,0),j.enable(j.BLEND),j.blendFunc(j.ONE,j.ONE_MINUS_SRC_ALPHA),j.clear(j.COLOR_BUFFER_BIT),j.drawArrays(j.TRIANGLES,0,6),j.flush(),j.deleteTexture(k),j.deleteTexture(l),j.deleteBuffer(m),h}function k(){var a,e;h(),a=o,o=null,e=n,n=null;var f=b(e,s),g=c(e,t),i=d(e,[f,g]);e.useProgram(i);var j={};j.gl=e,j.canvas=a,j.resolutionLocation=e.getUniformLocation(i,"u_resolution"),j.scaleLocation=e.getUniformLocation(i,"u_scale"),j.offsetLocation=e.getUniformLocation(i,"u_offset"),j.positionLocation=e.getAttribLocation(i,"a_position"),j.colorLocation=e.getAttribLocation(i,"a_color"),u=j}function l(a,b,c,d,e){u||k();var f=u,g=f.canvas,h=f.gl;g.width=a,g.height=b,h.viewport(0,0,h.drawingBufferWidth,h.drawingBufferHeight),h.uniform2f(f.resolutionLocation,a,b);var i,j,l,m=0;for(i=0,j=d.length;j>i;i++)switch(d[i].type){case"lattice":l=d[i].coords.length/d[i].verticesPerRow|0,m+=(l-1)*(d[i].verticesPerRow-1)*6;break;case"triangles":m+=d[i].coords.length}var n=new Float32Array(2*m),o=new Uint8Array(3*m),p=e.coords,q=e.colors,r=0,s=0;for(i=0,j=d.length;j>i;i++){var t=d[i],v=t.coords,w=t.colors;switch(t.type){case"lattice":var x=t.verticesPerRow;l=v.length/x|0;for(var y=1;l>y;y++)for(var z=y*x+1,A=1;x>A;A++,z++)n[r]=p[v[z-x-1]],n[r+1]=p[v[z-x-1]+1],n[r+2]=p[v[z-x]],n[r+3]=p[v[z-x]+1],n[r+4]=p[v[z-1]],n[r+5]=p[v[z-1]+1],o[s]=q[w[z-x-1]],o[s+1]=q[w[z-x-1]+1],o[s+2]=q[w[z-x-1]+2],o[s+3]=q[w[z-x]],o[s+4]=q[w[z-x]+1],o[s+5]=q[w[z-x]+2],o[s+6]=q[w[z-1]],o[s+7]=q[w[z-1]+1],o[s+8]=q[w[z-1]+2],n[r+6]=n[r+2],n[r+7]=n[r+3],n[r+8]=n[r+4],n[r+9]=n[r+5],n[r+10]=p[v[z]],n[r+11]=p[v[z]+1],o[s+9]=o[s+3],o[s+10]=o[s+4],o[s+11]=o[s+5],o[s+12]=o[s+6],o[s+13]=o[s+7],o[s+14]=o[s+8],o[s+15]=q[w[z]],o[s+16]=q[w[z]+1],o[s+17]=q[w[z]+2],r+=12,s+=18;break;case"triangles":for(var B=0,C=v.length;C>B;B++)n[r]=p[v[B]],n[r+1]=p[v[B]+1],o[s]=q[w[B]],o[s+1]=q[w[B]+1],o[s+2]=q[w[B]+2],r+=2,s+=3}}c?h.clearColor(c[0]/255,c[1]/255,c[2]/255,1):h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT);var D=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,D),h.bufferData(h.ARRAY_BUFFER,n,h.STATIC_DRAW),h.enableVertexAttribArray(f.positionLocation),h.vertexAttribPointer(f.positionLocation,2,h.FLOAT,!1,0,0);var E=h.createBuffer();return h.bindBuffer(h.ARRAY_BUFFER,E),h.bufferData(h.ARRAY_BUFFER,o,h.STATIC_DRAW),h.enableVertexAttribArray(f.colorLocation),h.vertexAttribPointer(f.colorLocation,3,h.UNSIGNED_BYTE,!1,0,0),h.uniform2f(f.scaleLocation,e.scaleX,e.scaleY),h.uniform2f(f.offsetLocation,e.offsetX,e.offsetY),h.drawArrays(h.TRIANGLES,0,m),h.flush(),h.deleteBuffer(D),h.deleteBuffer(E),g}function m(){r&&r.canvas&&(r.canvas.width=0,r.canvas.height=0),u&&u.canvas&&(u.canvas.width=0,u.canvas.height=0),r=null,u=null}var n,o,p="  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",q="  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",r=null,s="  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",t="  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ",u=null;return{get isEnabled(){if(g("disableWebGL"))return!1;var a=!1;try{h(),a=!!n}catch(b){}return f(this,"isEnabled",a)},composeSMask:j,drawFigures:l,clear:m}}();b.WebGLUtils=h},function(a,b,c){"use strict";var d=c(0),e=c(1),f=c(3),g=c(2),h=c(5),i=c(6),j=c(4),k=d.globalScope,l=d.deprecated,m=d.warn,n=e.LinkTarget,o=e.DEFAULT_LINK_REL,p="undefined"==typeof window;k.PDFJS||(k.PDFJS={});var q=k.PDFJS;q.version="1.7.294",q.build="8aad33e8",q.pdfBug=!1,void 0!==q.verbosity&&d.setVerbosityLevel(q.verbosity),delete q.verbosity,Object.defineProperty(q,"verbosity",{get:function(){return d.getVerbosityLevel()},set:function(a){d.setVerbosityLevel(a)},enumerable:!0,configurable:!0}),q.VERBOSITY_LEVELS=d.VERBOSITY_LEVELS,q.OPS=d.OPS,q.UNSUPPORTED_FEATURES=d.UNSUPPORTED_FEATURES,q.isValidUrl=e.isValidUrl,q.shadow=d.shadow,q.createBlob=d.createBlob,q.createObjectURL=function(a,b){return d.createObjectURL(a,b,q.disableCreateObjectURL)},Object.defineProperty(q,"isLittleEndian",{configurable:!0,get:function(){var a=d.isLittleEndian();return d.shadow(q,"isLittleEndian",a)}}),q.removeNullCharacters=d.removeNullCharacters,q.PasswordResponses=d.PasswordResponses,q.PasswordException=d.PasswordException,q.UnknownErrorException=d.UnknownErrorException,q.InvalidPDFException=d.InvalidPDFException,q.MissingPDFException=d.MissingPDFException,q.UnexpectedResponseException=d.UnexpectedResponseException,q.Util=d.Util,q.PageViewport=d.PageViewport,q.createPromiseCapability=d.createPromiseCapability,q.maxImageSize=void 0===q.maxImageSize?-1:q.maxImageSize,q.cMapUrl=void 0===q.cMapUrl?null:q.cMapUrl,q.cMapPacked=void 0===q.cMapPacked?!1:q.cMapPacked,q.disableFontFace=void 0===q.disableFontFace?!1:q.disableFontFace,q.imageResourcesPath=void 0===q.imageResourcesPath?"":q.imageResourcesPath,q.disableWorker=void 0===q.disableWorker?!1:q.disableWorker,q.workerSrc=void 0===q.workerSrc?null:q.workerSrc,q.disableRange=void 0===q.disableRange?!1:q.disableRange,q.disableStream=void 0===q.disableStream?!1:q.disableStream,q.disableAutoFetch=void 0===q.disableAutoFetch?!1:q.disableAutoFetch,q.pdfBug=void 0===q.pdfBug?!1:q.pdfBug,q.postMessageTransfers=void 0===q.postMessageTransfers?!0:q.postMessageTransfers,q.disableCreateObjectURL=void 0===q.disableCreateObjectURL?!1:q.disableCreateObjectURL,q.disableWebGL=void 0===q.disableWebGL?!0:q.disableWebGL,q.externalLinkTarget=void 0===q.externalLinkTarget?n.NONE:q.externalLinkTarget,q.externalLinkRel=void 0===q.externalLinkRel?o:q.externalLinkRel,q.isEvalSupported=void 0===q.isEvalSupported?!0:q.isEvalSupported;var r=q.openExternalLinksInNewWindow;delete q.openExternalLinksInNewWindow,Object.defineProperty(q,"openExternalLinksInNewWindow",{get:function(){return q.externalLinkTarget===n.BLANK},set:function(a){return a&&l('PDFJS.openExternalLinksInNewWindow, please use "PDFJS.externalLinkTarget = PDFJS.LinkTarget.BLANK" instead.'),q.externalLinkTarget!==n.NONE?void m("PDFJS.externalLinkTarget is already initialized"):void(q.externalLinkTarget=a?n.BLANK:n.NONE)},enumerable:!0,configurable:!0}),r&&(q.openExternalLinksInNewWindow=r),q.getDocument=f.getDocument,q.PDFDataRangeTransport=f.PDFDataRangeTransport,q.PDFWorker=f.PDFWorker,Object.defineProperty(q,"hasCanvasTypedArrays",{configurable:!0,get:function(){var a=e.hasCanvasTypedArrays();return d.shadow(q,"hasCanvasTypedArrays",a)}}),q.CustomStyle=e.CustomStyle,q.LinkTarget=n,q.addLinkAttributes=e.addLinkAttributes,q.getFilenameFromUrl=e.getFilenameFromUrl,q.isExternalLinkTargetSet=e.isExternalLinkTargetSet,q.AnnotationLayer=g.AnnotationLayer,q.renderTextLayer=h.renderTextLayer,q.Metadata=i.Metadata,q.SVGGraphics=j.SVGGraphics,q.UnsupportedManager=f._UnsupportedManager,b.globalScope=k,b.isWorker=p,b.PDFJS=k.PDFJS},function(a,b){var c;c=function(){return this}();try{c=c||Function("return this")()||(1,eval)("this")}catch(d){"object"==typeof window&&(c=window)}a.exports=c},function(a,b,c){"use strict";function d(a){a.mozCurrentTransform||(a._originalSave=a.save,a._originalRestore=a.restore,a._originalRotate=a.rotate,a._originalScale=a.scale,a._originalTranslate=a.translate,a._originalTransform=a.transform,a._originalSetTransform=a.setTransform,a._transformMatrix=a._transformMatrix||[1,0,0,1,0,0],a._transformStack=[],Object.defineProperty(a,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(a,"mozCurrentTransformInverse",{get:function(){var a=this._transformMatrix,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=b*e-c*d,i=c*d-b*e;return[e/h,c/i,d/i,b/h,(e*f-d*g)/i,(c*f-b*g)/h]}}),a.save=function(){var a=this._transformMatrix;this._transformStack.push(a),this._transformMatrix=a.slice(0,6),this._originalSave()},a.restore=function(){var a=this._transformStack.pop();a&&(this._transformMatrix=a,this._originalRestore())},a.translate=function(a,b){var c=this._transformMatrix;c[4]=c[0]*a+c[2]*b+c[4],c[5]=c[1]*a+c[3]*b+c[5],this._originalTranslate(a,b)},a.scale=function(a,b){var c=this._transformMatrix;c[0]=c[0]*a,c[1]=c[1]*a,c[2]=c[2]*b,c[3]=c[3]*b,this._originalScale(a,b)},a.transform=function(b,c,d,e,f,g){var h=this._transformMatrix;this._transformMatrix=[h[0]*b+h[2]*c,h[1]*b+h[3]*c,h[0]*d+h[2]*e,h[1]*d+h[3]*e,h[0]*f+h[2]*g+h[4],h[1]*f+h[3]*g+h[5]],a._originalTransform(b,c,d,e,f,g)},a.setTransform=function(b,c,d,e,f,g){this._transformMatrix=[b,c,d,e,f,g],a._originalSetTransform(b,c,d,e,f,g)},a.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this._transformMatrix;this._transformMatrix=[d[0]*b+d[2]*c,d[1]*b+d[3]*c,d[0]*-c+d[2]*b,d[1]*-c+d[3]*b,d[4],d[5]],this._originalRotate(a)})}function e(a){var b,c,d,e,f=1e3,g=a.width,h=a.height,i=g+1,j=new Uint8Array(i*(h+1)),k=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),l=g+7&-8,m=a.data,n=new Uint8Array(l*h),o=0;for(b=0,e=m.length;e>b;b++)for(var p=128,q=m[b];p>0;)n[o++]=q&p?0:255,p>>=1;var r=0;for(o=0,0!==n[o]&&(j[0]=1,++r),c=1;g>c;c++)n[o]!==n[o+1]&&(j[c]=n[o]?2:1,++r),o++;for(0!==n[o]&&(j[c]=2,++r),b=1;h>b;b++){o=b*l,d=b*i,n[o-l]!==n[o]&&(j[d]=n[o]?1:8,++r);var s=(n[o]?4:0)+(n[o-l]?8:0);for(c=1;g>c;c++)s=(s>>2)+(n[o+1]?4:0)+(n[o-l+1]?8:0),k[s]&&(j[d+c]=k[s],++r),o++;if(n[o-l]!==n[o]&&(j[d+c]=n[o]?2:4,++r),r>f)return null}for(o=l*(h-1),d=b*i,0!==n[o]&&(j[d]=8,++r),c=1;g>c;c++)n[o]!==n[o+1]&&(j[d+c]=n[o]?4:8,++r),o++;if(0!==n[o]&&(j[d+c]=4,++r),r>f)return null;var t=new Int32Array([0,i,-1,0,-i,0,0,0,1]),u=[];for(b=0;r&&h>=b;b++){for(var v=b*i,w=v+g;w>v&&!j[v];)v++;if(v!==w){var x,y=[v%i,b],z=j[v],A=v;do{var B=t[z];do v+=B;while(!j[v]);x=j[v],5!==x&&10!==x?(z=x,j[v]=0):(z=x&51*z>>4,j[v]&=z>>2|z<<2),y.push(v%i),y.push(v/i|0),--r}while(A!==v);u.push(y),--b}}var C=function(a){a.save(),a.scale(1/g,-1/h),a.translate(0,-h),a.beginPath();for(var b=0,c=u.length;c>b;b++){var d=u[b];a.moveTo(d[0],d[1]);for(var e=2,f=d.length;f>e;e+=2)a.lineTo(d[e],d[e+1])}a.fill(),a.beginPath(),a.restore()};return C}var f=c(0),g=c(1),h=c(12),i=c(7),j=f.FONT_IDENTITY_MATRIX,k=f.IDENTITY_MATRIX,l=f.ImageKind,m=f.OPS,n=f.TextRenderingMode,o=f.Uint32ArrayView,p=f.Util,q=f.assert,r=f.info,s=f.isNum,t=f.isArray,u=f.isLittleEndian,v=f.error,w=f.shadow,x=f.warn,y=h.TilingPattern,z=h.getShadingPatternFromIR,A=i.WebGLUtils,B=g.hasCanvasTypedArrays,C=16,D=100,E=4096,F=.65,G=!0,H=1e3,I=16,J={get value(){return w(J,"value",B())}},K={get value(){return w(K,"value",u())}},L=function(){function a(a){this.canvasFactory=a,this.cache=Object.create(null)}return a.prototype={getCanvas:function(a,b,c,e){var f;return void 0!==this.cache[a]?(f=this.cache[a],this.canvasFactory.reset(f,b,c),f.context.setTransform(1,0,0,1,0,0)):(f=this.canvasFactory.create(b,c),this.cache[a]=f),e&&d(f.context),f},clear:function(){for(var a in this.cache){var b=this.cache[a];this.canvasFactory.destroy(b),delete this.cache[a]}}},a}(),M=function(){function a(a){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=k,this.textMatrixScale=1,this.fontMatrix=j,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null,this.old=a}return a.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(a,b){this.x=a,this.y=b}},a}(),N=function(){function a(a,b,c,e,f){this.ctx=a,this.current=new M,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=b,this.objs=c,this.canvasFactory=e,this.imageLayer=f,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.cachedCanvases=new L(this.canvasFactory),a&&d(a),this.cachedGetSinglePixelWidth=null}function b(a,b){if("undefined"!=typeof ImageData&&b instanceof ImageData)return void a.putImageData(b,0,0);var c,d,e,f,g,h=b.height,i=b.width,j=h%I,k=(h-j)/I,m=0===j?k:k+1,n=a.createImageData(i,I),p=0,q=b.data,r=n.data;if(b.kind===l.GRAYSCALE_1BPP){var s=q.byteLength,t=J.value?new Uint32Array(r.buffer):new o(r),u=t.length,w=i+7>>3,x=4294967295,y=K.value||!J.value?4278190080:255;for(d=0;m>d;d++){for(f=k>d?I:j,c=0,e=0;f>e;e++){for(var z=s-p,A=0,B=z>w?i:8*z-7,C=-8&B,D=0,E=0;C>A;A+=8)E=q[p++],t[c++]=128&E?x:y,t[c++]=64&E?x:y,t[c++]=32&E?x:y,t[c++]=16&E?x:y,t[c++]=8&E?x:y,t[c++]=4&E?x:y,t[c++]=2&E?x:y,t[c++]=1&E?x:y;for(;B>A;A++)0===D&&(E=q[p++],D=128),t[c++]=E&D?x:y,D>>=1}for(;u>c;)t[c++]=0;a.putImageData(n,0,d*I)}}else if(b.kind===l.RGBA_32BPP){for(e=0,g=i*I*4,d=0;k>d;d++)r.set(q.subarray(p,p+g)),p+=g,a.putImageData(n,0,e),e+=I;m>d&&(g=i*j*4,r.set(q.subarray(p,p+g)),a.putImageData(n,0,e))}else if(b.kind===l.RGB_24BPP)for(f=I,g=i*f,d=0;m>d;d++){for(d>=k&&(f=j,g=i*f),c=0,e=g;e--;)r[c++]=q[p++],r[c++]=q[p++],r[c++]=q[p++],r[c++]=255;a.putImageData(n,0,d*I)}else v("bad image kind: "+b.kind)}function c(a,b){for(var c=b.height,d=b.width,e=c%I,f=(c-e)/I,g=0===e?f:f+1,h=a.createImageData(d,I),i=0,j=b.data,k=h.data,l=0;g>l;l++){for(var m=f>l?I:e,n=3,o=0;m>o;o++)for(var p=0,q=0;d>q;q++){if(!p){var r=j[i++];p=128}k[n]=r&p?0:255,n+=4,p>>=1}a.putImageData(h,0,l*I)}}function f(a,b){for(var c=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],d=0,e=c.length;e>d;d++){var f=c[d];void 0!==a[f]&&(b[f]=a[f])}void 0!==a.setLineDash&&(b.setLineDash(a.getLineDash()),b.lineDashOffset=a.lineDashOffset)}function g(a,b,c,d){for(var e=a.length,f=3;e>f;f+=4){var g=a[f];if(0===g)a[f-3]=b,a[f-2]=c,a[f-1]=d;else if(255>g){var h=255-g;a[f-3]=a[f-3]*g+b*h>>8,a[f-2]=a[f-2]*g+c*h>>8,a[f-1]=a[f-1]*g+d*h>>8}}}function h(a,b,c){for(var d=a.length,e=1/255,f=3;d>f;f+=4){var g=c?c[a[f]]:a[f];b[f]=b[f]*g*e|0}}function i(a,b,c){for(var d=a.length,e=3;d>e;e+=4){var f=77*a[e-3]+152*a[e-2]+28*a[e-1];b[e]=c?b[e]*c[f>>8]>>8:b[e]*f>>16}}function u(a,b,c,d,e,f,j){var k,l=!!f,m=l?f[0]:0,n=l?f[1]:0,o=l?f[2]:0;k="Luminosity"===e?i:h;for(var p=1048576,q=Math.min(d,Math.ceil(p/c)),r=0;d>r;r+=q){var s=Math.min(q,d-r),t=a.getImageData(0,r,c,s),u=b.getImageData(0,r,c,s);l&&g(t.data,m,n,o),k(t.data,u.data,j),a.putImageData(u,0,r)}}function B(a,b,c){var d=b.canvas,e=b.context;a.setTransform(b.scaleX,0,0,b.scaleY,b.offsetX,b.offsetY);var f=b.backdrop||null;if(!b.transferMap&&A.isEnabled){var g=A.composeSMask(c.canvas,d,{subtype:b.subtype,backdrop:f});return a.setTransform(1,0,0,1,0,0),void a.drawImage(g,b.offsetX,b.offsetY)}u(e,c,d.width,d.height,b.subtype,f,b.transferMap),a.drawImage(d,0,0)}var N=15,O=10,P=["butt","round","square"],Q=["miter","round","bevel"],R={},S={};a.prototype={beginDrawing:function(a,b,c){var d=this.ctx.canvas.width,e=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle="rgb(255, 255, 255)",this.ctx.fillRect(0,0,d,e),this.ctx.restore(),c){var f=this.cachedCanvases.getCanvas("transparent",d,e,!0);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),a&&this.ctx.transform.apply(this.ctx,a),this.ctx.transform.apply(this.ctx,b.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(a,b,c,d){var e=a.argsArray,f=a.fnArray,g=b||0,h=e.length;if(h===g)return g;for(var i,j=h-g>O&&"function"==typeof c,k=j?Date.now()+N:0,l=0,n=this.commonObjs,o=this.objs;;){if(void 0!==d&&g===d.nextBreakPoint)return d.breakIt(g,c),g;if(i=f[g],i!==m.dependency)this[i].apply(this,e[g]);else for(var p=e[g],q=0,r=p.length;r>q;q++){var s=p[q],t="g"===s[0]&&"_"===s[1],u=t?n:o;if(!u.isResolved(s))return u.get(s,c),g}if(g++,g===h)return g;if(j&&++l>O){if(Date.now()>k)return c(),g;l=0}}},endDrawing:function(){null!==this.current.activeSMask&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),A.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(a){this.current.lineWidth=a,this.ctx.lineWidth=a},setLineCap:function(a){this.ctx.lineCap=P[a]},setLineJoin:function(a){this.ctx.lineJoin=Q[a]},setMiterLimit:function(a){this.ctx.miterLimit=a},setDash:function(a,b){var c=this.ctx;void 0!==c.setLineDash&&(c.setLineDash(a),c.lineDashOffset=b)},setRenderingIntent:function(a){},setFlatness:function(a){},setGState:function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b],e=d[0],f=d[1];switch(e){case"LW":this.setLineWidth(f);break;case"LC":this.setLineCap(f);break;case"LJ":this.setLineJoin(f);break;case"ML":this.setMiterLimit(f);break;case"D":this.setDash(f[0],f[1]);break;case"RI":this.setRenderingIntent(f);break;case"FL":this.setFlatness(f);break;case"Font":this.setFont(f[0],f[1]);break;case"CA":this.current.strokeAlpha=d[1];break;case"ca":this.current.fillAlpha=d[1],this.ctx.globalAlpha=d[1];break;case"BM":if(f&&f.name&&"Normal"!==f.name){var g=f.name.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}).substring(1);this.ctx.globalCompositeOperation=g,this.ctx.globalCompositeOperation!==g&&x('globalCompositeOperation "'+g+'" is not supported')}else this.ctx.globalCompositeOperation="source-over";break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=f?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function(){var a=this.current.activeSMask,b=a.canvas.width,c=a.canvas.height,d="smaskGroupAt"+this.groupLevel,e=this.cachedCanvases.getCanvas(d,b,c,!0),g=this.ctx,h=g.mozCurrentTransform;this.ctx.save();var i=e.context;i.scale(1/a.scaleX,1/a.scaleY),i.translate(-a.offsetX,-a.offsetY),i.transform.apply(i,h),a.startTransformInverse=i.mozCurrentTransformInverse,f(g,i),this.ctx=i,this.setGState([["BM","Normal"],["ca",1],["CA",1]]),this.groupStack.push(g),this.groupLevel++},suspendSMaskGroup:function(){var a=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),B(this.ctx,this.current.activeSMask,a),this.ctx.restore(),this.ctx.save(),f(a,this.ctx),this.current.resumeSMaskCtx=a;var b=p.transform(this.current.activeSMask.startTransformInverse,a.mozCurrentTransform);this.ctx.transform.apply(this.ctx,b),a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,a.canvas.width,a.canvas.height),a.restore()},resumeSMaskGroup:function(){var a=this.current.resumeSMaskCtx,b=this.ctx;this.ctx=a,this.groupStack.push(b),this.groupLevel++},endSMaskGroup:function(){var a=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),B(this.ctx,this.current.activeSMask,a),this.ctx.restore(),f(a,this.ctx);var b=p.transform(this.current.activeSMask.startTransformInverse,a.mozCurrentTransform);this.ctx.transform.apply(this.ctx,b)},save:function(){this.ctx.save();var a=this.current;this.stateStack.push(a),this.current=a.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this.cachedGetSinglePixelWidth=null)},transform:function(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f),this.cachedGetSinglePixelWidth=null},constructPath:function(a,b){for(var c=this.ctx,d=this.current,e=d.x,f=d.y,g=0,h=0,i=a.length;i>g;g++)switch(0|a[g]){case m.rectangle:e=b[h++],f=b[h++];var j=b[h++],k=b[h++];0===j&&(j=this.getSinglePixelWidth()),0===k&&(k=this.getSinglePixelWidth());var l=e+j,n=f+k;this.ctx.moveTo(e,f),this.ctx.lineTo(l,f),this.ctx.lineTo(l,n),this.ctx.lineTo(e,n),this.ctx.lineTo(e,f),this.ctx.closePath();break;case m.moveTo:e=b[h++],f=b[h++],c.moveTo(e,f);break;case m.lineTo:e=b[h++],f=b[h++],c.lineTo(e,f);break;case m.curveTo:e=b[h+4],f=b[h+5],c.bezierCurveTo(b[h],b[h+1],b[h+2],b[h+3],e,f),h+=6;break;case m.curveTo2:c.bezierCurveTo(e,f,b[h],b[h+1],b[h+2],b[h+3]),e=b[h+2],f=b[h+3],h+=4;break;case m.curveTo3:e=b[h+2],f=b[h+3],c.bezierCurveTo(b[h],b[h+1],e,f,e,f),h+=4;break;case m.closePath:c.closePath()}d.setCurrentPoint(e,f)},closePath:function(){this.ctx.closePath()},stroke:function(a){a="undefined"!=typeof a?a:!0;var b=this.ctx,c=this.current.strokeColor;b.lineWidth=Math.max(this.getSinglePixelWidth()*F,this.current.lineWidth),b.globalAlpha=this.current.strokeAlpha,c&&c.hasOwnProperty("type")&&"Pattern"===c.type?(b.save(),b.strokeStyle=c.getPattern(b,this),b.stroke(),b.restore()):b.stroke(),a&&this.consumePath(),b.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(a){a="undefined"!=typeof a?a:!0;var b=this.ctx,c=this.current.fillColor,d=this.current.patternFill,e=!1;d&&(b.save(),this.baseTransform&&b.setTransform.apply(b,this.baseTransform),b.fillStyle=c.getPattern(b,this),e=!0),this.pendingEOFill?(b.fill("evenodd"),this.pendingEOFill=!1):b.fill(),e&&b.restore(),a&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=R},eoClip:function(){this.pendingClip=S},beginText:function(){this.current.textMatrix=k,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var a=this.pendingTextPaths,b=this.ctx;if(void 0===a)return void b.beginPath();b.save(),b.beginPath();for(var c=0;c<a.length;c++){var d=a[c];b.setTransform.apply(b,d.transform),b.translate(d.x,d.y),d.addToPath(b,d.fontSize)}b.restore(),b.clip(),b.beginPath(),delete this.pendingTextPaths},setCharSpacing:function(a){this.current.charSpacing=a},setWordSpacing:function(a){this.current.wordSpacing=a},setHScale:function(a){this.current.textHScale=a/100},setLeading:function(a){this.current.leading=-a},setFont:function(a,b){var c=this.commonObjs.get(a),d=this.current;if(c||v("Can't find font for "+a),d.fontMatrix=c.fontMatrix?c.fontMatrix:j,(0===d.fontMatrix[0]||0===d.fontMatrix[3])&&x("Invalid font matrix for font "+a),0>b?(b=-b,d.fontDirection=-1):d.fontDirection=1,this.current.font=c,this.current.fontSize=b,!c.isType3Font){var e=c.loadedName||"sans-serif",f=c.black?"900":c.bold?"bold":"normal",g=c.italic?"italic":"normal",h='"'+e+'", '+c.fallbackName,i=C>b?C:b>D?D:b;this.current.fontSizeScale=b/i;var k=g+" "+f+" "+i+"px "+h;this.ctx.font=k}},setTextRenderingMode:function(a){this.current.textRenderingMode=a},setTextRise:function(a){this.current.textRise=a},moveText:function(a,b){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=b},setLeadingMoveText:function(a,b){this.setLeading(-b),this.moveText(a,b)},setTextMatrix:function(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f],this.current.textMatrixScale=Math.sqrt(a*a+b*b),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0;
},nextLine:function(){this.moveText(0,this.current.leading)},paintChar:function(a,b,c){var d,e=this.ctx,f=this.current,g=f.font,h=f.textRenderingMode,i=f.fontSize/f.fontSizeScale,j=h&n.FILL_STROKE_MASK,k=!!(h&n.ADD_TO_PATH_FLAG);if((g.disableFontFace||k)&&(d=g.getPathGenerator(this.commonObjs,a)),g.disableFontFace?(e.save(),e.translate(b,c),e.beginPath(),d(e,i),(j===n.FILL||j===n.FILL_STROKE)&&e.fill(),(j===n.STROKE||j===n.FILL_STROKE)&&e.stroke(),e.restore()):((j===n.FILL||j===n.FILL_STROKE)&&e.fillText(a,b,c),(j===n.STROKE||j===n.FILL_STROKE)&&e.strokeText(a,b,c)),k){var l=this.pendingTextPaths||(this.pendingTextPaths=[]);l.push({transform:e.mozCurrentTransform,x:b,y:c,fontSize:i,addToPath:d})}},get isFontSubpixelAAEnabled(){var a=this.canvasFactory.create(10,10).context;a.scale(1.5,1),a.fillText("I",0,10);for(var b=a.getImageData(0,0,10,10).data,c=!1,d=3;d<b.length;d+=4)if(b[d]>0&&b[d]<255){c=!0;break}return w(this,"isFontSubpixelAAEnabled",c)},showText:function(a){var b=this.current,c=b.font;if(c.isType3Font)return this.showType3Text(a);var d=b.fontSize;if(0!==d){var e=this.ctx,f=b.fontSizeScale,g=b.charSpacing,h=b.wordSpacing,i=b.fontDirection,j=b.textHScale*i,k=a.length,l=c.vertical,m=l?1:-1,o=c.defaultVMetrics,p=d*b.fontMatrix[0],q=b.textRenderingMode===n.FILL&&!c.disableFontFace;e.save(),e.transform.apply(e,b.textMatrix),e.translate(b.x,b.y+b.textRise),b.patternFill&&(e.fillStyle=b.fillColor.getPattern(e,this)),i>0?e.scale(j,-1):e.scale(j,1);var r=b.lineWidth,t=b.textMatrixScale;if(0===t||0===r){var u=b.textRenderingMode&n.FILL_STROKE_MASK;(u===n.STROKE||u===n.FILL_STROKE)&&(this.cachedGetSinglePixelWidth=null,r=this.getSinglePixelWidth()*F)}else r/=t;1!==f&&(e.scale(f,f),r/=f),e.lineWidth=r;var v,w=0;for(v=0;k>v;++v){var x=a[v];if(s(x))w+=m*x*d/1e3;else{var y,z,A,B,C=!1,D=(x.isSpace?h:0)+g,E=x.fontChar,G=x.accent,H=x.width;if(l){var I,J,K;I=x.vmetric||o,J=x.vmetric?I[1]:.5*H,J=-J*p,K=I[2]*p,H=I?-I[0]:H,y=J/f,z=(w+K)/f}else y=w/f,z=0;if(c.remeasure&&H>0){var L=1e3*e.measureText(E).width/d*f;if(L>H&&this.isFontSubpixelAAEnabled){var M=H/L;C=!0,e.save(),e.scale(M,1),y/=M}else H!==L&&(y+=(H-L)/2e3*d/f)}(x.isInFont||c.missingFile)&&(q&&!G?e.fillText(E,y,z):(this.paintChar(E,y,z),G&&(A=y+G.offset.x/f,B=z-G.offset.y/f,this.paintChar(G.fontChar,A,B))));var N=H*p+D*i;w+=N,C&&e.restore()}}l?b.y-=w*j:b.x+=w*j,e.restore()}},showType3Text:function(a){var b,c,d,e,f=this.ctx,g=this.current,h=g.font,i=g.fontSize,k=g.fontDirection,l=h.vertical?1:-1,m=g.charSpacing,o=g.wordSpacing,q=g.textHScale*k,r=g.fontMatrix||j,t=a.length,u=g.textRenderingMode===n.INVISIBLE;if(!u&&0!==i){for(this.cachedGetSinglePixelWidth=null,f.save(),f.transform.apply(f,g.textMatrix),f.translate(g.x,g.y),f.scale(q,k),b=0;t>b;++b)if(c=a[b],s(c))e=l*c*i/1e3,this.ctx.translate(e,0),g.x+=e*q;else{var v=(c.isSpace?o:0)+m,w=h.charProcOperatorList[c.operatorListId];if(w){this.processingType3=c,this.save(),f.scale(i,i),f.transform.apply(f,r),this.executeOperatorList(w),this.restore();var y=p.applyTransform([c.width,0],r);d=y[0]*i+v,f.translate(d,0),g.x+=d*q}else x('Type3 character "'+c.operatorListId+'" is not available')}f.restore(),this.processingType3=null}},setCharWidth:function(a,b){},setCharWidthAndBounds:function(a,b,c,d,e,f){this.ctx.rect(c,d,e-c,f-d),this.clip(),this.endPath()},getColorN_Pattern:function(b){var c;if("TilingPattern"===b[0]){var d=b[1],e=this.baseTransform||this.ctx.mozCurrentTransform.slice(),f=this,g={createCanvasGraphics:function(b){return new a(b,f.commonObjs,f.objs,f.canvasFactory)}};c=new y(b,d,this.ctx,g,e)}else c=z(b);return c},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(a,b,c){var d=p.makeCssRgb(a,b,c);this.ctx.strokeStyle=d,this.current.strokeColor=d},setFillRGBColor:function(a,b,c){var d=p.makeCssRgb(a,b,c);this.ctx.fillStyle=d,this.current.fillColor=d,this.current.patternFill=!1},shadingFill:function(a){var b=this.ctx;this.save();var c=z(a);b.fillStyle=c.getPattern(b,this,!0);var d=b.mozCurrentTransformInverse;if(d){var e=b.canvas,f=e.width,g=e.height,h=p.applyTransform([0,0],d),i=p.applyTransform([0,g],d),j=p.applyTransform([f,0],d),k=p.applyTransform([f,g],d),l=Math.min(h[0],i[0],j[0],k[0]),m=Math.min(h[1],i[1],j[1],k[1]),n=Math.max(h[0],i[0],j[0],k[0]),o=Math.max(h[1],i[1],j[1],k[1]);this.ctx.fillRect(l,m,n-l,o-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function(){v("Should not call beginInlineImage")},beginImageData:function(){v("Should not call beginImageData")},paintFormXObjectBegin:function(a,b){if(this.save(),this.baseTransformStack.push(this.baseTransform),t(a)&&6===a.length&&this.transform.apply(this,a),this.baseTransform=this.ctx.mozCurrentTransform,t(b)&&4===b.length){var c=b[2]-b[0],d=b[3]-b[1];this.ctx.rect(b[0],b[1],c,d),this.clip(),this.endPath()}},paintFormXObjectEnd:function(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(a){this.save();var b=this.ctx;a.isolated||r("TODO: Support non-isolated groups."),a.knockout&&x("Knockout groups not supported.");var c=b.mozCurrentTransform;a.matrix&&b.transform.apply(b,a.matrix),q(a.bbox,"Bounding box is required.");var d=p.getAxialAlignedBoundingBox(a.bbox,b.mozCurrentTransform),e=[0,0,b.canvas.width,b.canvas.height];d=p.intersect(d,e)||[0,0,0,0];var g=Math.floor(d[0]),h=Math.floor(d[1]),i=Math.max(Math.ceil(d[2])-g,1),j=Math.max(Math.ceil(d[3])-h,1),k=1,l=1;i>E&&(k=i/E,i=E),j>E&&(l=j/E,j=E);var m="groupAt"+this.groupLevel;a.smask&&(m+="_smask_"+this.smaskCounter++%2);var n=this.cachedCanvases.getCanvas(m,i,j,!0),o=n.context;o.scale(1/k,1/l),o.translate(-g,-h),o.transform.apply(o,c),a.smask?this.smaskStack.push({canvas:n.canvas,context:o,offsetX:g,offsetY:h,scaleX:k,scaleY:l,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(b.setTransform(1,0,0,1,0,0),b.translate(g,h),b.scale(k,l)),f(b,o),this.ctx=o,this.setGState([["BM","Normal"],["ca",1],["CA",1]]),this.groupStack.push(b),this.groupLevel++,this.current.activeSMask=null},endGroup:function(a){this.groupLevel--;var b=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,a.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(b.canvas,0,0),this.restore()},beginAnnotations:function(){this.save(),this.current=new M,this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(a,b,c){if(this.save(),t(a)&&4===a.length){var d=a[2]-a[0],e=a[3]-a[1];this.ctx.rect(a[0],a[1],d,e),this.clip(),this.endPath()}this.transform.apply(this,b),this.transform.apply(this,c)},endAnnotation:function(){this.restore()},paintJpegXObject:function(a,b,c){var d=this.objs.get(a);if(!d)return void x("Dependent image isn't ready yet");this.save();var e=this.ctx;if(e.scale(1/b,-1/c),e.drawImage(d,0,0,d.width,d.height,0,-c,b,c),this.imageLayer){var f=e.mozCurrentTransformInverse,g=this.getCanvasPosition(0,0);this.imageLayer.appendImage({objId:a,left:g[0],top:g[1],width:b/f[0],height:c/f[3]})}this.restore()},paintImageMaskXObject:function(a){var b=this.ctx,d=a.width,f=a.height,g=this.current.fillColor,h=this.current.patternFill,i=this.processingType3;if(G&&i&&void 0===i.compiled&&(H>=d&&H>=f?i.compiled=e({data:a.data,width:d,height:f}):i.compiled=null),i&&i.compiled)return void i.compiled(b);var j=this.cachedCanvases.getCanvas("maskCanvas",d,f),k=j.context;k.save(),c(k,a),k.globalCompositeOperation="source-in",k.fillStyle=h?g.getPattern(k,this):g,k.fillRect(0,0,d,f),k.restore(),this.paintInlineImageXObject(j.canvas)},paintImageMaskXObjectRepeat:function(a,b,d,e){var f=a.width,g=a.height,h=this.current.fillColor,i=this.current.patternFill,j=this.cachedCanvases.getCanvas("maskCanvas",f,g),k=j.context;k.save(),c(k,a),k.globalCompositeOperation="source-in",k.fillStyle=i?h.getPattern(k,this):h,k.fillRect(0,0,f,g),k.restore();for(var l=this.ctx,m=0,n=e.length;n>m;m+=2)l.save(),l.transform(b,0,0,d,e[m],e[m+1]),l.scale(1,-1),l.drawImage(j.canvas,0,0,f,g,0,-1,1,1),l.restore()},paintImageMaskXObjectGroup:function(a){for(var b=this.ctx,d=this.current.fillColor,e=this.current.patternFill,f=0,g=a.length;g>f;f++){var h=a[f],i=h.width,j=h.height,k=this.cachedCanvases.getCanvas("maskCanvas",i,j),l=k.context;l.save(),c(l,h),l.globalCompositeOperation="source-in",l.fillStyle=e?d.getPattern(l,this):d,l.fillRect(0,0,i,j),l.restore(),b.save(),b.transform.apply(b,h.transform),b.scale(1,-1),b.drawImage(k.canvas,0,0,i,j,0,-1,1,1),b.restore()}},paintImageXObject:function(a){var b=this.objs.get(a);return b?void this.paintInlineImageXObject(b):void x("Dependent image isn't ready yet")},paintImageXObjectRepeat:function(a,b,c,d){var e=this.objs.get(a);if(!e)return void x("Dependent image isn't ready yet");for(var f=e.width,g=e.height,h=[],i=0,j=d.length;j>i;i+=2)h.push({transform:[b,0,0,c,d[i],d[i+1]],x:0,y:0,w:f,h:g});this.paintInlineImageXObjectGroup(e,h)},paintInlineImageXObject:function(a){var c=a.width,d=a.height,e=this.ctx;this.save(),e.scale(1/c,-1/d);var f,g,h=e.mozCurrentTransformInverse,i=h[0],j=h[1],k=Math.max(Math.sqrt(i*i+j*j),1),l=h[2],m=h[3],n=Math.max(Math.sqrt(l*l+m*m),1);if(a instanceof HTMLElement||!a.data)f=a;else{g=this.cachedCanvases.getCanvas("inlineImage",c,d);var o=g.context;b(o,a),f=g.canvas}for(var p=c,q=d,r="prescale1";k>2&&p>1||n>2&&q>1;){var s=p,t=q;k>2&&p>1&&(s=Math.ceil(p/2),k/=p/s),n>2&&q>1&&(t=Math.ceil(q/2),n/=q/t),g=this.cachedCanvases.getCanvas(r,s,t),o=g.context,o.clearRect(0,0,s,t),o.drawImage(f,0,0,p,q,0,0,s,t),f=g.canvas,p=s,q=t,r="prescale1"===r?"prescale2":"prescale1"}if(e.drawImage(f,0,0,p,q,0,-d,c,d),this.imageLayer){var u=this.getCanvasPosition(0,-d);this.imageLayer.appendImage({imgData:a,left:u[0],top:u[1],width:c/h[0],height:d/h[3]})}this.restore()},paintInlineImageXObjectGroup:function(a,c){var d=this.ctx,e=a.width,f=a.height,g=this.cachedCanvases.getCanvas("inlineImage",e,f),h=g.context;b(h,a);for(var i=0,j=c.length;j>i;i++){var k=c[i];if(d.save(),d.transform.apply(d,k.transform),d.scale(1,-1),d.drawImage(g.canvas,k.x,k.y,k.w,k.h,0,-1,1,1),this.imageLayer){var l=this.getCanvasPosition(k.x,k.y);this.imageLayer.appendImage({imgData:a,left:l[0],top:l[1],width:e,height:f})}d.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,0,1,1)},paintXObject:function(){x("Unsupported 'paintXObject' command.")},markPoint:function(a){},markPointProps:function(a,b){},beginMarkedContent:function(a){},beginMarkedContentProps:function(a,b){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var a=this.ctx;this.pendingClip&&(this.pendingClip===S?a.clip("evenodd"):a.clip(),this.pendingClip=null),a.beginPath()},getSinglePixelWidth:function(a){if(null===this.cachedGetSinglePixelWidth){this.ctx.save();var b=this.ctx.mozCurrentTransformInverse;this.ctx.restore(),this.cachedGetSinglePixelWidth=Math.sqrt(Math.max(b[0]*b[0]+b[1]*b[1],b[2]*b[2]+b[3]*b[3]))}return this.cachedGetSinglePixelWidth},getCanvasPosition:function(a,b){var c=this.ctx.mozCurrentTransform;return[c[0]*a+c[2]*b+c[4],c[1]*a+c[3]*b+c[5]]}};for(var T in m)a.prototype[m[T]]=a.prototype[T];return a}();b.CanvasGraphics=N},function(a,b,c){"use strict";function d(a){this.docId=a,this.styleElement=null,this.nativeFontFaces=[],this.loadTestFontId=0,this.loadingContext={requests:[],nextRequestId:0}}var e=c(0),f=e.assert,g=e.bytesToString,h=e.string32,i=e.shadow,j=e.warn;d.prototype={insertRule:function(a){var b=this.styleElement;b||(b=this.styleElement=document.createElement("style"),b.id="PDFJS_FONT_STYLE_TAG_"+this.docId,document.documentElement.getElementsByTagName("head")[0].appendChild(b));var c=b.sheet;c.insertRule(a,c.cssRules.length)},clear:function(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null),this.nativeFontFaces.forEach(function(a){document.fonts["delete"](a)}),this.nativeFontFaces.length=0}};var k=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};Object.defineProperty(d.prototype,"loadTestFont",{get:function(){return i(this,"loadTestFont",k())},configurable:!0}),d.prototype.addNativeFontFace=function(a){this.nativeFontFaces.push(a),document.fonts.add(a)},d.prototype.bind=function(a,b){for(var c=[],e=[],f=[],g=function(a){return a.loaded["catch"](function(b){j('Failed to load font "'+a.family+'": '+b)})},h=d.isFontLoadingAPISupported&&!d.isSyncFontLoadingSupported,i=0,k=a.length;k>i;i++){var l=a[i];if(!l.attached&&l.loading!==!1)if(l.attached=!0,h){var m=l.createNativeFontFace();m&&(this.addNativeFontFace(m),f.push(g(m)))}else{var n=l.createFontFaceRule();n&&(this.insertRule(n),c.push(n),e.push(l))}}var o=this.queueLoadingCallback(b);h?Promise.all(f).then(function(){o.complete()}):c.length>0&&!d.isSyncFontLoadingSupported?this.prepareFontLoadEvent(c,e,o):o.complete()},d.prototype.queueLoadingCallback=function(a){function b(){for(f(!e.end,"completeRequest() cannot be called twice"),e.end=Date.now();c.requests.length>0&&c.requests[0].end;){var a=c.requests.shift();setTimeout(a.callback,0)}}var c=this.loadingContext,d="pdfjs-font-loading-"+c.nextRequestId++,e={id:d,complete:b,callback:a,started:Date.now()};return c.requests.push(e),e},d.prototype.prepareFontLoadEvent=function(a,b,c){function d(a,b){return a.charCodeAt(b)<<24|a.charCodeAt(b+1)<<16|a.charCodeAt(b+2)<<8|255&a.charCodeAt(b+3)}function e(a,b,c,d){var e=a.substr(0,b),f=a.substr(b+c);return e+d+f}function f(a,b){if(m++,m>30)return j("Load test font never loaded."),void b();l.font="30px "+a,l.fillText(".",0,20);var c=l.getImageData(0,0,1,1);return c.data[3]>0?void b():void setTimeout(f.bind(null,a,b))}var g,i,k=document.createElement("canvas");k.width=1,k.height=1;var l=k.getContext("2d"),m=0,n="lt"+Date.now()+this.loadTestFontId++,o=this.loadTestFont,p=976;o=e(o,p,n.length,n);var q=16,r=1482184792,s=d(o,q);for(g=0,i=n.length-3;i>g;g+=4)s=s-r+d(n,g)|0;g<n.length&&(s=s-r+d(n+"XXX",g)|0),o=e(o,q,4,h(s));var t="url(data:font/opentype;base64,"+btoa(o)+");",u='@font-face { font-family:"'+n+'";src:'+t+"}";this.insertRule(u);var v=[];for(g=0,i=b.length;i>g;g++)v.push(b[g].loadedName);v.push(n);var w=document.createElement("div");for(w.setAttribute("style","visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;"),g=0,i=v.length;i>g;++g){var x=document.createElement("span");x.textContent="Hi",x.style.fontFamily=v[g],w.appendChild(x)}document.body.appendChild(w),f(n,function(){document.body.removeChild(w),c.complete()})},d.isFontLoadingAPISupported="undefined"!=typeof document&&!!document.fonts;var l=function(){if("undefined"==typeof navigator)return!0;var a=!1,b=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);return b&&b[1]>=14&&(a=!0),a};Object.defineProperty(d,"isSyncFontLoadingSupported",{get:function(){return i(d,"isSyncFontLoadingSupported",l())},enumerable:!0,configurable:!0});var m={get value(){return i(this,"value",e.isEvalSupported())}},n=function(){function a(a,b){this.compiledGlyphs=Object.create(null);for(var c in a)this[c]=a[c];this.options=b}return a.prototype={createNativeFontFace:function(){if(!this.data)return null;if(this.options.disableFontFace)return this.disableFontFace=!0,null;var a=new FontFace(this.loadedName,this.data,{});return this.options.fontRegistry&&this.options.fontRegistry.registerFont(this),a},createFontFaceRule:function(){if(!this.data)return null;if(this.options.disableFontFace)return this.disableFontFace=!0,null;var a=g(new Uint8Array(this.data)),b=this.loadedName,c="url(data:"+this.mimetype+";base64,"+btoa(a)+");",d='@font-face { font-family:"'+b+'";src:'+c+"}";return this.options.fontRegistry&&this.options.fontRegistry.registerFont(this,c),d},getPathGenerator:function(a,b){if(!(b in this.compiledGlyphs)){var c,d,e,f=a.get(this.loadedName+"_path_"+b);if(this.options.isEvalSupported&&m.value){var g,h="";for(d=0,e=f.length;e>d;d++)c=f[d],g=void 0!==c.args?c.args.join(","):"",h+="c."+c.cmd+"("+g+");\n";this.compiledGlyphs[b]=new Function("c","size",h)}else this.compiledGlyphs[b]=function(a,b){for(d=0,e=f.length;e>d;d++)c=f[d],"scale"===c.cmd&&(c.args=[b,-b]),a[c.cmd].apply(a,c.args)}}return this.compiledGlyphs[b]}},a}();b.FontFaceObject=n,b.FontLoader=d},function(a,b,c){"use strict";function d(a){var b=l[a[0]];return b||j("Unknown IR type: "+a[0]),b.fromIR(a)}var e=c(0),f=c(7),g=e.Util,h=e.info,i=e.isArray,j=e.error,k=f.WebGLUtils,l={};l.RadialAxial={fromIR:function(a){var b=a[1],c=a[2],d=a[3],e=a[4],f=a[5],g=a[6];return{type:"Pattern",getPattern:function(a){var h;"axial"===b?h=a.createLinearGradient(d[0],d[1],e[0],e[1]):"radial"===b&&(h=a.createRadialGradient(d[0],d[1],f,e[0],e[1],g));for(var i=0,j=c.length;j>i;++i){var k=c[i];h.addColorStop(k[0],k[1])}return h}}}};var m=function(){function a(a,b,c,d,e,f,g,h){var i,j=b.coords,k=b.colors,l=a.data,m=4*a.width;j[c+1]>j[d+1]&&(i=c,c=d,d=i,i=f,f=g,g=i),j[d+1]>j[e+1]&&(i=d,d=e,e=i,i=g,g=h,h=i),j[c+1]>j[d+1]&&(i=c,c=d,d=i,i=f,f=g,g=i);var n=(j[c]+b.offsetX)*b.scaleX,o=(j[c+1]+b.offsetY)*b.scaleY,p=(j[d]+b.offsetX)*b.scaleX,q=(j[d+1]+b.offsetY)*b.scaleY,r=(j[e]+b.offsetX)*b.scaleX,s=(j[e+1]+b.offsetY)*b.scaleY;if(!(o>=s))for(var t,u,v,w,x,y,z,A,B,C=k[f],D=k[f+1],E=k[f+2],F=k[g],G=k[g+1],H=k[g+2],I=k[h],J=k[h+1],K=k[h+2],L=Math.round(o),M=Math.round(s),N=L;M>=N;N++){q>N?(B=o>N?0:o===q?1:(o-N)/(o-q),t=n-(n-p)*B,u=C-(C-F)*B,v=D-(D-G)*B,w=E-(E-H)*B):(B=N>s?1:q===s?0:(q-N)/(q-s),t=p-(p-r)*B,u=F-(F-I)*B,v=G-(G-J)*B,w=H-(H-K)*B),B=o>N?0:N>s?1:(o-N)/(o-s),x=n-(n-r)*B,y=C-(C-I)*B,z=D-(D-J)*B,A=E-(E-K)*B;for(var O=Math.round(Math.min(t,x)),P=Math.round(Math.max(t,x)),Q=m*N+4*O,R=O;P>=R;R++)B=(t-R)/(t-x),B=0>B?0:B>1?1:B,l[Q++]=u-(u-y)*B|0,l[Q++]=v-(v-z)*B|0,l[Q++]=w-(w-A)*B|0,l[Q++]=255}}function b(b,c,d){var e,f,g=c.coords,h=c.colors;switch(c.type){case"lattice":var i=c.verticesPerRow,k=Math.floor(g.length/i)-1,l=i-1;for(e=0;k>e;e++)for(var m=e*i,n=0;l>n;n++,m++)a(b,d,g[m],g[m+1],g[m+i],h[m],h[m+1],h[m+i]),a(b,d,g[m+i+1],g[m+1],g[m+i],h[m+i+1],h[m+1],h[m+i]);break;case"triangles":for(e=0,f=g.length;f>e;e+=3)a(b,d,g[e],g[e+1],g[e+2],h[e],h[e+1],h[e+2]);break;default:j("illigal figure")}}function c(a,c,d,e,f,g,h){var i,j,l,m,n=1.1,o=3e3,p=2,q=Math.floor(a[0]),r=Math.floor(a[1]),s=Math.ceil(a[2])-q,t=Math.ceil(a[3])-r,u=Math.min(Math.ceil(Math.abs(s*c[0]*n)),o),v=Math.min(Math.ceil(Math.abs(t*c[1]*n)),o),w=s/u,x=t/v,y={coords:d,colors:e,offsetX:-q,offsetY:-r,scaleX:1/w,scaleY:1/x},z=u+2*p,A=v+2*p;if(k.isEnabled)i=k.drawFigures(u,v,g,f,y),j=h.getCanvas("mesh",z,A,!1),j.context.drawImage(i,p,p),i=j.canvas;else{j=h.getCanvas("mesh",z,A,!1);var B=j.context,C=B.createImageData(u,v);if(g){var D=C.data;for(l=0,m=D.length;m>l;l+=4)D[l]=g[0],D[l+1]=g[1],D[l+2]=g[2],D[l+3]=255}for(l=0;l<f.length;l++)b(C,f[l],y);B.putImageData(C,p,p),i=j.canvas}return{canvas:i,offsetX:q-p*w,offsetY:r-p*x,scaleX:w,scaleY:x}}return c}();l.Mesh={fromIR:function(a){var b=a[2],c=a[3],d=a[4],e=a[5],f=a[6],h=a[8];return{type:"Pattern",getPattern:function(a,i,j){var k;if(j)k=g.singularValueDecompose2dScale(a.mozCurrentTransform);else if(k=g.singularValueDecompose2dScale(i.baseTransform),f){var l=g.singularValueDecompose2dScale(f);k=[k[0]*l[0],k[1]*l[1]]}var n=m(e,k,b,c,d,j?null:h,i.cachedCanvases);return j||(a.setTransform.apply(a,i.baseTransform),f&&a.transform.apply(a,f)),a.translate(n.offsetX,n.offsetY),a.scale(n.scaleX,n.scaleY),a.createPattern(n.canvas,"no-repeat")}}}},l.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};var n=function(){function a(a,b,c,d,e){this.operatorList=a[2],this.matrix=a[3]||[1,0,0,1,0,0],this.bbox=a[4],this.xstep=a[5],this.ystep=a[6],this.paintType=a[7],this.tilingType=a[8],this.color=b,this.canvasGraphicsFactory=d,this.baseTransform=e,this.type="Pattern",this.ctx=c}var b={COLORED:1,UNCOLORED:2},c=3e3;return a.prototype={createPatternCanvas:function(a){var b=this.operatorList,d=this.bbox,e=this.xstep,f=this.ystep,i=this.paintType,j=this.tilingType,k=this.color,l=this.canvasGraphicsFactory;h("TilingType: "+j);var m=d[0],n=d[1],o=d[2],p=d[3],q=[m,n],r=[m+e,n+f],s=r[0]-q[0],t=r[1]-q[1],u=g.singularValueDecompose2dScale(this.matrix),v=g.singularValueDecompose2dScale(this.baseTransform),w=[u[0]*v[0],u[1]*v[1]];s=Math.min(Math.ceil(Math.abs(s*w[0])),c),t=Math.min(Math.ceil(Math.abs(t*w[1])),c);var x=a.cachedCanvases.getCanvas("pattern",s,t,!0),y=x.context,z=l.createCanvasGraphics(y);z.groupLevel=a.groupLevel,this.setFillAndStrokeStyleToContext(y,i,k),this.setScale(s,t,e,f),this.transformToScale(z);var A=[1,0,0,1,-q[0],-q[1]];return z.transform.apply(z,A),this.clipBbox(z,d,m,n,o,p),z.executeOperatorList(b),x.canvas},setScale:function(a,b,c,d){this.scale=[a/c,b/d]},transformToScale:function(a){var b=this.scale,c=[b[0],0,0,b[1],0,0];a.transform.apply(a,c)},scaleToContext:function(){var a=this.scale;this.ctx.scale(1/a[0],1/a[1])},clipBbox:function(a,b,c,d,e,f){if(b&&i(b)&&4===b.length){var g=e-c,h=f-d;a.ctx.rect(c,d,g,h),a.clip(),a.endPath()}},setFillAndStrokeStyleToContext:function(a,c,d){switch(c){case b.COLORED:var e=this.ctx;a.fillStyle=e.fillStyle,a.strokeStyle=e.strokeStyle;break;case b.UNCOLORED:var f=g.makeCssRgb(d[0],d[1],d[2]);a.fillStyle=f,a.strokeStyle=f;break;default:j("Unsupported paint type: "+c)}},getPattern:function(a,b){var c=this.createPatternCanvas(b);return a=this.ctx,a.setTransform.apply(a,this.baseTransform),a.transform.apply(a,this.matrix),this.scaleToContext(),a.createPattern(c,"repeat")}},a}();b.getShadingPatternFromIR=d,b.TilingPattern=n},function(a,b,c){"use strict";var d=c(0),e=c(8),f=c(3),g=c(5),h=c(2),i=c(1),j=c(4);b.PDFJS=e.PDFJS,b.build=f.build,b.version=f.version,b.getDocument=f.getDocument,b.PDFDataRangeTransport=f.PDFDataRangeTransport,b.PDFWorker=f.PDFWorker,b.renderTextLayer=g.renderTextLayer,b.AnnotationLayer=h.AnnotationLayer,b.CustomStyle=i.CustomStyle,b.createPromiseCapability=d.createPromiseCapability,b.PasswordResponses=d.PasswordResponses,b.InvalidPDFException=d.InvalidPDFException,b.MissingPDFException=d.MissingPDFException,b.SVGGraphics=j.SVGGraphics,b.UnexpectedResponseException=d.UnexpectedResponseException,b.OPS=d.OPS,b.UNSUPPORTED_FEATURES=d.UNSUPPORTED_FEATURES,b.isValidUrl=i.isValidUrl,b.createValidAbsoluteUrl=d.createValidAbsoluteUrl,b.createObjectURL=d.createObjectURL,b.removeNullCharacters=d.removeNullCharacters,b.shadow=d.shadow,b.createBlob=d.createBlob,b.getFilenameFromUrl=i.getFilenameFromUrl,b.addLinkAttributes=i.addLinkAttributes}])}),angular.module("ohanaApp").controller("ChangeChapterCtrl",["selectedUID","$scope","$rootScope","$q","commonServices","userService","$uibModalInstance","howLogService",function(a,b,c,d,e,f,g,h){"use strict";b.chapters=[],b.regions=c.siteData.regionsChapters,b.cancel=function(){g.dismiss("cancel")},b.regionUpdate=function(a){var d=_.filter(c.siteData.regionsChapters,function(b){return b.value===a.value});b.chapters=d[0].chapters},b.updateRegionChapter=function(b,h){if(a){var i=e.getData("/userData/"+a);d.all([i]).then(function(d){swal({title:"Are you sure?",text:"Changing "+d[0].name.first+" "+d[0].name.last+" chapter will revert their role to Participant...",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, please continue!"}).then(function(){delete h.$$hashKey,e.updateData("/userData/"+a+"/Region",b.value),e.updateData("/userData/"+a+"/Chapter",h),e.updateData("/userRoles/"+a+"/role","Participant"),g.dismiss("cancel"),c.$broadcast("modalClosing"),swal("Success","Region/Chapter updated successfully!","success")})})}else swal({title:"Are you sure?",text:"Your role will be changed to Participant if you change your PRIMARY CHAPTER",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, please continue!"}).then(function(){var a=f.getId(),d=f.getUserData();f.getChapter(),f.getUserName();delete h.$$hashKey,e.updateData("/userData/"+a+"/Region",b.value),e.updateData("/userData/"+a+"/Chapter",h),e.updateData("/userRoles/"+a+"/role","Participant"),d.Region=b.value,d.Chapter=h,f.setUserData(d),f.setChapter(h),f.setRole("Participant"),g.dismiss("cancel"),c.$broadcast("updateProfile",!0),swal("Success","Region/Chapter updated successfully!","success")})}}]),angular.module("ohanaApp").controller("ChapterAddCtrl",["$q","$scope","$uibModalInstance","commonServices","$rootScope",function(a,b,c,d,e){"use strict";var f={};b.regions=e.siteData.regions,b.states=e.siteData.states,b.newChapter={},b.postChapter=function(b){f=angular.copy(b),f.region=f.region.value,f.state=f.state.id,f.url=f.facebook,delete f.facebook,f.email_link='<a href="'+f.email+'" target="_blank" id="slp_marker_email" class="storelocatorlink"><nobr>Email</nobr></a>',f.web_link="<a href='"+f.url+"' target='_blank' class='storelocatorlink'>"+f.url+"</a><br/>",f.url_link="<a href='"+f.url+"' target='_blank' class='storelocatorlink'>"+f.url+"</a><br/>",f.lat=0,f.lng=0,f.address="",f.address2="",f.attributes="",f.city="",f.country="",f.distance="",f.fax="",f.featured="",f.hours="",f.icon="",f.id="",f.image="",f.linked_postid="0",f.neat_title="",f.option_value="",f.phone="",f.rank="",f.sl_pages_url="",f.tags="";var e=d.getNewKey("/Regions/"+f.region+"/"+f.state+"/");a.all([e]).then(function(b){var e=d.setData("/Regions/"+f.region+"/"+f.state+"/"+b[0],f);a.all([e]).then(function(a){d.setData("/siteData/chapters/"+b[0],{region:f.region,text:f.name,value:f.name});c.close(f),swal({text:"Adding Chapter",type:"success",timer:2500})})})},b.cancel=function(){c.dismiss("cancel")}}]),angular.module("ohanaApp").controller("ChapterStatusCtrl",["$q","commonServices","userService","$scope","$rootScope","$uibModalInstance",function(a,b,c,d,e,f){"use strict";d.initialize=function(){d.logLevel=!1,d.selectedRegion=!1,d.selectedChapter=!1,d.selectedOption=!1,d.chapters=[],d.regions=e.siteData.regionsChapters,d.logType=[],d.currentLog=[],"Chapter Lead"===c.getRole()&&(d.levelChanged("Chapter"),d.selectedChapter={text:c.getChapter()})},d.cancel=function(){f.dismiss("cancel"),e.$broadcast("modalClosing")},d.regionUpdate=function(a){_.each(d.regions,function(b){a.value===b.value&&(d.chapters=b.chapters)})},d.chapterChanged=function(){d.selectedOption=!1},d.levelChanged=function(a){d.currentLog=[],"National"===a?d.logType=[{text:"All Chapter Changes"}]:d.logType=[{text:"Primary Member Changes"},{text:"Secondary Member Changes"}]},d.selectedLogOption=function(c){var e;switch(c.text){case"All Chapter Changes":e=b.getData("/logs/nationalLogs/memberTraffic"),a.all([e]).then(function(a){d.formatAllLogs(a[0])});break;case"Primary Member Changes":e=b.getData("/logs/chapterLogs/memberTraffic/primaryChapter/"+d.selectedChapter.text),a.all([e]).then(function(a){d.formatPrimaryMemberLogs(a[0])});break;case"Secondary Member Changes":e=b.getData("/logs/chapterLogs/memberTraffic/secondaryChapter/"+d.selectedChapter.text),a.all([e]).then(function(a){d.formatSecondaryMemberLogs(a[0])});break;default:console.log("No Log Option...")}},d.formatAllLogs=function(a){var b,c=[];_.each(a,function(a){b={msg:"",ts:a.timeStamp},"primary"===a.type?(b.msg+=a.userName+" ",a.changedBy?(b.msg+="Primary Chapter was switched by "+a.changedBy+" from ",b.msg+=a.oldChapter+" to "+a.newChapter):a.oldChapter?b.msg+="switched Primary Chapter from "+a.oldChapter+" to "+a.newChapter:b.msg+="is a newly registered user, and has joined "+a.newChapter):"secondary"===a.type?(b.msg+=a.userName+" ",a.changedBy?b.msg+="Secondary Chapter(s) was modified by "+a.changedBy+": ":b.msg+="Secondary Chapter(s) was modified : ",a.oldChapters&&(b.msg+="Removed: ",_.each(a.oldChapters,function(a){b.msg+=a+", "})),a.newChapters&&(b.msg+="Added: ",_.each(a.newChapters,function(a){b.msg+=a+", "}))):console.log("Invalid Type....."),c.push(b)}),d.currentLog=c.reverse()},d.formatPrimaryMemberLogs=function(a){var b,c=[];_.each(a,function(a){b={msg:"",ts:a.timeStamp},"added"===a.status?a.changedBy?b.msg+=a.userName+" has been ADDED to "+d.selectedChapter.text+" by "+a.changedBy+".":b.msg+=a.userName+"  has JOINED "+d.selectedChapter.text+".":a.changedBy?b.msg+=a.userName+" has been REMOVED from "+d.selectedChapter.text+" by "+a.changedBy+".":b.msg+=a.userName+"  has LEFT "+d.selectedChapter.text+".",c.push(b)}),d.currentLog=c.reverse()},d.formatSecondaryMemberLogs=function(a){var b,c=[];_.each(a,function(a){b={msg:"",ts:a.timeStamp},"added"===a.status?a.changedBy?b.msg+=a.userName+" has been ADDED to "+d.selectedChapter.text+" as a secondary member by "+a.changedBy+".":b.msg+=a.userName+"  has JOINED "+d.selectedChapter.text+" as a secondary member.":a.changedBy?b.msg+=a.userName+", as a secondary member, has been REMOVED from "+d.selectedChapter.text+" by "+a.changedBy+".":b.msg+=a.userName+", as a scondary member,  has LEFT "+d.selectedChapter.text+".",c.push(b)}),d.currentLog=c.reverse()}}]),angular.module("ohanaApp").controller("DonorsCtrl",["$scope","$uibModalInstance","Api",function(a,b,c){"use strict";a.popup={opened:!1},a.format="MM/yyyy",a.dateOptions={maxDate:new Date,startingDay:0,showWeeks:!1},a.open=function(){a.popup.opened=!0},a.cancel=function(){b.dismiss("cancel")},a.donate=function(){b.dismiss("cancel")}}]),angular.module("ohanaApp").controller("EventaddinventoryCtrl",["$scope","$location","$uibModalInstance","Api",function(a,b,c,d){"use strict";a.popup={opened:!1},a.open=function(){a.popup.opened=!0},a.cancel=function(){c.dismiss("cancel")}}]),angular.module("ohanaApp").controller("EventaddparticipantsCtrl",["$scope","$location","$uibModalInstance","Api",function(a,b,c,d){"use strict";a.popup={opened:!1},a.open=function(){a.popup.opened=!0},a.cancel=function(){c.dismiss("cancel")}}]),angular.module("ohanaApp").controller("EventaddvolunteersCtrl",["$scope","$location","$uibModalInstance","Api",function(a,b,c,d){"use strict";a.popup={opened:!1},a.open=function(){a.popup.opened=!0},a.cancel=function(){c.dismiss("cancel")}}]),angular.module("ohanaApp").controller("ManageAdditionalChapters",["selectedUID","$q","commonServices","userService","$scope","$rootScope","$uibModalInstance","howLogService",function(a,b,c,d,e,f,g,h){"use strict";e.initialize=function(){if(e.submitFlag=!1,e.userChapters=[],e.chapters=[],e.regions=f.siteData.regionsChapters,e.chaptersRemoved=[],e.chaptersAdded=[],a){var g=c.getData("/userData/"+a);b.all([g]).then(function(a){e.userData=a[0],_.each(e.userData.Chapters,function(a){
e.userChapters.push(a)})})}else e.userData=d.getUserData(),_.each(e.userData.Chapters,function(a){e.userChapters.push(a)})},e.cancel=function(){g.dismiss("cancel"),f.$broadcast("modalClosing")},e.regionUpdate=function(a){_.each(e.regions,function(b){a.value===b.value&&(e.chapters=b.chapters)})},e.addChapter=function(){var a=!0,b={region:e.newRegion.value,chapter:e.newChapter.value};_.each(e.userChapters,function(b){b.chapter===e.newChapter.value&&(a=!1)}),a?(console.log("hererererere"),e.userChapters.push(b),e.chaptersAdded.push(b.chapter),e.chaptersRemoved=_.filter(e.chaptersRemoved,function(a){return a!==b.chapter}),e.submitFlag=!0):swal("error",e.newChapter.value+" has already been added to secondary chapters...","error")},e.updateChapters=function(){if(a){var i=c.getData("/userData/"+a),j=!0;b.all([i]).then(function(b){e.userChapters=_.each(e.userChapters,function(a){delete a.$$hashKey}),_.each(e.userChapters,function(a){return a.chapter===b[0].Chapter?void(j=!1):void 0}),j?(h.logSecondaryChapterChange(b[0].name.first+" "+b[0].name.last,d.getUserName(),e.chaptersRemoved,e.chaptersAdded),h.logUserAddedToSecondaryChapter(b[0].name.first+" "+b[0].name.last,d.getUserName(),e.chaptersAdded),h.logUserRemovedFromSecondaryChapter(b[0].name.first+" "+b[0].name.last,d.getUserName(),e.chaptersRemoved),c.updateData("/userData/"+a+"/Chapters/",e.userChapters),g.dismiss("cancel"),f.$broadcast("modalClosing"),swal("Success","Region/Chapter updated successfully!","success")):swal("Error","User already has "+b[0].Chapter+" as their PRIMARY CHAPTER, please remove before submitting changes...","error")})}else{var k=d.getId(),l=d.getUserData(),m=(d.getChapter(),d.getUserName()),j=!0;e.userChapters=_.each(e.userChapters,function(a){delete a.$$hashKey}),_.each(e.userChapters,function(a){return a.chapter===d.getChapter()?void(j=!1):void 0}),j?(h.logSecondaryChapterChange(m,!1,e.chaptersRemoved,e.chaptersAdded),h.logUserAddedToSecondaryChapter(m,!1,e.chaptersAdded),h.logUserRemovedFromSecondaryChapter(m,!1,e.chaptersRemoved),c.updateData("/userData/"+k+"/Chapters/",e.userChapters),l.Chapters=e.userChapters,d.setUserData(l),g.dismiss("cancel"),f.$broadcast("updateProfile",!0),swal("Success","Region/Chapter updated successfully!","success")):swal("Error","User already has "+d.getChapter()+" as their PRIMARY CHAPTER, please remove before submitting changes...","error")}},e.removeChapter=function(){e.userChapters=_.filter(e.userChapters,function(a){return a.chapter!==e.currentChapter[0].chapter}),e.chaptersAdded=_.filter(e.chaptersAdded,function(a){return a!==e.currentChapter[0].chapter}),e.chaptersRemoved.push(e.currentChapter[0].chapter),e.submitFlag=!0}}]),angular.module("ohanaApp").controller("GiveFeedbackCtrl",["$rootScope","$q","userService","commonServices","$scope","$uibModalInstance","$http",function(a,b,c,d,e,f,g){"use strict";function h(){this.length=8,this.timestamp=+new Date;var a=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};this.generate=function(){for(var b=this.timestamp.toString(),c=b.split("").reverse(),d="",e=0;e<this.length;++e){var f=a(0,c.length-1);d+=c[f]}return d}}e.userData=c.getUserData(),e.currentUID=c.getId(),e.currentUserRole=c.getRole(),e.types=[{text:"Bug/Defect",value:0},{text:"Suggestion",value:1},{text:"Other",value:2}],e.formData={},e.cancel=function(){f.dismiss("cancel")},e.submitForm=function(){var a="f70b9385361218ae4f2ef50a901ff90b3b4b85c3ef115f36ddf622d2bf9cff1a",b="e5e1f0d0fe9a2f2b5e0aadc6d6043362",c=["597e7d0bd105b5a5f55f078e","597e7d139d6f8e93b416ddb9","597e7d16846e10110c114d7f"],d=e.formData.type.value,i=new h,j=i.generate(),k="name="+encodeURIComponent(e.formData.type.text)+"%20"+j.toString()+"&desc="+encodeURIComponent(e.formData.description+"\n\nEmail: "+e.userData.email+"\nUID: "+e.currentUID+"\nName: "+e.userData.name.first+" "+e.userData.name.last+"\nChapter: "+e.userData.Chapter.text+"\nRole: "+e.currentUserRole);g({method:"POST",url:"https://api.trello.com/1/cards?idList="+encodeURIComponent(c[d])+"&key="+b+"&token="+a,data:k,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){console.log(a)}),f.dismiss("cancel"),swal("Success","Feedback Successfully sent!","success")}}]),angular.module("ohanaApp").controller("ManageParticipantsCtrl",["event","$rootScope","$q","commonServices","$scope","$uibModalInstance",function(a,b,c,d,e,f){"use strict";e.rows_selected=[],e.event=a,e.new_row={key:"",name:{first:"",last:""},email:"",phone:""},e.addParticipant=function(a,b){a||swal("Oops...","The email field is required.","error"),a=a.trim(),d.getUserByEmail(a).then(function(c){if(c){var f;_.each(c,function(a,b){f=b,c[b].key=b}),d.getUserByEmailAtPath(a,"/events/"+b+"/participants").then(function(g){g?(swal("Oops...","That participant has already been added","error"),e.reloadData()):d.getUserByEmailAtPath(a,"/events/"+b+"/volunteers").then(function(a){if(a){var g=Object.keys(a)[0];d.removeData("/events/"+b+"/volunteers/"+g)}d.pushData("/events/"+b+"/participants",c[f]),e.reloadData()})})}else d.getUserByEmailAtPath(a,"/events/"+b+"/participants").then(function(a){console.log(a),a?(swal("Oops...","That guest has already been added","error"),e.reloadData()):e.new_row.name.first&&e.new_row.name.last&&e.new_row.email&&e.new_row.phone?(d.pushData("/events/"+e.event.key+"/participants",e.new_row),swal("Success","The guest has been added successfully!","success"),e.reloadData()):(swal("Oops...","First name, Last name, email, and phone is required to register a guest","error"),e.reloadData())}),e.reloadData()},function(a){swal("Oops...","Unknown Error","error"),e.reloadData()})},e.reloadData=function(){d.getData("/events/"+e.event.key+"/participants").then(function(a){e.event.participants=a,e.buildTable()})},e.deleteParticipants=function(){e.rows_selected.forEach(function(a,b){d.removeData("/events/"+e.event.key+"/participants/"+a)}),e.reloadData()},e.buildTable=function(){var a=[];e.event.participants?Object.keys(e.event.participants).forEach(function(b,c){e.event.participants[b].key=b,a.push(e.event.participants[b])}):[];console.log("the dataset is ",a),e.currId="",e.checkedBoxes=[],angular.element(document).ready(function(){$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={type:"PUT"},$.fn.DataTable.isDataTable($("#participantsTable"))&&(e.participantsTable.destroy(),console.log("inside the destroy")),e.participantsTable=$("#participantsTable").DataTable({data:a,columns:[{title:"KEY",data:"key"},{title:"First Name",data:"name.first"},{title:"Last Name",data:"name.last"},{title:"Email",data:"email",orderable:!1},{title:"Mobile #",data:"phone",orderable:!1}],columnDefs:[{targets:0,searchable:!1,orderable:!1,className:"dt-body-center",render:function(){return'<input type="checkbox" class="participantsTable-select">'}}],order:[[1,"desc"]],headerCallback:function(a){},rowCallback:function(a,b,c){var d=b[0];-1!==$.inArray(d,e.rows_selected)&&($(a).find('input[type="checkbox"]').prop("checked",!0),$(a).addClass("selected"))},drawCallback:function(a){$(".participantsTable-select").on("click",function(a){var b=$(this).closest("tr"),c=e.participantsTable.row(b).data(),d=c.key,f=$.inArray(d,e.rows_selected);this.checked&&-1===f?e.rows_selected.push(d):this.checked||-1===f||e.rows_selected.splice(f,1),this.checked?b.addClass("selected"):b.removeClass("selected"),e.$apply(),a.stopPropagation()})}}),console.log(e.participantsTable)})},e.cancel=function(){f.dismiss("cancel")}}]),angular.module("ohanaApp").controller("ManageVolunteersCtrl",["event","$rootScope","$q","commonServices","$scope","$uibModalInstance",function(a,b,c,d,e,f){"use strict";e.rows_selected=[],e.event=a,e.email,e.addVolunteer=function(a,b){a=a.trim(),d.getUserByEmail(a).then(function(c){if(c){var f;_.each(c,function(a,b){f=b,c[b].key=b}),d.getData("userRoles/"+f).then(function(g){"Participant"!==g.role?d.getUserByEmailAtPath(a,"/events/"+b+"/volunteers").then(function(g){console.log(g),g?swal("Oops...","That volunteer has already been added","error"):d.getUserByEmailAtPath(a,"/events/"+b+"/participants").then(function(a){if(a){var g=Object.keys(a)[0];d.removeData("/events/"+b+"/participants/"+g)}d.pushData("/events/"+b+"/volunteers",c[f]),e.reloadData()})}):swal("Oops...","User not authorized to be added as a volunteer.","error")})}else swal("Oops...","That user doesn't exists","error"),e.reloadData()},function(a){swal("Oops...","Unknown Error","error"),e.reloadData()})},e.reloadData=function(){d.getData("/events/"+e.event.key+"/volunteers").then(function(a){e.event.volunteers=a,e.buildTable()})},e.deleteVolunteers=function(){e.rows_selected.forEach(function(a,b){d.removeData("/events/"+e.event.key+"/volunteers/"+a)}),e.reloadData()},e.buildTable=function(){var a=[];e.event.volunteers?Object.keys(e.event.volunteers).forEach(function(b,c){e.event.volunteers[b].key=b,a.push(e.event.volunteers[b])}):[];e.currId="",e.checkedBoxes=[],angular.element(document).ready(function(){$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={type:"PUT"},$.fn.DataTable.isDataTable($("#volunteersTable"))&&(e.volunteersTable.destroy(),console.log("inside the destroy")),e.volunteersTable=$("#volunteersTable").DataTable({data:a,columns:[{title:"KEY",data:"key"},{title:"Email",data:"email",orderable:!1},{title:"First Name",data:"name.first"},{title:"Last Name",data:"name.last"},{title:"Mobile #",data:"phone",orderable:!1}],columnDefs:[{targets:0,searchable:!1,orderable:!1,className:"dt-body-center",render:function(){return'<input type="checkbox" class="volunteersTable-select">'}}],order:[[1,"desc"]],headerCallback:function(a){},rowCallback:function(a,b,c){var d=b[0];-1!==$.inArray(d,e.rows_selected)&&($(a).find('input[type="checkbox"]').prop("checked",!0),$(a).addClass("selected"))},drawCallback:function(a){$(".volunteersTable-select").on("click",function(a){var b=$(this).closest("tr"),c=e.volunteersTable.row(b).data(),d=c.key,f=$.inArray(d,e.rows_selected);this.checked&&-1===f?e.rows_selected.push(d):this.checked||-1===f||e.rows_selected.splice(f,1),this.checked?b.addClass("selected"):b.removeClass("selected"),e.$apply(),a.stopPropagation()})}}),console.log(e.volunteersTable)})},e.cancel=function(){f.dismiss("cancel")}}]),angular.module("ohanaApp").controller("ManageAdditionalChapters",["selectedUID","$q","commonServices","userService","$scope","$rootScope","$uibModalInstance","howLogService",function(a,b,c,d,e,f,g,h){"use strict";e.initialize=function(){if(e.submitFlag=!1,e.userChapters=[],e.chapters=[],e.regions=f.siteData.regionsChapters,e.chaptersRemoved=[],e.chaptersAdded=[],a){var g=c.getData("/userData/"+a);b.all([g]).then(function(a){e.userData=a[0],_.each(e.userData.Chapters,function(a){e.userChapters.push(a)})})}else e.userData=d.getUserData(),_.each(e.userData.Chapters,function(a){e.userChapters.push(a)})},e.cancel=function(){g.dismiss("cancel"),f.$broadcast("modalClosing")},e.regionUpdate=function(a){_.each(e.regions,function(b){a.value===b.value&&(e.chapters=b.chapters)})},e.addChapter=function(){var a=!0,b={region:e.newRegion.value,chapter:e.newChapter};_.each(e.userChapters,function(b){b.chapter.key===e.newChapter.key&&(a=!1)}),a?(e.userChapters.push(b),e.chaptersAdded.push(b.chapter),e.chaptersRemoved=_.filter(e.chaptersRemoved,function(a){return a!==b.chapter}),e.submitFlag=!0):swal("error",e.newChapter.value+" has already been added to secondary chapters...","error")},e.updateChapters=function(){if(a){var h=c.getData("/userData/"+a),i=!0;b.all([h]).then(function(b){e.userChapters=_.each(e.userChapters,function(a){delete a.$$hashKey}),_.each(e.userChapters,function(a){return a.chapter===b[0].Chapter?void(i=!1):void 0}),i?(e.userChapters=_.each(e.userChapters,function(a){delete a.$$hashKey,delete a.chapter.$$hashKey}),c.updateData("/userData/"+a+"/Chapters/",e.userChapters),g.dismiss("cancel"),f.$broadcast("modalClosing"),swal("Success","Region/Chapter updated successfully!","success")):swal("Error","User already has "+b[0].Chapter+" as their PRIMARY CHAPTER, please remove before submitting changes...","error")})}else{var j=d.getId(),k=d.getUserData(),i=(d.getChapter(),d.getUserName(),!0);_.each(e.userChapters,function(a){return a.chapter===d.getChapter()?void(i=!1):void 0}),i?(e.userChapters=_.each(e.userChapters,function(a){delete a.$$hashKey,delete a.chapter.$$hashKey}),c.updateData("/userData/"+j+"/Chapters/",e.userChapters),k.Chapters=e.userChapters,d.setUserData(k),g.dismiss("cancel"),f.$broadcast("updateProfile",!0),swal("Success","Region/Chapter updated successfully!","success")):swal("Error","User already has "+d.getChapter()+" as their PRIMARY CHAPTER, please remove before submitting changes...","error")}},e.removeChapter=function(){e.userChapters=_.filter(e.userChapters,function(a){return a.chapter!==e.currentChapter[0].chapter}),e.chaptersAdded=_.filter(e.chaptersAdded,function(a){return a!==e.currentChapter[0].chapter}),e.chaptersRemoved.push(e.currentChapter[0].chapter),e.submitFlag=!0}}]),angular.module("ohanaApp").controller("ManageRoleChangeRequestCtrl",["$q","commonServices","userService","$scope","$rootScope","$location","$uibModalInstance",function(a,b,c,d,e,f,g){"use strict";d.update=function(){var e=b.getData("/roleChangeRequests/"),f=b.getData("/userData/"),g=c.getRole(),h=c.getUserData();d.declined_requests=[],d.approved_requests=[],d.pending_requests=[],d.alertPending=!1,d.pendingCount=0,a.all([e,f]).then(function(a){d.requests=[],_.each(a[0],function(b,c){"National Staff"===g?(b.key=c,d.filterRequests(b)):_.each(a[1],function(a,e){b.uid!==e||a.Chapter!==h.Chapter||"Participant"!==b.request_role&&"Volunteer"!==b.request_role&&"Chapter Lead"!==b.request_role||(b.key=c,d.filterRequests(b))})}),console.log(d.requests)})},d.declined=function(a,e){var f=c.getId();e.uid!==f?swal({title:"Reason for approval?",input:"text",showCancelButton:!0,confirmButtonText:"Submit"}).then(function(f){if(""===f)swal("Alert","Declining request requires a comment...","error");else{var g=Date.now();delete e.key,delete e.$$hashKey,e.reviewer=c.getUserName(),e.reviewers_comment=f,e.request_updated=g,e.request_closed=g,e.request_status="Declined",b.updateData("/roleChangeRequests/"+a,e),d.update(),swal("Declined","Role change was declined!","success")}},function(a){"cancel"===a&&swal("Cancelled","No change made to request","error")}):swal("Alert","You cannot decline your own requests...","error")},d.approved=function(a,e){var f=c.getId();e.uid!==f?swal({title:"Reason for approval?",input:"text",showCancelButton:!0,confirmButtonText:"Submit"}).then(function(f){if(""===f)swal("Alert","Approval requires a comment...","error");else{var g=Date.now();delete e.key,delete e.$$hashKey,e.reviewer=c.getUserName(),e.reviewers_comment=f,e.request_updated=g,e.request_closed=g,e.request_status="Approved",b.updateData("/roleChangeRequests/"+a,e),b.updateData("/userRoles/"+e.uid+"/role/",e.request_role),d.update(),swal("Approved","Role change was approved!","success")}},function(a){"cancel"===a&&swal("Cancelled","No change made to request","error")}):swal("Alert","You cannot approve your own requests...","error")},d.cancel=function(){g.dismiss("cancel"),e.$broadcast("modalClosing")},d.filterRequests=function(a){switch(a.request_status){case"Approved":d.approved_requests.push(a);break;case"Declined":d.declined_requests.push(a);break;default:d.pending_requests.push(a),d.alertPending=!0,d.pendingCount=d.pending_requests.length}}}]),angular.module("ohanaApp").controller("NewEventFormCtrl",["$q","$scope","$uibModalInstance","commonServices","$rootScope",function(a,b,c,d,e){"use strict";b.format="MM/dd/yyyy",b.startpopup={opened:!1},b.startopen=function(){b.startpopup.opened=!0},b.startDateOptions={maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1,showWeeks:!1},b.endpopup={opened:!1},b.endopen=function(){b.endpopup.opened=!0},b.endDateOptions={maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1,showWeeks:!1},b.today=function(){var a=new Date;b.st=a,b.et=a},b.today(),b.states=[{value:"upcoming-open",displayName:"upcoming-open"},{value:"upcoming-closed",displayName:"upcoming-closed"},{value:"in-session",displayName:"in-session"},{value:"past",displayName:"past"}],b.newEvent={},b.postEvent=function(){b.newEvent.startTime=b.st.getTime(),b.newEvent.endTime=b.et.getTime(),b.initiator=e.userId;var f=d.pushData("/events/",b.newEvent);a.all([f]).then(function(a){a[0]?(console.log(a[0]),c.close(),swal({text:"Adding Event",type:"success",timer:2500})):swal({text:"Something happened....",type:"error",timer:2500})})},b.cancel=function(){c.dismiss("cancel")},angular.element(document).ready(function(){$("#phonenum").mask("(999)999-9999")})}]),angular.module("ohanaApp").controller("NewItemInventoryFormCtrl",["$scope","$uibModalInstance","Api",function(a,b,c){"use strict";a.popup={opened:!1},a.format="MM/dd/yyyy",a.dateOptions={maxDate:new Date,startingDay:0,showWeeks:!1},a.open=function(){a.popup.opened=!0},a.categories=[{value:"kayaks_and_equip",displayName:"Kayaks and Equipment"},{value:"fishing_equip",displayName:"Fishing Equipment"},{value:"safety",displayName:"Safety and PFDs"},{value:"event_support",displayName:"Event Support"},{value:"chapter_support",displayName:"Chapter Support"},{value:"misc",displayName:"Misc"}],a.conditions=[{value:"new",displayName:"New"},{value:"good",displayName:"Good"},{value:"fair",displayName:"Fair"},{value:"poor",displayName:"Poor"},{value:"broken",displayName:"Broken"}],a.newItem={},a.postUser=function(){a.newItem.chapter=$("#chapter :selected").val(),null==a.newItem.name_of_item||null==a.newItem.category||null==a.newItem.condition||null==a.newItem.chapter?(console.log(a.newItem),console.log("ERROR"),swal({text:"Form incomplete!",type:"warning",timer:2500})):(console.log(a.newItem),console.log("SUCCESS"),c.member.save(a.newItem).$promise.then(function(a){swal({text:"User added!",type:"success",timer:2500}),b.close()},function(a){swal({text:"Error submitting data. Please try again",type:"error",timer:2500})}))},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("ohanaApp").controller("NewUserDirectoryFormCtrl",["$rootScope","$q","commonServices","$scope","$uibModalInstance","howLogService","userService",function(a,b,c,d,e,f,g){"use strict";d.initialize=function(){d.popup={opened:!1},d.format="MM/dd/yyyy",d.datePattern="([0][1-9]|[1][0-2])[- /.]([0][1-9]|[1-2][0-9]|[3][0-1])[- /.](19|20)dd",d.chapters=[],d.regions=a.siteData.regions,d.states=a.siteData.states,d.branches=["N/A","Firefighter","Police","EMS"],d.newUserDirectory={gender:"N/A",branch:"N/A",years:0,service_type:!1,volunteer:!1},d.dateOptions={maxDate:new Date(2020,5,22),minDate:new Date(1900,5,22),showWeeks:!1,startingDay:1},$("#phonenum").mask("(999)999-9999"),$("#sanicDOB").mask("99/99/9999"),$("#Zip").mask("99999")},d.setDefault=function(){d.newUserDirectory.branch="N/A",d.newUserDirectory.years=0},d.open=function(){d.popup.opened=!0},d.regionUpdate=function(){var b=d.newUserDirectory.region.text,c=_.filter(a.siteData.regionsChapters,function(a){return a.value===b});d.chapters=c[0].chapters},d.ZipUpdate=function(){c.addressLookup(d.newUserDirectory.address.zip,function(a){1==a.success&&(console.log("zip success"),d.locationUpdate(a.results))})},d.locationUpdate=function(a){var b=this;c.zipCompare(a).then(function(a){d.newUserDirectory.region=a[1],b.regionUpdate();var c=_.filter(d.chapters,function(b){return b.value===a[0]});d.newUserDirectory.chapter=c[0]})},d.postUser=function(a){if(a.$invalid)swal({text:"The form has required fields that are missing data or formatted improperly.",type:"error",customClass:"modal-border"});else{"undefined"==typeof d.newUserDirectory.address.line2&&(d.newUserDirectory.address.line2="");var f={address:{city:d.newUserDirectory.address.city,line1:d.newUserDirectory.address.line1,line2:d.newUserDirectory.address.line2?d.newUserDirectory.address.line2:"none",state:d.newUserDirectory.address.state.name,zip:d.newUserDirectory.address.zip},name:d.newUserDirectory.name,branch:d.newUserDirectory.branch,email:d.newUserDirectory.email,gender:d.newUserDirectory.gender,DOB:d.newUserDirectory.DOB.getTime(),phone:d.newUserDirectory.phone,years:d.newUserDirectory.years,Region:d.newUserDirectory.region.text,Chapter:d.newUserDirectory.chapter,password:d.newUserDirectory.password},h=c.register(f);b.all([h]).then(function(a){a[0]?(swal({text:"User added!",type:"success"}).then(function(){if(d.newUserDirectory.volunteer){var a={uid:g.getId(),name:g.getUserName(),email:g.getUserData().email,current_role:g.getRole(),request_role:"volunteer",user_comment:"none",admin_comment:"",request_status:"pending",request_created:Date.now(),request_updated:Date.now(),request_closed:""};c.pushData("/roleChangeRequests/",a),swal({text:"Request to be Volunteer has been submitted! You can view the status of your request on your profile page.",type:"success"})}}),e.close(),window.location.replace("#/home")):swal({text:"Error submitting data. Please try again",type:"error",timer:2500})})}},d.cancel=function(){e.dismiss("cancel")}}]),angular.module("ohanaApp").controller("passwordResetFormCtrl",["$rootScope","$q","commonServices","$scope","$uibModalInstance",function(a,b,c,d,e){"use strict";d.userEmail={email:""},d.popup={opened:!1},d.open=function(){d.popup.opened=!0},d.cancel=function(){e.dismiss("cancel")},d.resetPassword=function(){var a=c.sendPasswordReset(d.userEmail);b.all([a]).then(function(a){console.log(a),a[0]?(e.dismiss("cancel"),swal("Request sent!","Check your email for instructions to reset your password","success")):swal("Request Failed...","Email does not exist","error")})}}]),angular.module("ohanaApp").controller("PublicEventsDescriptionCtrl",["$scope","$location","$uibModalInstance","$rootScope","userService",function(a,b,c,d,e){"use strict";console.log(e.getUserData(),e.getRole(),d),a.event=a.selected,console.log("In modal"),console.log(a.selected),a.popup={opened:!1},a.open=function(){a.popup.opened=!0},a.cancel=function(){c.dismiss("cancel")},a.postRsvp=function(){c.dismiss("cancel")}}]),angular.module("ohanaApp").controller("RoleRequestChangeFormCtrl",["$rootScope","$q","userService","commonServices","$scope","$uibModalInstance",function(a,b,c,d,e,f){"use strict";e.userData=c.getUserData(),e.currentUID=c.getId(),e.currentUserRole=c.getRole(),e.formData={role:"",comment:""},e.roles=a.siteData.roles,e.cancel=function(){f.dismiss("cancel")},e.submitForm=function(){if(e.formData.role.value){var c=d.getData("/roleChangeRequests/"),g=!0,h="";b.all([c]).then(function(b){if(e.currentUserRole!==e.formData.role.value?_.each(b[0],function(a){a.uid===e.currentUID&&"pending"===a.request_status&&(g=!1,h="You can only have one pending request at a time, you need to wait or delete current pending request...")}):(g=!1,h="You are not allowed to make a request for a role you already have..."),g){var c=Date.now(),i={uid:e.currentUID,name:e.userData.name.first+" "+e.userData.name.last,email:e.userData.email,current_role:e.currentUserRole,request_role:e.formData.role.value,user_comment:e.formData.comment||"none",admin_comment:"",request_status:"pending",request_created:c,request_updated:c,request_closed:""};d.pushData("/roleChangeRequests/",i),a.$broadcast("modalClosing"),f.dismiss("cancel"),swal("Success","Role Change Request created successfully","success")}else swal("Error",h,"error")})}else swal("Error","Role Change Request was not created...","error")}}]),angular.module("ohanaApp").controller("SignEventWaiver",["$scope","$rootScope","$q","commonServices","userService","$uibModalInstance","howLogService","eventKey",function(a,b,c,d,e,f,g,h){"use strict";var i=document;a.updateMediaWaiverTemplate=function(b,c){b.value;a.superObj[b.id]=b.value},a.submitData=function(){a.updateMediaWaiverTemplate(i.getElementById("author_name"),2),a.updateMediaWaiverTemplate(i.getElementById("author_date"),3),a.updateMediaWaiverTemplate(i.getElementById("witness_name"),13),a.updateMediaWaiverTemplate(i.getElementById("witness_date"),14),d.pushData("/userData/"+e.getId()+"/events/"+h,a.superObj),f.dismiss("cancel")},a.superObj={}}]),angular.module("ohanaApp").controller("SignWitnessWaiverCtrl",["$scope","$rootScope","$q","commonServices","userService","$uibModalInstance","howLogService",function(a,b,c,d,e,f,g){"use strict";var h=document;a.updateMediaWaiverTemplate=function(b,c){b.value;a.superObj[b.id]=b.value},a.submitData=function(){a.updateMediaWaiverTemplate(h.getElementById("author_name"),1),a.updateMediaWaiverTemplate(h.getElementById("author_name"),2),a.updateMediaWaiverTemplate(h.getElementById("author_date"),3),a.updateMediaWaiverTemplate(h.getElementById("author_email"),4),a.updateMediaWaiverTemplate(h.getElementById("author_phone"),5),a.updateMediaWaiverTemplate(h.getElementById("author_street"),6),a.updateMediaWaiverTemplate(h.getElementById("author_apt"),7),a.updateMediaWaiverTemplate(h.getElementById("author_city"),8),a.updateMediaWaiverTemplate(h.getElementById("author_state"),9),a.updateMediaWaiverTemplate(h.getElementById("author_zip"),10),a.updateMediaWaiverTemplate(h.getElementById("witness_name"),11),a.updateMediaWaiverTemplate(h.getElementById("witness_date"),12),a.updateMediaWaiverTemplate(h.getElementById("witness_email"),13),a.updateMediaWaiverTemplate(h.getElementById("witness_phone"),14),d.pushData("/userData/"+e.getId()+"/witness",a.superObj),f.dismiss("cancel")},a.superObj={}}]),angular.module("ohanaApp").controller("ExpenseDetailsCtrl",["$firebaseObject","$scope","$route","userService","$routeParams","commonServices","expenseservice","$location","$uibModal","$log","$document","FileUploader",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){b.EditMode=" - EDIT mode",b.checkeditexist(),b.vimageurl=[],b.isdisabled=!1,b.PayStatusLogList=[],b.PayStatusLogList.length=0,b.vImageList=[],b.vImageList.length=0;for(var a=0;a<b.vImageList.length;a++)null!=b.vImageList[a]&&delete b.vImageList[a].$$hashKey;b.expense=g.getEditExpenseData(e.BillId),b.expense.$loaded().then(function(){var a=b.expense[0].SubmitAddress.split(",");a.forEach(function(a,b,c){""==a.trim()?c.splice(b,1):c[b]=a.replace(/\s+$/,"")}),b.expense[0].SubmitAddress=a.join(","),angular.forEach(b.expense,function(a){var c=(document.createElement("img"),firebase.storage(),firebase.storage().ref());switch(b.paystat=a.PaymentStatus,b.expenseemail=a.email,b.OverageDisable=!1,"Over Age"==a.PaymentStatus?(swal("Overage Expense - Not editable! ","","error"),b.OverageDisable=!0,b.EditMode=" - READ-ONLY"):(b.OverageDisable=!1,b.EditMode=" - EDIT "),b.useremail!=b.expenseemail&&(b.EditMode=" - READ-ONLY",b.OverageDisable=!0),b.paystatuslist=[],b.userRole){case"Participant":case"Volunteer":if("Pending"==a.PaymentStatus||"Submitted"==a.PaymentStatus||"Returned"==a.PaymentStatus||"Paid"==a.PaymentStatus||"Paid"==a.PaymentStatus||"Over Age"==a.PaymentStatus){b.OverageDisable=!0,b.EditMode=" - READ-ONLY mode";break}("Edit"==a.PaymentStatus||"ReSubmit"==a.PaymentStatus)&&(b.OverageDisable=!1,b.EditMode=" - EDIT mode");break;case"Chapter Lead":("Pending"==a.PaymentStatus||"Submitted"==a.PaymentStatus)&&(b.paystatuslist=[{name:"Pending",value:"Pending"},{name:"Submitted",value:"Submitted"},{name:"Resubmit",value:"Resubmit"},{name:"Over Age",value:"Over Age"}]),("Returned"==a.PaymentStatus||"Resubmit"==a.PaymentStatus)&&(b.paystatuslist=[{name:"Returned",value:"Returned"},{name:"Resubmit",value:"Resubmit"},{name:"Over Age",value:"Over Age"}]),b.useremail==b.expenseemail||"Pending"!=a.PaymentStatus&&"Returned"!=a.PaymentStatus||(b.EditMode=" - PAYMENT STATUS UPDATE ONLY",b.OverageDisable=!0),(b.useremail==b.expenseemail&&"Edit"==a.PaymentStatus||"Returned"==a.PaymentStatus)&&(b.EditMode=" - EDIT mode",b.OverageDisable=!1),b.useremail==b.expenseemail&&"Submitted"==a.PaymentStatus&&(b.EditMode=" - READ-ONLY",b.OverageDisable=!0),("Paid"==a.PaymentStatus||"Over Age"==a.PaymentStatus)&&(b.EditMode=" - READ-ONLY",b.OverageDisable=!0);break;case"National Staff":("Submitted"==a.PaymentStatus||"Returned"==a.PaymentStatus)&&(b.paystatuslist=[{name:"Submitted",value:"Submitted"},{name:"Returned",value:"Returned"},{name:"Paid",value:"Paid"},{name:"Over Age",value:"Over Age"}]),b.useremail!=b.expenseemail&&"Submitted"==a.PaymentStatus&&(b.EditMode=" - PAYMENT STATUS UPDATE ONLY",b.OverageDisable=!0),b.useremail!=b.expenseemail||"Edit"!=a.PaymentStatus&&"Returned"!=a.PaymentStatus||(b.EditMode=" - EDIT mode",b.OverageDisable=!1),b.useremail==b.expenseemail&&"Submitted"==a.PaymentStatus&&(b.EditMode=" - READ-ONLY",b.OverageDisable=!0),("Paid"==a.PaymentStatus||"Over Age"==a.PaymentStatus)&&(b.EditMode=" - READ-ONLY",b.OverageDisable=!0)}b.vimageurl=a.ImageURL;var d=0;b.LineDetails=[];for(var e=b.LineDetails.length;e>0;e--)b.LineDetails.pop();if(b.TotalLineCost=0,a.Line.length){for(var e=0,f=0;f<a.Line.length;f++)f>1&&(d+=parseFloat(a.Line[f].Amount),b.LineDetails.push({Description:a.Line[f].Description,Amount:parseFloat(a.Line[f].Amount)}));b.TotalLineCost=d,b.$applyAsync()}for(var f=0;f<b.LineDetails.length;f++)null!=b.LineDetails[f]&&delete b.LineDetails[f].$$hashKey;if(a.PaymentLog.length)for(var f=0;f<a.PaymentLog.length;f++)b.PayStatusLogList.push({PayStatus:a.PaymentLog[f].PayStatus,PayStatusBy:a.PaymentLog[f].PayStatusBy,PayStatusDate:a.PaymentLog[f].PayStatusDate,PayRole:a.PaymentLog[f].PayRole,PayStatusDescription:a.PaymentLog[f].PayStatusDescription});if(a.ImageURL){b.vImageList=[];var g="";b.vImageList.length=0;for(var e=0;e<a.ImageURL.length;e++)g=a.ImageURL[e].FileName,c.child(g).getDownloadURL().then(function(a){b.vImageList.push({ID:e,ImageSrc:a,ImageName:g}),b.$applyAsync()})["catch"](function(a){console.log("Image Source url - error",a)})}})})}b.expense={},b.expense=g.expense,b.userRole=d.getRole(),b.userName=d.getUserData(),b.useremail=f.getCurrentUserEmail(),b.formModel={};var n=(b.uploader=new l({}),console.log);if(b.openPaymentStatusLog=function(){b.$modalInstance=i.open({scope:b,templateUrl:"myModalContent.html",size:"lg"})},b.ok=function(){b.$modalInstance.close()},b.cancel=function(){b.$modalInstance.dismiss("cancel")},b.checkeditexist=function(){b.editExpenseList=g.getEditStatusrec();var a=0;b.iseditexist="false",b.editExpenseList.$loaded().then(function(){angular.forEach(b.editExpenseList,function(c){c.email==b.useremail&&"false"==b.iseditexist&&(a+=1,b.iseditexist="true")})})},b.checkeditexist(),b.LineDetails=[],b.LineDetails.length=0,b.LineDetails.length){for(var o=b.LineDetails.length;o>0;o--)b.LineDetails.pop();b.LineDetails.length=0,b.LineDetails=g.LineDetails,b.LineDetails=[{Description:"",Amount:0}]}b.addNew=function(a){b.expenseemail==b.useremail&&b.LineDetails.push({Description:"",Amount:0})},b.remove=function(){var a=[];b.selectedAll=!1,angular.forEach(b.LineDetails,function(b){b.selected||a.push(b)}),b.LineDetails=a},b.checkAll=function(){b.selectedAll?b.selectedAll=!1:b.selectedAll=!0,angular.forEach(b.LineDetails,function(a){a.selected=b.selectedAll})},b.lineAmountChange=function(){var a=0;if(b.LineDetails.length)for(var c=0;c<b.LineDetails.length;c++)a+=parseFloat(b.LineDetails[c].Amount);b.TotalLineCost=a,b.$applyAsync()},b.GoBack=function(){h.path("/expense/viewexpense")},b.viewImage=function(a){window.open(a,"Expense Image - "+e.BillId,"height=600,width=400")},b.removeImage=function(a){n("hi");var c=b.vimageurl[a].FileName;swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){g.deleteImage(c,b.vimageurl),b.fiximagearray(c)},function(a){"cancel"===a&&swal("Image Delete Cancelled","Your supporting document file is safe","error")})},b.fiximagearray=function(a){var d=[];if(void 0!==b.vimageurl)for(var e=0;e<b.vimageurl.length;e++)b.vimageurl[e].FileName!=a&&d.push(b.vimageurl[e]);b.vimageurl=d,b.updateImageInfo(),m(),c.reload()},b.updateImageInfo=function(){var a={ImageURL:[]},c=0;if(void 0!==b.vimageurl?c=b.vimageurl.length:(b.vimageurl=[],b.vimageurl.length=0),
void 0!==b.uploader&&b.uploader.queue.length>0)for(var d=0;d<b.uploader.queue.length;d++)imagefilename="images/"+e.BillId+"_"+b.uploader.queue[d].file.name,b.vimageurl.push({FileName:imagefilename,ID:d+1+c,ImageUrlLocation:""});a.ImageURL=b.vimageurl;var f=firebase.database().ref("expense/").orderByChild("BillId").equalTo(e.BillId);f.on("child_added",function(b){b.val();firebase.database().ref("expense/"+b.key).update(a)})},b.getImageURL=function(c){var d=firebase.database().ref("expense/");b.spaedServ=a(d),b.url=d.once("value").then(function(a){var d=a.val().foto;console.log("Inside image ",d);var e=firebase.storage().ref();return e.child(c).getDownloadURL().then(function(a){return b.returnurl=a,a})["catch"](function(a){})})},b.deleteexp=function(){var a=e.BillId,a=e.BillId;console.log("Data Delete Request SWAL ",e.BillId),swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){g.deleteExpense(a),swal("Deleted!","Your file has been deleted.","success"),h.path("/expense/viewexpense")},function(a){"cancel"===a&&swal("Cancelled","Your expense is safe","error")})},b.setexpensedata=function(a){var c=b.expense[0].Line[0].Quantity*b.expense[0].Line[0].Rate+b.expense[0].Line[1].Quantity*b.expense[0].Line[1].Rate,d=b.userName.name.first+" "+b.userName.name.last,f=new Date,h="";if(h=f.getHours()>12?f.getFullYear()+"-"+("0"+(f.getMonth()+1)).slice(-2)+"-"+("0"+f.getDate()).slice(-2)+" "+("0"+(f.getHours()-12)).slice(-2)+":"+("0"+f.getMinutes()).slice(-2)+":"+("0"+f.getSeconds()).slice(-2)+" PM":f.getFullYear()+"-"+("0"+(f.getMonth()+1)).slice(-2)+"-"+("0"+f.getDate()).slice(-2)+" "+("0"+f.getHours()).slice(-2)+":"+("0"+f.getMinutes()).slice(-2)+":"+("0"+f.getSeconds()).slice(-2)+" AM","update"==a)switch(b.paystat){case"Resubmit":b.paystat="Pending",b.PayStatusLogList.push({PayStatus:"Pending",PayStatusBy:d,PayStatusDate:h,PayRole:b.userRole,PayStatusDescription:"Resending expense with fixes"});break;case"Returned":b.paystat="Submitted",b.PayStatusLogList.push({PayStatus:"Submitted",PayStatusBy:d,PayStatusDate:h,PayRole:b.userRole,PayStatusDescription:"Resending expense with fixes"})}else switch(b.userRole){case"Participant":case"Volunteer":b.paystat="Pending",b.PayStatusLogList.push({PayStatus:"Pending",PayStatusBy:d,PayStatusDate:h,PayRole:b.userRole,PayStatusDescription:"Saved expense submitted to Chapter Lead"});break;case"Chapter Lead":case"National Staff":b.paystat="Submitted",b.PayStatusLogList.push({PayStatus:"Submitted",PayStatusBy:d,PayStatusDate:h,PayRole:b.userRole,PayStatusDescription:"Saved expense submitted to National Staff"})}for(var i=0;i<b.PayStatusLogList.length;i++)null!=b.PayStatusLogList[i]&&delete b.PayStatusLogList[i].$$hashKey;var j={Description:b.expense[0].Description,Amount:c,PaymentStatus:b.paystat,PaymentLog:b.PayStatusLogList,Line:[{ID:"0",Description:b.expense[0].Line[0].Description,Quantity:b.expense[0].Line[0].Quantity,Rate:b.expense[0].Line[0].Rate,Amount:b.expense[0].Line[0].Quantity*b.expense[0].Line[0].Rate},{ID:"1",Description:b.expense[0].Line[1].Description,Quantity:b.expense[0].Line[1].Quantity,Rate:b.expense[0].Line[1].Rate,Amount:b.expense[0].Line[1].Quantity*b.expense[0].Line[1].Rate}],ImageURL:[]},k=0;if(void 0!==b.vimageurl?k=b.vimageurl.length:(b.vimageurl=[],b.vimageurl.length=0),void 0!==b.uploader&&b.uploader.queue.length>0)for(var i=0;i<b.uploader.queue.length;i++)l="images/"+e.BillId+"_"+b.uploader.queue[i].file.name,b.vimageurl.push({FileName:l,ID:i+1+k,ImageUrlLocation:""});j.ImageURL=b.vimageurl;var l="",m=0;if(b.LineDetails.length){for(var n=2,i=0;i<b.LineDetails.length;i++)m=parseFloat(m)+parseFloat(b.LineDetails[i].Amount),j.Line.push({ID:n,Description:b.LineDetails[i].Description,Quantity:1,Rate:1,Amount:parseFloat(b.LineDetails[i].Amount)}),n++;j.Amount=c+m}console.log("Update",j,c);var o="";b.uploader.queue.length>0&&(o=g.SaveImageData(e.BillId,b.uploader.queue));var p=firebase.database().ref("expense/").orderByChild("BillId").equalTo(e.BillId);p.on("child_added",function(a){a.val();firebase.database().ref("expense/"+a.key).update(j)})},b.updateexpense=function(a){var c=(e.BillId,this.dexedit.Line[0].Quantity*this.dexedit.Line[0].Rate+this.dexedit.Line[1].Quantity*this.dexedit.Line[1].Rate),d=0;if(b.LineDetails.length)for(var f=0;f<b.LineDetails.length;f++)d=parseFloat(d)+parseFloat(b.LineDetails[f].Amount);c+=d;var g="",i="",j="",k=0;k=void 0===b.vimageurl?b.uploader.queue.length:b.uploader.queue.length+b.vimageurl.length,g=void 0===this.dexedit.Description||0==this.dexedit.Description.length?'<tr><td class="swalred ">Description : </td><td class="swalred "><b>':'<tr><td class="swalgreen ">Description : </td><td class="swalgreen "><b>',i=0==k?'<tr><td class="swalred  ">No. of supporting documents Loaded : </td><td class="swalred  "><b> ':'<tr><td class="swalgreen ">No. of supporting documents Loaded : </td><td class="swalgreen  "><b> ',j=0==c?'<tr><td class="swalred ">Expense Amount : </td><td class="swalred "><b>$ ':'<tr><td class="swalgreen ">Expense Amount : </td><td class="swalgreen "><b>$ ',"submit"==a?void 0===this.dexedit.Description||0==this.dexedit.Description.length||0==k||0==c?swal({title:"Required fields Missing",type:"error",html:'<table><tr><td class="swalgreen ">Event Date : </td><td class="swalgreen "><b>'+this.dexedit.eventdate+"</b> </td></tr>"+g+this.dexedit.Description+"</td></tr> "+i+k+"</b></td> </tr> "+j+c+"</b></td></tr></table>"}):swal({title:"Confirm New Expense",text:"Created Expense will be reviewed!",type:"info",html:'<table><tr><td class="swaltdl ">Event Date : </td><td class="swalgreen "><b>'+this.dexedit.eventdate+'</b> </td></tr><tr><td class="swaltdl ">Description : </td><td class="swalgreen "><b>'+this.dexedit.Description+'</td></tr> <tr><td class="swaltdl ">Miles Amount : </td><td class="swalgreen "><b>$ '+Math.round(this.dexedit.Line[0].Quantity*this.dexedit.Line[0].Rate*100)/100+'</b></td></tr><tr><td class="swaltdl ">Trailer Mileage Amount : </td><td class="swalgreen "><b>$ '+Math.round(this.dexedit.Line[1].Quantity*this.dexedit.Line[1].Rate*100)/100+'</b></td></tr><tr><td class="swaltdl ">Other Expense Amount : </td><td class="swalgreen "><b>$ '+Math.round(100*d)/100+'</b></td></tr><tr><td class="swaltdl ">Total Expense Amount : </td><td class="swalgreen "><b>$ '+Math.round(100*c)/100+"</b></td></tr></table>",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, create it!"}).then(function(){b.setexpensedata(a),swal("Expense Submitted Successfully!","","success"),h.path("/expense/viewexpense")}):(b.setexpensedata(a),swal("Expense Successfully Saved!","","success"),h.path("/expense/viewexpense"))},b.RecallExpense=function(a,c,d){e.BillId;console.log("Recall Expense request for  ",e.BillId),"true"==b.iseditexist?swal("Recall not allowed! You have 1 Expense in EDIT status","","info"):swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, recall this expense!"}).then(function(){b.UpdatePaymentStatus(a,c,d),swal("Recalled!","Your expense was recalled.","success"),m()},function(a){"cancel"===a&&swal("Cancelled","Your recall request cancelled","info")})},b.UpdatePaymentStatus=function(a,c,d){console.log("Update Payment Status - ",a,c,d);var e=b.userName.name.first+" "+b.userName.name.last,f=new Date,g="";g=f.getHours()>12?f.getFullYear()+"-"+("0"+(f.getMonth()+1)).slice(-2)+"-"+("0"+f.getDate()).slice(-2)+" "+("0"+(f.getHours()-12)).slice(-2)+":"+("0"+f.getMinutes()).slice(-2)+":"+("0"+f.getSeconds()).slice(-2)+" PM":f.getFullYear()+"-"+("0"+(f.getMonth()+1)).slice(-2)+"-"+("0"+f.getDate()).slice(-2)+" "+("0"+f.getHours()).slice(-2)+":"+("0"+f.getMinutes()).slice(-2)+":"+("0"+f.getSeconds()).slice(-2)+" AM",b.PayStatusLogList.push({PayStatus:c,PayStatusBy:e,PayStatusDate:g,PayRole:b.userRole,PayStatusDescription:d});for(var i=0;i<b.PayStatusLogList.length;i++)null!=b.PayStatusLogList[i]&&delete b.PayStatusLogList[i].$$hashKey;var j={PaymentStatus:c,PaymentLog:b.PayStatusLogList},k=firebase.database().ref("expense").orderByChild("BillId").equalTo(a);k.on("child_added",function(a){a.val();firebase.database().ref("expense/"+a.key).update(j),swal("Payment Status Updated Successfully!","","success")}),"Edit"==c?h.path("/expense/expensedetail/"+a):h.path("expense/viewexpense")},m()}]),angular.module("ohanaApp").controller("NewExpenseCtrl",["$scope","userService","expenseservice","commonServices","$location","$q","FileUploader",function(a,b,c,d,e,f,g){a.exp={},a.exp=c.expense,a.exp.Chapter={},a.exp.email=d.getCurrentUserEmail(),a.exp.SubmitDate="",a.exp.SubmitBy="",a.exp.SubmitAddress="",a.exp.Description="",a.exp.PaymentStatus="Pending",a.exp.ImageURL=[],a.exp.Line[0].Quantity=0,a.exp.Line[0].Rate=.25,a.exp.Line[1].Quantity=0,a.exp.Line[1].Rate=.4,a.exp.Line.length=2,a.expenseconfig=[],a.expenseconfig.length=0,a.checkedOverageDays=function(){d.getData("/Config/Expense").then(function(b){if(b){a.expenseconfig=b;for(var c=0;c<a.expenseconfig.length;c++)Date.parse(j)>=Date.parse(a.expenseconfig[c].startdate)&&Date.parse(j)<=Date.parse(a.expenseconfig[c].enddate)&&(a.exp.Line[0].Rate=a.expenseconfig[c].MileRate,a.exp.Line[1].Rate=a.expenseconfig[c].TrailerRate,a.OverAgeDays=a.expenseconfig[c].OverAgeDays);a.$apply(function(){}),console.log("Overage config ",a.OverAgeDays);var d=(new Date).setDate(j.getDate()-a.OverAgeDays);a.dateOptions={"year-format":"'yyyy'","starting-day":1,minDate:d,maxDate:new Date}}})},a.checkedOverageDays();var h=a.uploader=new g({});h.filters.push({name:"imageFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(c)}}),a.lineamount=0;var i=b.getId();d.getData("/userData/"+i);a.userRole=b.getRole(),a.userName=b.getUserData(),a.userChapter=b.getChapter(),a.useremail=d.getCurrentUserEmail(),a.checkeditexist=function(){var b=0;a.Editlist=c.getViewExpenseData(a.useremail,a.userRole,a.userChapter),a.Editlist.$loaded().then(function(){angular.forEach(a.Editlist,function(c){"Edit"==c.PaymentStatus&&c.email==a.useremail&&(b+=1,a.isEditexist="true")})})},a.checkeditexist(),a.fileadded=!1,a.uploadImageFile=function(){var b=document.getElementById("files");b.files.length>0?a.fileadded=!0:a.fileadded=!1,console.log("File status check - ",b.files.length,a.fileadded)},a.LineDetails=[],a.LineDetails.length=0,a.LineDetails=c.LineDetails,a.LineDetails.length&&(a.LineDetails=[],a.LineDetails.length=0,a.LineDetails=c.LineDetails,a.LineDetails=[{Description:"",Amount:0}]),a.addNew=function(b){a.LineDetails.push({Description:"",Amount:0}),console.log(a.LineDetails)},a.remove=function(){var b=[];a.selectedAll=!1,angular.forEach(a.LineDetails,function(a){a.selected||b.push(a)}),a.LineDetails=b},a.checkAll=function(){a.selectedAll?a.selectedAll=!1:a.selectedAll=!0,angular.forEach(a.LineDetails,function(b){b.selected=a.selectedAll})};var j=new Date,k=new Date;void 0!==a.OverAgeDays&&(k=(new Date).setDate(j.getDate()-a.OverAgeDays)),console.log("age days",k,a.OverAgeDays),a.exp.eventdate=j,a.today=function(){a.exp.eventdate=new Date},a.today(),a.dateopen=function(){a.popup.opened=!0},a.clear=function(){a.exp.eventdate=new Date;a.uploader=new g({})},a.dateOptions={"year-format":"'yyyy'","starting-day":1,minDate:k,maxDate:new Date},a.popup={opened:!1},a.formats=["MM/dd/yyyy"],a.format=a.formats[0],a.GoBack=function(){e.path("/expense/viewexpense")},a.ClearFields=function(){a.exp.Chapter={},a.exp.email=d.getCurrentUserEmail(),a.exp.SubmitDate="",a.exp.SubmitBy="",a.exp.SubmitAddress="",a.exp.Description="",a.exp.PaymentStatus="Pending",a.exp.ImageURL=[],a.exp.Line[0].Quantity=0,void 0!==a.expenseconfig?(a.exp.Line[0].Rate=a.expenseconfig.MileRate,a.exp.Line[1].Rate=a.expenseconfig.TrailerRate):(a.exp.Line[0].Rate=.25,a.exp.Line[1].Rate=.4),a.exp.Line[1].Quantity=0,a.exp.Line.length=2,a.LineDetails=[],a.LineDetails.length=0,a.LineDetails=c.LineDetails},a.saveitforlater=function(){var b=a.exp.eventdate,c=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear();if(a.exp.email=d.getCurrentUserEmail(),a.CalculateAmount(),void 0!==a.uploader){console.log("file name",a.uploader.queue.length,a.uploader.queue);for(var f=0;f<a.uploader.queue.length;++f){var g=a.uploader.queue[f].file.name;console.log("file name",g)}}swal({title:"Confirm Save Expense?",text:"Expense will be saved in EDIT status!",type:"info",html:'<table><tr><td class="swaltdl ">Event Date : </td><td class="swaltdl "><b>'+c+'</b> </td></tr><tr><td class="swaltdl ">Description : </td><td class="swaltdl "><b>'+a.exp.Description+'</td></tr> <tr><td class="swaltdl ">Total Expense Amount : </td><td class="swaltdr "><b>$ '+a.exp.Amount+"</b></td></tr></table>",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, SAVE it!"}).then(function(){a.createnewexpense("SAVE"),e.path("/expense/viewexpense")})},a.confirmnewexpense=function(){var b=a.exp.eventdate,c=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear();a.CalculateAmount();for(var d=0;d<a.uploader.queue.length;++d){a.uploader.queue[d].file.name}void 0!==a.exp.Description&&0!=a.exp.Description.length&&0!=a.exp.Amount&&a.checkIfImageOrMileage()?swal({title:"Please confirm New Expense",text:"Created Expense will be reviewed by Chapter Lead and National Staff!",type:"info",html:'<table><tr><td class="swaltdl ">Event Date : </td><td class="swaltdl "><b>'+c+'</b> </td></tr><tr><td class="swaltdl ">Description : </td><td class="swaltdl "><b>'+a.exp.Description+'</td></tr> <tr><td class="swaltdl ">Miles Amount : </td><td class="swaltdr "><b>$ '+a.exp.Line[0].Amount+'</b></td></tr><tr><td class="swaltdl ">Trailer Mileage Amount : </td><td class="swaltdr "><b>$ '+a.exp.Line[1].Amount+'</b></td></tr><tr><td class="swaltdl ">Other Expense Amount : </td><td class="swaltdr "><b>$ '+a.lineamount+'</b></td></tr><tr><td class="swaltdl ">Total Expense Amount : </td><td class="swaltdr "><b>$ '+a.exp.Amount+"</b></td></tr></table>",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, create it!"}).then(function(){a.createnewexpense("Pending"),e.path("/expense/viewexpense")}):swal({title:"Required fields Missing",type:"error",html:'<table><tr><td class="swaltdl ">Event Date : </td><td class="swaltdl "><b>'+c+'</b> </td></tr><tr><td class="swaltdl ">Description : </td><td class="swaltdl "><b>'+a.exp.Description+'</td></tr> <tr><td class="swaltdl ">No. of supporting documents Loaded : </td><td class="swaltdr "><b> '+a.uploader.queue.length+'</b></td> </tr> <tr><td class="swaltdl ">Expense Amount : </td><td class="swaltdr "><b>$ '+a.exp.Amount+"</b></td></tr></table>"})},a.checkIfImageOrMileage=function(){var b=document.getElementById("files");return b&&b.files&&b.files.length>0?!0:a.exp.Amount>0?!0:!1},a.CalculateAmount=function(){if(a.LineDetails.length)for(var b=2,c=0;c<a.LineDetails.length;c++)a.lineamount=Math.round(100*(parseFloat(a.lineamount)+parseFloat(a.LineDetails[c].Amount)))/100,a.exp.Line.push({ID:b,Description:a.LineDetails[c].Description,Quantity:1,Rate:1,Amount:parseFloat(a.LineDetails[c].Amount)}),b++;a.exp.Line[0].Amount=Math.round(a.exp.Line[0].Quantity*a.exp.Line[0].Rate*100)/100,a.exp.Line[1].Amount=Math.round(a.exp.Line[1].Quantity*a.exp.Line[1].Rate*100)/100,a.exp.Amount=Math.round(100*(a.exp.Line[0].Quantity*a.exp.Line[0].Rate+a.exp.Line[1].Quantity*a.exp.Line[1].Rate+1*parseFloat(a.lineamount)))/100},a.createnewexpense=function(b){var f=a.exp.eventdate;a.exp.eventdate=f.getMonth()+1+"/"+f.getDate()+"/"+f.getFullYear();for(var g=0;g<a.LineDetails.length;g++)null!=a.LineDetails[g]&&delete a.LineDetails[g].$$hashKey;a.exp.email=d.getCurrentUserEmail(),a.exp.Chapter=a.userChapter,a.exp.SubmitBy=a.userName.name.first+" "+a.userName.name.last,a.exp.Region=a.userName.Region;var h=new Date;a.exp.BillId=a.userName.Region.charAt(1)+a.userChapter.text.charAt(1)+a.userName.address.city.charAt(1)+h.getFullYear()+(h.getMonth()+1)+h.getDate()+ +h.getHours()+h.getMinutes()+h.getSeconds()+Math.floor(1e3*Math.random()+1),a.exp.SubmitDate=h.getMonth()+1+"/"+h.getDate()+"/"+h.getFullYear(),a.exp.SubmitAddress=a.userName.address.line1+" , "+a.userName.address.line2+" , "+a.userName.address.city+" , "+a.userName.address.state+" , "+a.userName.address.zip,"Chapter Lead"==a.userRole||"National Staff"==a.userRole?(a.exp.PaymentLog[0].PayStatus="Submitted",a.exp.PaymentStatus="Submitted"):(a.exp.PaymentLog[0].PayStatus="Pending",a.exp.PaymentStatus="Pending"),"SAVE"==b?(a.exp.PaymentLog[0].PayStatus="Edit",a.exp.PaymentStatus="Edit",a.exp.PaymentLog[0].PayStatusDescription="Expense saved for later submission"):a.exp.PaymentLog[0].PayStatusDescription="New Expense created",a.exp.PaymentLog[0].PayStatusBy=a.exp.SubmitBy,a.exp.PaymentLog[0].PayRole=a.userRole,h.getHours()>12?a.exp.PaymentLog[0].PayStatusDate=h.getMonth()+1+"/"+h.getDate()+"/"+h.getFullYear()+" "+(h.getHours()-12)+":"+h.getMinutes()+":"+h.getSeconds()+" PM":a.exp.PaymentLog[0].PayStatusDate=h.getMonth()+1+"/"+h.getDate()+"/"+h.getFullYear()+" "+h.getHours()+":"+h.getMinutes()+":"+h.getSeconds()+" AM",console.log("New expense ",a.exp.Chapter.text,a.exp.SubmitBy,a.exp.email);var i;document.getElementById("files");if(a.uploader.queue.length>0)for(var g=0;g<a.uploader.queue.length;g++)i="images/"+a.exp.BillId+"_"+a.uploader.queue[g].file.name,c.addNewImage({ID:g+1,ImageUrlLocation:"",FileName:i});var j="expense/";if(firebase.database().ref(j).push(angular.fromJson(angular.toJson(a.exp))).then(function(b){console.log("success : data pushed",a.exp)})["catch"](function(a){a.code,a.message;console.log("ERROR: "+a.code+": "+a.message)}),void 0!==a.uploader){var k="";a.uploader.queue.length>0&&(k=c.SaveImageData(a.exp.BillId,a.uploader.queue),console.log("save image - ",k))}"SAVE"==b?swal("Expense is Saved for future submission","for event "+this.exp.eventdate,"success"):swal("New Expense Created","for event "+this.exp.eventdate,"success"),e.path("expense/viewexpense")}}]),angular.module("ohanaApp").controller("ViewExpenseController",["$scope","userService","$timeout","$filter","$uibModal","expenseservice","commonServices","$q","$location",function(a,b,c,d,e,f,g,h,i){a.listS="",a.lists={},a.form={},a.userlist="",a.userRole=b.getRole(),a.userName=b.getUserData(),a.userChapter=b.getChapter(),a.useremail=g.getCurrentUserEmail();var j=new Date;a.checkedOverageDays=function(){a.expenseconfig=[],a.expenseconfig.length=0,a.editstatus=[],a.editstatus.length=0,g.getData("/Config/Expense").then(function(b){if(b){a.expenseconfig=b;for(var d=0;d<a.expenseconfig.length;d++)Date.parse(j)>=Date.parse(a.expenseconfig[d].startdate)&&Date.parse(j)<=Date.parse(a.expenseconfig[d].enddate)&&(a.OverAgeWarning=a.expenseconfig[d].OverAgeWarning,a.OverAgeError=a.expenseconfig[d].OverAgeError,a.OverAgeDays=a.expenseconfig[d].OverAgeDays);a.editExpenseList=f.getEditStatusrec(),a.iseditexist="false";var e=0;a.$apply(function(){}),a.editExpenseList.$loaded().then(function(){angular.forEach(a.editExpenseList,function(b){b.email==a.useremail&&"false"==a.iseditexist&&c(function(){a.iseditexist="true",a.editeventdate=b.eventdate,a.daysforoverage=0,e=0,e=f.getPastDue(b.eventdate),e<a.OverAgeDays&&(a.daysforoverage=a.OverAgeDays-e),e==a.OverAgeDays&&(a.daysforoverage=0),e>a.OverAgeDays&&(a.daysforoverage=e-a.OverAgeDays),a.editstatus.push({OverAge:a.daysforoverage,BillId:b.BillId,EmailID:b.email}),void 0!==a.daysforoverage&&(a.daysforoverage>0?swal("Expense waiting for submission! Over Age in "+a.daysforoverage+" days","",""):0==a.daysforoverage?swal("Expense waiting for submission! Over Age TODAY","",""):swal("Expense in EDIT status Over Aged ","",""))},0)})}),a.useremail,a.iseditexist}})},a.neweexpense=function(){a.editExpenseList=f.getEditStatusrec(),a.iseditexist="false",a.editExpenseList.$loaded().then(function(){angular.forEach(a.editExpenseList,function(b){b.email==a.useremail&&"false"==a.iseditexist&&(a.iseditexist="true")}),"true"==a.iseditexist?swal("You cant create new expense","Previous expense must be submitted","warning"):i.path("/expense/newexpense")})},a.showPopover=function(){a.popoverIsVisible=!0},a.hidePopover=function(){a.popoverIsVisible=!1},a.openExpenseDash=function(){a.GetQuickOverviewData(),a.$modalInstance=e.open({scope:a,templateUrl:"myModalContent.html",size:"dash"})},a.ok=function(){a.$modalInstance.close()},a.options={legend:{display:!0,position:"bottom"}},a.Showmeedit=function(a){i.path("/expense/expensedetail/"+a)},a.selectedRow=null,a.setClickedRow=function(b){a.selectedRow=b};var k=b.getId();g.getData("/userData/"+k);a.Head="",a.DateRangelist=[{name:"Past Week",value:"Past Week"},{name:"Past Month",value:"Past Month"},{name:"Past 3 Month",value:"Past 3 Month"},{name:"Past Year",value:"Past Year"},{name:"Custom Range",value:"Custom Range"}],a.DateFilter=a.DateRangelist[2];var l=new Date(j-7776e6);a.startdate=new Date(j-7776e6),a.disp_startdate=a.startdate.getMonth()+1+"/"+ +a.startdate.getDate()+"/"+a.startdate.getFullYear(),a.disp_enddate=j.getMonth()+1+"/"+j.getDate()+"/"+j.getFullYear(),a.enddate=j,a.disp_filterdate=a.disp_startdate+" - "+a.disp_enddate,a.DateFilterChange=function(){switch(a.DateFilter.value){case"Past Week":var b=new Date;a.startdate=new Date(b-6048e5),a.enddate=b,a.disp_startdate=a.startdate.getMonth()+1+"/"+ +a.startdate.getDate()+"/"+a.startdate.getFullYear(),a.disp_enddate=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear(),a.disp_filterdate=a.disp_startdate+" - "+a.disp_enddate,a.ExpenseSearch("normal");break;case"Past Month":var b=new Date;a.startdate=new Date(b-2592e6),a.enddate=b,a.disp_startdate=a.startdate.getMonth()+1+"/"+ +a.startdate.getDate()+"/"+a.startdate.getFullYear(),a.disp_enddate=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear(),a.disp_filterdate=a.disp_startdate+" - "+a.disp_enddate,a.ExpenseSearch("normal");break;case"Past 3 Month":var b=new Date;a.startdate=new Date(b-7776e6),a.enddate=b,a.disp_startdate=a.startdate.getMonth()+1+"/"+ +a.startdate.getDate()+"/"+a.startdate.getFullYear(),a.disp_enddate=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear(),a.disp_filterdate=a.disp_startdate+" - "+a.disp_enddate,a.ExpenseSearch("normal");break;case"Past Year":var b=new Date;a.startdate=new Date(b-31536e6),a.enddate=b,a.disp_startdate=a.startdate.getMonth()+1+"/"+ +a.startdate.getDate()+"/"+a.startdate.getFullYear(),a.disp_enddate=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear(),a.disp_filterdate=a.disp_startdate+" - "+a.disp_enddate,a.ExpenseSearch("normal");break;case"Custom Range":a.disp_startdate="",a.disp_enddate="",a.disp_filterdate=""}};var m=a.userName.name.first+" "+a.userName.name.last;switch(a.userRole){case"Volunteer":case"Participant":a.HeadTitle=" created by "+m,a.paystatuslist=[{name:"All",value:""},{name:"Edit",value:"Edit"},{name:"Pending",value:"Pending"},{name:"Submitted",value:"Submitted"},{name:"Resubmit",value:"Resubmit"},{name:"Paid",value:"Paid"},{name:"Over Age",value:"Over Age"}],a.PayStatus=a.paystatuslist[4];break;case"Chapter Lead":a.HeadTitle=" for "+a.userChapter.text,a.paystatuslist=[{name:"All",value:""},{name:"Edit",value:"Edit"},{name:"Pending",value:"Pending"},{name:"Submitted",value:"Submitted"},{name:"Resubmit",value:"Resubmit"},{name:"Returned",value:"Returned"},{name:"Paid",value:"Paid"},{name:"Over Age",value:"Over Age"}],a.PayStatus=a.paystatuslist[5];break;default:a.paystatuslist=[{name:"All",value:""},{name:"Edit",value:"Edit"},{name:"Pending",value:"Pending"},{name:"Submitted",value:"Submitted"},{name:"Resubmit",value:"Resubmit"},{name:"Returned",value:"Returned"},{name:"Paid",value:"Paid"},{name:"Over Age",value:"Over Age"}],a.PayStatus=a.paystatuslist[3]}a.today=function(){a.startdate=l,a.enddate=j},a.today(),a.dateopen=function(){a.popup.opened=!0,a.disp_startdate=a.startdate.getMonth()+1+"/"+ +a.startdate.getDate()+"/"+a.startdate.getFullYear(),a.$applyAsync()},a.dateopen1=function(){a.popup1.opened=!0,a.disp_enddate=a.enddate.getMonth()+1+"/"+a.enddate.getDate()+"/"+a.enddate.getFullYear(),a.$applyAsync()},a.clear=function(){a.startdate=new Date(j.getFullYear(),0,1),a.enddate=j},a.dateOptions={"year-format":"'yyyy'","starting-day":1},a.popup={opened:!1},a.popup1={opened:!1},a.formats=["MM/dd/yyyy"],a.format=a.formats[0],a.ctrldate={datetime:null},a.filterPastDue=function(){switch(a.startdate=new Date(j.getFullYear()-5,0,1),a.enddate=new Date(j-2592e6),a.userRole){case"Volunteer":case"Participant":a.PayStatus=a.paystatuslist[1];break;case"Chapter Lead":a.PayStatus=a.paystatuslist[1];break;default:a.PayStatus=a.paystatuslist[2]}a.disp_startdate=a.startdate.getMonth()+1+"/"+ +a.startdate.getDate()+"/"+a.startdate.getFullYear(),a.disp_enddate=a.enddate.getMonth()+1+"/"+a.enddate.getDate()+"/"+a.enddate.getFullYear(),a.DateFilter=a.DateRangelist[4],a.ExpenseSearch("Overdue")},a.viewexpensedata=function(){a.checkedOverageDays(),a.ExpenseSearch("normal")},a.ExpenseSearch=function(b){a.lists=f.getViewExpenseData(a.useremail,a.userRole,a.userChapter),a.$applyAsync(),a.buildExpenseDataTable(a.lists,a.userRole,a.startdate,a.enddate,a.PayStatus.value,b)},a.buildExpenseDataTable=function(b,c,d,e,g,h){var i=(new Date,[]);a.selectedbills=[],a.selectedbills.length=0,b.$loaded().then(function(b){i=[],i.length=0;for(var h=0;h<b.length;h++){var j=0;j="Paid"!=b[h].PaymentStatus&&"Over Age"!=b[h].PaymentStatus?f.getPastDue(b[h].eventdate):"",i.push({SubmitDate:b[h].SubmitDate,SubmitBy:b[h].SubmitBy,eventdate:b[h].eventdate,Chapter:b[h].Chapter,Amount:b[h].Amount,PaymentStatus:b[h].PaymentStatus,pastdue:j,BillId:b[h].BillId})}var k=[];k.length=0,null!=i&&null!=d&&null!=e&&angular.forEach(i,function(a){var b=a.eventdate;Date.parse(b)>=Date.parse(d)&&Date.parse(b)<=Date.parse(e)&&k.push(a)}),a.retResults=[],a.retResults.length=0,null!=g&&null!=k&&""!=g?angular.forEach(k,function(b){var c=b.PaymentStatus;c==g&&a.retResults.push(b)}):a.retResults=k,angular.element(document).ready(function(){$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={type:"PUT"},$.fn.DataTable.isDataTable($("#expenseTable"))&&a.expenseTable.destroy(),a.expenseTable=$("#expenseTable").DataTable({responsive:!0,autoWidth:!1,data:a.retResults,fnRowCallback:function(b,c,d,e){c.pastdue>parseInt(a.OverAgeWarning)&&c.pastdue<parseInt(a.OverAgeError)&&"Paid"!=c.PaymentStatus&&"Over Age"!=c.PaymentStatus&&$(b).css("color","red"),c.pastdue>a.OverAgeError-1&&"Paid"!=c.PaymentStatus&&"Over Age"!=c.PaymentStatus&&($(b).css("color","red"),$(b).css("font-weight","bold"),$(b).css("background-color","yellow"),$(b).css("font-size","16px"))},pagingType:"full_numbers",columns:[{data:"eventdate",width:"60px"},{data:"Amount",width:"60px",render:$.fn.dataTable.render.number(",",".",2,"$")},{data:"PaymentStatus",width:"60px"},{data:"SubmitBy",width:"60px"},{data:"Chapter.text",width:"60px"},{data:"SubmitDate",width:"50px",visible:!1},{data:"pastdue",width:"60px"}],columnDefs:[{targets:0},{targets:4,visible:"National Staff"==c},{targets:6,width:"90px"}],order:[[6,"desc"]],headerCallback:function(a){}}),$("#expenseTable").dataTable().yadcf([{column_number:3,select_type:"chosen",filter_default_label:"Expense Originator Name"},{column_number:4,select_type:"chosen",filter_default_label:"Chapter"},{column_number:5,select_type:"chosen",filter_default_label:"Submit Date"},{column_number:0,select_type:"chosen",filter_default_label:"Event Date"},{column_number:1,select_type:"chosen",filter_default_label:"Amount"},{column_number:2,select_type:"chosen",filter_default_label:"Payment Status"},{column_number:6,select_type:"chosen",filter_default_label:"Past Due"}]),$("#example tbody").off("click","tr"),$("#expenseTable tbody").on("click","tr",function(){var b=a.expenseTable.row(this).data();window.location="#/expense/expensedetail/"+b.BillId})})})["catch"](function(a){console.error("error",a)})},a.GetQuickOverviewData=function(){a.dashlist=f.getViewExpenseData(a.useremail,a.userRole,a.userChapter),a.expensedash=[],a.expensedash.length=0,a.pielabels=[],a.pielabels.length=0,a.piedata=[],a.piedata.length=0,a.piecolor=[],a.piecolor.length=0,a.PieDisplay="";var b=0,c=0,d=0,e=0,g=0,h=0,b=0,i=0;a.dashlist.$loaded().then(function(){angular.forEach(a.dashlist,function(a){switch(a.PaymentStatus){case"Paid":b+=1;break;case"Edit":i+=1;break;case"Over Age":h+=1;break;case"Pending":c+=1;break;case"Returned":g+=1;break;case"Resubmit":e+=1;break;case"Submitted":d+=1}}),a.TotalExpenseCount=c+i+d+g+e+b+h,c>0&&(a.piedata.push(c),a.pielabels.push("Pending"),a.piecolor.push("#FFA500"),a.expensedash.push({Label:"Pending",Data:c})),i>0&&(a.piedata.push(i),a.pielabels.push("Edit"),a.piecolor.push("#FF6347"),a.expensedash.push({Label:"Edit",Data:i})),d>0&&(a.piedata.push(d),a.pielabels.push("Submitted"),a.piecolor.push("#0816ff"),a.expensedash.push({Label:"Submitted",Data:d})),g>0&&(a.piedata.push(g),a.pielabels.push("Returned"),a.piecolor.push("#08ffff"),a.expensedash.push({Label:"Returned",Data:g})),e>0&&(a.piedata.push(e),a.pielabels.push("Resubmit"),a.piecolor.push("#08ffff"),a.expensedash.push({Label:"Resubmit",Data:e})),b>0&&(a.piedata.push(b),a.pielabels.push("Paid"),a.piecolor.push("#08ff21"),a.expensedash.push({Label:"Paid",Data:b})),h>0&&(a.piedata.push(h),a.pielabels.push("Over Age"),a.piecolor.push("#FF0000"),a.expensedash.push({Label:"Over Age",Data:h}))})};var j=new Date;j.getMonth()+1+"/"+j.getDate()+"/"+j.getFullYear();a.CreateExpenseReport=function(){a.ExpenseSearch("normal");var b=new Date,c=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear(),d=a.userChapter.text,e=a.startdate.getMonth()+1+"/"+a.startdate.getDate()+"/"+a.startdate.getFullYear(),h=a.enddate.getMonth()+1+"/"+a.enddate.getDate()+"/"+a.enddate.getFullYear(),i=g.getCurrentUserEmail(),j=a.userName.name.first+" "+a.userName.name.last,k=a.userName.address.line1+" , "+a.userName.address.line2,l=a.userName.address.city+" , "+a.userName.address.state+" , "+a.userName.address.zip;a.rptdata=[];var m=g.getCurrentUserEmail();a.lists.$loaded().then(function(b){for(var g=0;g<b.length;g++){if((b[g].PaymentStatus==a.PayStatus.value||""==a.PayStatus.value)&&Date.parse(b[g].SubmitDate)>=Date.parse(a.startdate)&&Date.parse(b[g].SubmitDate)<=Date.parse(a.enddate)&&("Participant"==a.userRole||"Volunteer"==a.userRole)&&b[g].email==m){var n={"Event Date":b[g].eventdate,"Business Purpose, Origin & Destination":b[g].Description,"Miles Driven":parseInt(b[g].Line[0].Quantity),"Travel @ .25/mile":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[0].Amount))/100),"Trailer Miles":parseInt(b[g].Line[1].Quantity),"Trailer Hauling @ .40/mile":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[1].Amount))/100),"Other Expenses":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[2].Amount))/100),Total:"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Amount))/100),"Explanation of Other Expense":b[g].Line[2].Description};a.rptdata.push(n)}if((b[g].PaymentStatus==a.PayStatus.value||""==a.PayStatus.value)&&Date.parse(b[g].SubmitDate)>=Date.parse(a.startdate)&&Date.parse(b[g].SubmitDate)<=Date.parse(a.enddate)&&"Chapter Lead"==a.userRole&&a.userChapter.text==b[g].Chapter.text){var n={"Event Date":b[g].eventdate,"Business Purpose, Origin & Destination":b[g].Description,"Miles Driven":parseInt(b[g].Line[0].Quantity),"Travel @ .25/mile":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[0].Amount))/100),"Trailer Miles":parseInt(b[g].Line[1].Quantity),"Trailer Hauling @ .40/mile":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[1].Amount))/100),"Other Expenses":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[2].Amount))/100),Total:"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Amount))/100),"Explanation of Other Expense":b[g].Line[2].Description};a.rptdata.push(n)}if((b[g].PaymentStatus==a.PayStatus.value||""==a.PayStatus.value)&&Date.parse(b[g].SubmitDate)>=Date.parse(a.startdate)&&Date.parse(b[g].SubmitDate)<=Date.parse(a.enddate)&&"National Staff"==a.userRole){
var n={"Event Date":b[g].eventdate,"Business Purpose, Origin & Destination":b[g].Description,"Miles Driven":parseInt(b[g].Line[0].Quantity),"Travel @ .25/mile":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[0].Amount))/100),"Trailer Miles":parseInt(b[g].Line[1].Quantity),"Trailer Hauling @ .40/mile":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[1].Amount))/100),"Other Expenses":"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Line[2].Amount))/100),Total:"$ "+numberWithCommas(Math.round(100*parseFloat(b[g].Amount))/100),"Explanation of Other Expense":b[g].Line[2].Description};a.rptdata.push(n)}}f.createPDFReport(a.rptdata,c,j,k,l,d,i,e,h)})},a.idSelectedBill=null,a.setSelected=function(b){a.idSelectedBill=b,i.path("/expense/expensedetail/"+a.idSelectedBill)}}]),angular.module("ohanaApp").directive("connectToQuickbooks",["$window",function(a){return{restrict:"E",template:"<ipp:connectToIntuit></ipp:connectToIntuit>",link:function(b){var c=a.document.createElement("script");c.type="text/javascript",c.src="//js.appcenter.intuit.com/Content/IA/intuit.ipp.anywhere.js",c.onload=function(){b.$emit("intuitjs:loaded")},a.document.body.appendChild(c),b.$on("intuitjs:loaded",function(c){a.intuit.ipp.anywhere.setup({grantUrl:"/"}),b.connected=!0,b.$apply()})}}}]),angular.module("ohanaApp").service("expenseservice",["filterFilter","$firebaseArray",function(a,b){this.expense={BillId:"",Chapter:"",Region:"",eventdate:"",email:"",SubmitDate:"",SubmitBy:"",SubmitAddress:"",Description:"",PaymentStatus:"Pending",PaymentLog:[{PayStatus:"",PayStatusBy:"",PayStatusDate:"",PayRole:"",PayStatusDescription:""}],Amount:0,ImageURL:[],Line:[{ID:1,Description:"Mileage Rate - Travel @.25/mile",Quantity:0,Rate:.25,Amount:0},{ID:2,Description:"Trailer Mileage Rate @.40/mile",Quantity:0,Rate:.4,Amount:0}]},this.addNewImage=function(a){this.expense.ImageURL.push(a)},this.addNewImage=function(a,b){this.expense.ImageURL.push(a)},this.getExpense=function(){return console.log("Get Expense",expense),expense},this.addNewList=function(a){expense.Line.push()},this.getExpenseAt=function(b){return this.getExpense(),a(expense,{BillId:b})[0]},this.getExpenseChapterList=function(){return Chapterlist},this.LineDetails=[{Description:"",Amount:0}],this.addNew=function(a){this.LineDetails.push({Description:"",Amount:0}),console.log("Other expense - New Line Added",this.LineDetails)},this.deleteExpense=function(a){var b=firebase.database().ref("expense/").orderByChild("BillId").equalTo(a);b.on("child_added",function(b){b.val();firebase.database().ref("expense/"+b.key).remove().then(function(b){console.log("success : - ",a," data Deleted"),swal("Expense Deleted Successfully!","","success")})["catch"](function(b){b.code,b.message;console.log("ERROR: "+b.code+": "+b.message),console.log("Expense - ",a," Removal Failed")})})},this.updatePaymentStatus=function(a,b){var c="",d=new Date,e="";e=d.getHours()>12?d.getMonth()+1+"/"+d.getDate()+"/"+d.getFullYear()+" "+(d.getHours()-12)+":"+d.getMinutes()+":"+d.getSeconds()+" PM":d.getMonth()+1+"/"+d.getDate()+"/"+d.getFullYear()+" "+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()+" AM";for(var f=0;f<a.length;f++){var g=[],h=firebase.database().ref("expense/").orderByChild("BillId").equalTo(a[f]);h.on("child_added",function(a){var d=a.val();if(c=a.key,d.PaymentLog.length)for(var f=0;f<d.PaymentLog.length;f++)g.push({PayStatus:d.PaymentLog[f].PayStatus,PayStatusBy:d.PaymentLog[f].PayStatusBy,PayStatusDate:d.PaymentLog[f].PayStatusDate,PayRole:d.PaymentLog[f].PayRole,PayStatusDescription:d.PaymentLog[f].PayStatusDescription});g.push({PayStatus:"Paid",PayStatusBy:b,PayStatusDate:e,PayRole:"National Staff",PayStatusDescription:"Agree with Chapter Lead. Expense Paid"})});for(var i=0;i<g.length;i++)null!=g[i]&&delete g[i].$$hashKey;var j={PaymentStatus:"Paid",PaymentLog:g};firebase.database().ref("expense/"+c).update(j)}swal("Payment Status Updated Successfully!","","success")},this.getViewExpenseData=function(a,c,d){switch(c){case"Volunteer":case"Participant":var e=firebase.database().ref("/expense").orderByChild("email").equalTo(a);break;case"Chapter Lead":var e=firebase.database().ref("/expense").orderByChild("Chapter").equalTo(d);break;default:var e=firebase.database().ref("/expense").orderByChild("SubmitDate")}var f=b(e);return f},this.getlast12month=function(){var a,b=new Date,c=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),d=[],e=b.getMonth();for(a=0;13>a;a++)0!=a&&d.push(c[e]),e++,e>11&&(e=0);return d},this.getlast12monthyear=function(){var a=new Date,b=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),c=[],d=new Date(a);d=new Date(d.setMonth(d.getMonth()-12));var e,f=(d.getFullYear(),d.getMonth());for(e=0;13>e;e++)0!=e&&c.push(b[f]+"-"+d.getFullYear()),f++,f>11&&(f=0),d=new Date(d.setMonth(d.getMonth()+1));return c},this.getPastDue=function(a){var b=new Date,c=a.toString().split("/"),d=new Date(c[2],c[0]-1,c[1]),e=0;return Date.parse(b)==Date.parse(d)&&(e=0),Date.parse(b)>Date.parse(d)&&(e=Math.round((Date.parse(b)-Date.parse(d))/864e5)),Date.parse(b)<Date.parse(d)&&(e=Date.parse(d)-Date.parse(b)/864e5),e},this.getEditStatusrec=function(){var a=firebase.database().ref("/expense").orderByChild("PaymentStatus").equalTo("Edit"),c=b(a);return c},this.getEditExpenseData=function(a){var c=firebase.database().ref("/expense").orderByChild("BillId").equalTo(a),d=b(c);return d},this.GetViewExpenseTableData=function(a,c,d){var e="";switch(c){case"Volunteer":case"Participant":e=firebase.database().ref("/expense").orderByChild("email").equalTo(a),console.log("ref-1");break;case"Chapter Lead":e=firebase.database().ref("/expense").orderByChild("Chapter").equalTo(d),console.log("ref-2");break;case"National Staff":case"admin":e=firebase.database().ref("/expense"),console.log("ref-3")}var f=[];return f=b(e)},this.datefilter=function(a,b,c,d){var e=[];if(null!=a&&null!=b&&null!=c){angular.forEach(a,function(a){var d=a.SubmitDate;Date.parse(d)>=Date.parse(b)&&Date.parse(d)<=Date.parse(c)&&(e.push(a),console.log("Date ",Date.parse(d),d,b,c,e))});var f=[];return null!=d&&null!=e&&""!=d?angular.forEach(e,function(a){var b=a.PaymentStatus;b==d&&(f.push(a),console.log("paystatus ",e,f,d,b))}):f=e,f}},this.deleteImage=function(a,b){var c=firebase.storage().ref(),d=c.child(a),e=[];console.log("Image Aarray - 0 ",b,e),d["delete"]().then(function(){console.log("success : - ",a," Image Deleted"),swal("Removed!","Your supporting document file has been removed.","success")})["catch"](function(b){b.code,b.message;console.log("ERROR: "+b.code+": "+b.message),console.log("Image - ",a," Removal Failed")})},this.SaveImageData=function(a,b){var c=[];console.log("file image ",b[0].file.name);for(var d=0;d<b.length;++d)for(var e=b[d].file.name,f=[".jpg",".jpeg",".bmp",".gif",".png"],g=0;g<f.length;g++){var h=f[g];if(e.substr(e.length-h.length,h.length).toLowerCase()==h.toLowerCase()){var i=(firebase.storage(),b[d]._file);console.log("load file - ",i);var j=firebase.storage().ref(),k=(j.fullPath,"images/"+a+"_"+i.name);j.child(k).put(i).then(function(a){return void 0!==a?j.child(k).getDownloadURL().then(function(a){return console.log("Image func - ",a),a}):void 0});var j=firebase.storage().ref(k),l=j.put(i);l.on("state_changed",null,null,function(){var a=l.snapshot.downloadURL;c.push({ID:g+1,ImageUrlLocation:a,FileName:k}),console.log("Uploaded file!",c)})}}},this.buildTableBody=function(a,b){var c=[];return c.push(b),a.forEach(function(a){var d=[];b.forEach(function(b){d.push(a[b].toString())}),c.push(d)}),c},this.table=function(a,b){return{style:"demoTable",widths:["60","150","60","60","60","60","60","60","200"],table:{headerRows:1,body:this.buildTableBody(a,b)}}},this.createPDFReport=function(a,b,c,d,e,f,g,h,i){var j={pageOrientation:"landscape",header:{margin:10,columns:[{margin:[10,0,0,0],text:"HOW Expense Report",fontSize:14,bold:!0,alignment:"center"}]},footer:{columns:[b,{text:"AT&T     ",alignment:"right"}]},styles:{header:{bold:!0,color:"#000",fontSize:11},demoTable:{color:"#666",fontSize:10}},content:[{canvas:[{type:"line",x1:0,y1:5,x2:750,y2:5,lineWidth:.5}]},{text:"\n"},{columns:[{stack:["Payable To: "+c,"Address : "+d,"City/State/Zip : "+e],fontSize:11},{stack:["Chapter Name : "+f,"Email Id :"+g],fontSize:11},{stack:["Expense From : "+h,"Expense To : "+i],fontSize:11}]},{text:"\n"},{width:"",text:""},this.table(a,["Event Date","Business Purpose, Origin & Destination","Miles Driven","Travel @ .25/mile","Trailer Miles","Trailer Hauling @ .40/mile","Other Expenses","Total","Explanation of Other Expense"])]};pdfMake.createPdf(j).download("ExpenseReport.pdf")}}]),angular.module("ohanaApp").controller("ManageChapterchatCtrl",["$scope","$rootScope","$q","commonServices","userService",function(a,b,c,d,e){a.$watch("chatLog",function(){$(".panel-body").animate({scrollTop:$(".panel-body").get(0).scrollHeight})},!0),a.init=function(){var b=e.getUserData();a.newMessage="",a.chatLog=[],a.chapterOptions={},a.AllChapterData=[],a.chapterOptions[b.Chapter.key]=b.Chapter.text,a.AllChapterData.push(b.Chapter),_.each(b.Chapters,function(b){a.chapterOptions[b.chapter.key]=b.chapter.text,a.AllChapterData.push(b.chapter)}),a.loadChapterChat(b.Chapter.key)},a.loadChapterChat=function(e){var f=d.getData("/chat/chapters/"+e);a.currentChapter=_.find(a.AllChapterData,function(a){return a.key===e}),c.all([f]).then(function(c){a.chatLog=_.sortBy(c[0],["time"]),firebase.database().ref("/chat/chapters/"+e).on("value",function(c){a.chatLog=_.sortBy(c.val(),["time"]);var d=Object.keys(c.val()),e=c.val()[d[d.length-1]];e.userId!==b.userId&&a.$apply()})})},a.changeChapter=function(){swal({title:"Switch Chapter",input:"select",inputOptions:a.chapterOptions}).then(function(b){a.loadChapterChat(b),swal({type:"success",title:"Switched chapters!"})})},a.sendMessage=function(){var b={};b.userId=e.getId(),b.name=e.getUserName(),b.time=Date.now(),b.message=a.newMessage,d.pushData("/chat/chapters/"+a.currentChapter.key,b),a.newMessage=""}}]),angular.module("ohanaApp").service("userService",["$rootScope","commonServices",function(a,b){this.setId=function(b){a.userId=b,localStorage.setItem("userId",b)},this.setUserData=function(b){a.userData=b,localStorage.setItem("userData",JSON.stringify(b))},this.setUserName=function(b,c){a.userName=b+" "+c,localStorage.setItem("userName",b+" "+c)},this.setRole=function(b){a.userRole=b,localStorage.setItem("userRole",b)},this.setChapter=function(b){a.userChapter=b,localStorage.setItem("userChapter",JSON.stringify(b))},this.getId=function(){var a=localStorage.getItem("userId");return a},this.getUserData=function(){var a=localStorage.getItem("userData");return JSON.parse(a)},this.getUserName=function(){var a=localStorage.getItem("userName");return a},this.getRole=function(){var a=localStorage.getItem("userRole");return a},this.getChapter=function(){var a=localStorage.getItem("userChapter");return JSON.parse(a)}}]),angular.module("ohanaApp").directive("ngThumb",["$window",function(a){var b={support:!(!a.FileReader||!a.CanvasRenderingContext2D),isFile:function(b){return angular.isObject(b)&&b instanceof a.File},isImage:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(b)}};return{restrict:"A",template:"<canvas/>",link:function(a,c,d){function e(a){var b=new Image;b.onload=f,b.src=a.target.result}function f(){var a=g.width||this.width/this.height*g.height,b=g.height||this.height/this.width*g.width;h.attr({width:a,height:b}),h[0].getContext("2d").drawImage(this,0,0,a,b)}if(b.support){var g=a.$eval(d.ngThumb);if(b.isFile(g.file)&&b.isImage(g.file)){var h=c.find("canvas"),i=new FileReader;i.onload=e,i.readAsDataURL(g.file)}}}}}]),angular.module("ohanaApp").controller("ExpenseOverviewCtrl",["$scope","$timeout","userService","expenseservice","commonServices","$window","$location","$q",function(a,b,c,d,e,f,g,h){a.userRole=c.getRole(),a.userName=c.getUserData(),a.userChapter=c.getChapter(),a.useremail=e.getCurrentUserEmail(),a.ViewExpenseList=function(){window.location="#/expense/viewexpense"},a.neweexpense=function(){"true"==a.iseditexist?swal("You cant create new expense","Previous expense in EDIT status must be submitted","warning"):g.path("/expense/newexpense")},a.options={legend:{display:!0,position:"bottom"}},a.options1={legend:{display:!0,position:"bottom"}},a.labels1=[],a.labels1.length=0,a.labels1=d.getlast12month(),a.labels2=d.getlast12monthyear(),a.series1=[],a.data1=[],a.data2=[],a.options1={scales:{yAxes:[{id:"y-axis-1",type:"linear",display:!0,position:"left"}]}},a.paystatuslist=["Edit","Pending","Resubmit","Submitted","Returned","Paid","Over Age"],a.selectedpaystatus=["Edit","Pending","Resubmit","Submitted","Returned","Paid","Over Age"],a.paystatusSelection=function(b){var c=a.selectedpaystatus.indexOf(b);c>-1?a.selectedpaystatus.splice(c,1):a.selectedpaystatus.push(b),a.getExpensebyStatus()},a.checkedOverageDays=function(){var b=new Date;e.getData("/Config/Expense").then(function(c){if(c){a.expenseconfig=c;for(var d=0;d<a.expenseconfig.length;d++)Date.parse(b)>=Date.parse(a.expenseconfig[d].startdate)&&Date.parse(b)<=Date.parse(a.expenseconfig[d].enddate)&&(a.OverAgeDays=a.expenseconfig[d].OverAgeDays);a.getOverAgeData()}})},a.getOverAgeData=function(){a.PayStatusCountData=[],a.PayStatusCountData.length=0,a.editstatus=[],a.editstatus.length=0,a.editExpenseList=d.getEditStatusrec(),a.iseditexist="false";var c=0;a.editExpenseList.$loaded().then(function(){angular.forEach(a.editExpenseList,function(e){e.email==a.useremail&&"false"==a.iseditexist&&b(function(){a.iseditexist="true",a.editeventdate=e.eventdate,a.daysforoverage=0,c=0,c=d.getPastDue(e.eventdate),c<a.OverAgeDays&&(a.daysforoverage=a.OverAgeDays-c),c==a.OverAgeDays&&(a.daysforoverage=0),c>a.OverAgeDays&&(a.daysforoverage=c-a.OverAgeDays),a.editstatus.push({OverAge:a.daysforoverage,BillId:e.BillId,EmailID:e.email}),void 0!==a.daysforoverage&&(a.daysforoverage>0?swal("Expense waiting for submission! Over Age in "+a.daysforoverage+" days","",""):0==a.daysforoverage?swal("Expense waiting for submission! Over Age TODAY","",""):swal("Expense in EDIT status Over Aged ","",""))},0)})})},a.getExpensebyStatus=function(){var b=new Date,c=new Date(b-6048e5),d=new Date(b-2592e6),e=new Date(b-7776e6),f=new Date(b-31536e6),g=b;a.dashlist.$loaded().then(function(){a.ExpensebyStatusData=[],a.ExpensebyStatusData.length=0,a.PayStatusCountData=[],a.PayStatusCountData.length=0;var b=[],h=[],i=[];angular.forEach(a.dashlist,function(a){var c=a.SubmitBy,d=a.Chapter,e=a.Region;-1===i.indexOf(c)&&(i.push(c),b.push({OriginatorName:c,Chapter:d,Region:e,PastWeek:0,PastMonth:0,Past3Month:0,Past1Year:0,ALL:0})),-1===i.indexOf(d)&&(i.push(d),h.push({Region:e,Chapter:d,Edit:0,Pending:0,Submitted:0,Resubmit:0,Returned:0,Paid:0,OverAge:0}))}),a.PayStatusCountData=h,a.ExpensebyStatusData=b,console.log("Array1 ",a.ExpensebyStatusData,a.PayStatusCountData),angular.forEach(a.dashlist,function(b){for(var h=b.eventdate.toString().split("/"),i=new Date(h[2],h[0]-1,h[1]),j=0;j<a.ExpensebyStatusData.length;j++)if(a.ExpensebyStatusData[j].Chapter===b.Chapter&&a.ExpensebyStatusData[j].OriginatorName===b.SubmitBy&&a.selectedpaystatus.includes(b.PaymentStatus))switch(b.PaymentStatus){case"Edit":Date.parse(i)>=Date.parse(c)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastWeek=Math.round(100*(a.ExpensebyStatusData[j].PastWeek+b.Amount))/100),Date.parse(i)>=Date.parse(d)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastMonth=Math.round(100*(a.ExpensebyStatusData[j].PastMonth+b.Amount))/100),Date.parse(i)>=Date.parse(e)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past3Month=Math.round(100*(a.ExpensebyStatusData[j].Past3Month+b.Amount))/100),Date.parse(i)>=Date.parse(f)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past1Year=Math.round(100*(a.ExpensebyStatusData[j].Past1Year+b.Amount))/100),a.ExpensebyStatusData[j].ALL=Math.round(100*(a.ExpensebyStatusData[j].ALL+b.Amount))/100;break;case"Pending":Date.parse(i)>=Date.parse(c)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastWeek=Math.round(100*(a.ExpensebyStatusData[j].PastWeek+b.Amount))/100),Date.parse(i)>=Date.parse(d)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastMonth=Math.round(100*(a.ExpensebyStatusData[j].PastMonth+b.Amount))/100),Date.parse(i)>=Date.parse(e)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past3Month=Math.round(100*(a.ExpensebyStatusData[j].Past3Month+b.Amount))/100),Date.parse(i)>=Date.parse(f)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past1Year=Math.round(100*(a.ExpensebyStatusData[j].Past1Year+b.Amount))/100),a.ExpensebyStatusData[j].ALL=Math.round(100*(a.ExpensebyStatusData[j].ALL+b.Amount))/100;break;case"Resubmit":Date.parse(i)>=Date.parse(c)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastWeek=Math.round(100*(a.ExpensebyStatusData[j].PastWeek+b.Amount))/100),Date.parse(i)>=Date.parse(d)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastMonth=Math.round(100*(a.ExpensebyStatusData[j].PastMonth+b.Amount))/100),Date.parse(i)>=Date.parse(e)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past3Month=Math.round(100*(a.ExpensebyStatusData[j].Past3Month+b.Amount))/100),Date.parse(i)>=Date.parse(f)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past1Year=Math.round(100*(a.ExpensebyStatusData[j].Past1Year+b.Amount))/100),a.ExpensebyStatusData[j].ALL=Math.round(100*(a.ExpensebyStatusData[j].ALL+b.Amount))/100;break;case"Submitted":Date.parse(i)>=Date.parse(c)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastWeek=Math.round(100*(a.ExpensebyStatusData[j].PastWeek+b.Amount))/100),Date.parse(i)>=Date.parse(d)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastMonth=Math.round(100*(a.ExpensebyStatusData[j].PastMonth+b.Amount))/100),Date.parse(i)>=Date.parse(e)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past3Month=Math.round(100*(a.ExpensebyStatusData[j].Past3Month+b.Amount))/100),Date.parse(i)>=Date.parse(f)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past1Year=Math.round(100*(a.ExpensebyStatusData[j].Past1Year+b.Amount))/100),a.ExpensebyStatusData[j].ALL=Math.round(100*(a.ExpensebyStatusData[j].ALL+b.Amount))/100;break;case"Returned":Date.parse(i)>=Date.parse(c)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastWeek=Math.round(100*(a.ExpensebyStatusData[j].PastWeek+b.Amount))/100),Date.parse(i)>=Date.parse(d)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastMonth=Math.round(100*(a.ExpensebyStatusData[j].PastMonth+b.Amount))/100),Date.parse(i)>=Date.parse(e)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past3Month=Math.round(100*(a.ExpensebyStatusData[j].Past3Month+b.Amount))/100),Date.parse(i)>=Date.parse(f)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past1Year=Math.round(100*(a.ExpensebyStatusData[j].Past1Year+b.Amount))/100),a.ExpensebyStatusData[j].ALL=Math.round(100*(a.ExpensebyStatusData[j].ALL+b.Amount))/100;break;case"Paid":Date.parse(i)>=Date.parse(c)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastWeek=Math.round(100*(a.ExpensebyStatusData[j].PastWeek+b.Amount))/100),Date.parse(i)>=Date.parse(d)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastMonth=Math.round(100*(a.ExpensebyStatusData[j].PastMonth+b.Amount))/100),Date.parse(i)>=Date.parse(e)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past3Month=Math.round(100*(a.ExpensebyStatusData[j].Past3Month+b.Amount))/100),Date.parse(i)>=Date.parse(f)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past1Year=Math.round(100*(a.ExpensebyStatusData[j].Past1Year+b.Amount))/100),a.ExpensebyStatusData[j].ALL=Math.round(100*(a.ExpensebyStatusData[j].ALL+b.Amount))/100;break;case"Over Age":Date.parse(i)>=Date.parse(c)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastWeek=Math.round(100*(a.ExpensebyStatusData[j].PastWeek+b.Amount))/100),Date.parse(i)>=Date.parse(d)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].PastMonth=Math.round(100*(a.ExpensebyStatusData[j].PastMonth+b.Amount))/100),Date.parse(i)>=Date.parse(e)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past3Month=Math.round(100*(a.ExpensebyStatusData[j].Past3Month+b.Amount))/100),Date.parse(i)>=Date.parse(f)&&Date.parse(i)<=Date.parse(g)&&(a.ExpensebyStatusData[j].Past1Year=Math.round(100*(a.ExpensebyStatusData[j].Past1Year+b.Amount))/100),a.ExpensebyStatusData[j].ALL=Math.round(100*(a.ExpensebyStatusData[j].ALL+b.Amount))/100}for(var j=0;j<a.PayStatusCountData.length;j++)if(a.PayStatusCountData[j].Chapter===b.Chapter)switch(b.PaymentStatus){case"Edit":a.PayStatusCountData[j].Edit=a.PayStatusCountData[j].Edit+1,a.gettotaldata.Edit=a.gettotaldata.Edit+1;break;case"Pending":a.PayStatusCountData[j].Pending=a.PayStatusCountData[j].Pending+1,a.gettotaldata.Pending=a.gettotaldata.Pending+1;break;case"Resubmit":a.PayStatusCountData[j].Resubmit=a.PayStatusCountData[j].Resubmit+1,a.gettotaldata.Resubmit=a.gettotaldata.Resubmit+1;break;case"Submitted":a.PayStatusCountData[j].Submitted=a.PayStatusCountData[j].Submitted+1,a.gettotaldata.Submitted=a.gettotaldata.Submitted+1;break;case"Returned":a.PayStatusCountData[j].Returned=a.PayStatusCountData[j].Returned+1,a.gettotaldata.Returned=a.gettotaldata.Returned+1;break;case"Paid":a.PayStatusCountData[j].Paid=a.PayStatusCountData[j].Paid+1,a.gettotaldata.Paid=a.gettotaldata.Paid+1;break;case"Over Age":a.PayStatusCountData[j].OverAge=a.PayStatusCountData[j].OverAge+1,a.gettotaldata.OverAge=a.gettotaldata.OverAge+1}}),void 0!==a.PayStatusCountData&&a.buildChapterStatusData(),a.buildExpenseData()})},a.Showmeedit=function(a){g.path("/expense/expensedetail/"+a)},a.ViewExpenseList=function(){g.path("/expense/viewexpense")},a.viewexpensedash=function(){a.getSiteData=[],a.getSiteData.length=0,a.ExpensebyStatusData=[],a.ExpensebyStatusData.length=0,a.userRole=c.getRole(),a.userChapter=c.getChapter(),a.useremail=e.getCurrentUserEmail(),a.dashlist=d.getViewExpenseData(a.useremail,a.userRole,a.userChapter),a.expensedash=[],a.expensedash.length=0,a.pielabels=[],a.pielabels.length=0,a.piedata=[],a.piedata.length=0,a.piecolor=[],a.piecolor.length=0,a.PieDisplay="",a.gettotaldata={Edit:0,Pending:0,Submitted:0,Resubmit:0,Returned:0,Paid:0,OverAge:0};var b=0,f=[0,0,0,0,0,0,0,0,0,0,0,0],g=[0,0,0,0,0,0,0,0,0,0,0,0],h=0,i=[0,0,0,0,0,0,0,0,0,0,0,0],j=[0,0,0,0,0,0,0,0,0,0,0,0],k=0,l=[0,0,0,0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0,0,0,0],n=0,o=[0,0,0,0,0,0,0,0,0,0,0,0],p=[0,0,0,0,0,0,0,0,0,0,0,0],q=0,r=[0,0,0,0,0,0,0,0,0,0,0,0],s=[0,0,0,0,0,0,0,0,0,0,0,0],t=0,u=[0,0,0,0,0,0,0,0,0,0,0,0],v=[0,0,0,0,0,0,0,0,0,0,0,0],w=0,x=[0,0,0,0,0,0,0,0,0,0,0,0],y=[0,0,0,0,0,0,0,0,0,0,0,0],z="",A="",B="",C=["","January","February","March","April","May","June","July","August","September","October","November","December"];a.resubmitcnt=0,a.dashlist.$loaded().then(function(){a.checkedOverageDays(),a.getExpensebyStatus(),angular.forEach(a.dashlist,function(c){switch(A=c.eventdate.split("/"),B="",B=C[parseInt(A[0],10)],c.PaymentStatus){case"Paid":t+=1,a.labels1[0]==B&&(u[0]=u[0]+1,v[0]=v[0]+c.Amount),a.labels1[1]==B&&(u[1]=u[1]+1,v[1]=v[1]+c.Amount),a.labels1[2]==B&&(u[2]=u[2]+1,v[2]=v[2]+c.Amount),a.labels1[3]==B&&(u[3]=u[3]+1,v[3]=v[3]+c.Amount),a.labels1[4]==B&&(u[4]=u[4]+1,v[4]=v[4]+c.Amount),a.labels1[5]==B&&(u[5]=u[5]+1,v[5]=v[5]+c.Amount),a.labels1[6]==B&&(u[6]=u[6]+1,v[6]=v[6]+c.Amount),a.labels1[7]==B&&(u[7]=u[7]+1,v[7]=v[7]+c.Amount),a.labels1[8]==B&&(u[8]=u[8]+1,v[8]=v[8]+c.Amount),a.labels1[9]==B&&(u[9]=u[9]+1,v[9]=v[9]+c.Amount),a.labels1[10]==B&&(u[10]=u[10]+1,v[10]=v[10]+c.Amount),a.labels1[11]==B&&(u[11]=u[11]+1,v[11]=v[11]+c.Amount);break;case"Edit":w+=1,z=c.BillId,a.labels1[0]==B&&(x[0]=x[0]+1,y[0]=y[0]+c.Amount),a.labels1[1]==B&&(x[1]=x[1]+1,y[1]=y[1]+c.Amount),a.labels1[2]==B&&(x[2]=x[2]+1,y[2]=y[2]+c.Amount),a.labels1[3]==B&&(x[3]=x[3]+1,y[3]=y[3]+c.Amount),a.labels1[4]==B&&(x[4]=x[4]+1,y[4]=y[4]+c.Amount),a.labels1[5]==B&&(x[5]=x[5]+1,y[5]=y[5]+c.Amount),a.labels1[6]==B&&(x[6]=x[6]+1,y[6]=y[6]+c.Amount),a.labels1[7]==B&&(x[7]=x[7]+1,y[7]=y[7]+c.Amount),a.labels1[8]==B&&(x[8]=x[8]+1,y[8]=y[8]+c.Amount),a.labels1[9]==B&&(x[9]=x[9]+1,y[9]=y[9]+c.Amount),a.labels1[10]==B&&(x[10]=x[10]+1,y[10]=y[10]+c.Amount),a.labels1[11]==B&&(x[11]=x[11]+1,y[11]=y[11]+c.Amount);break;case"Over Age":q+=1,a.labels1[0]==B&&(r[0]=r[0]+1,s[0]=s[0]+c.Amount),a.labels1[1]==B&&(r[1]=r[1]+1,s[1]=s[1]+c.Amount),a.labels1[2]==B&&(r[2]=r[2]+1,s[2]=s[2]+c.Amount),a.labels1[3]==B&&(r[3]=r[3]+1,s[3]=s[3]+c.Amount),a.labels1[4]==B&&(r[4]=r[4]+1,s[4]=s[4]+c.Amount),a.labels1[5]==B&&(r[5]=r[5]+1,s[5]=s[5]+c.Amount),a.labels1[6]==B&&(r[6]=r[6]+1,s[6]=s[6]+c.Amount),a.labels1[7]==B&&(r[7]=r[7]+1,s[7]=s[7]+c.Amount),a.labels1[8]==B&&(r[8]=r[8]+1,s[8]=s[8]+c.Amount),a.labels1[9]==B&&(r[9]=r[9]+1,s[9]=s[9]+c.Amount),a.labels1[10]==B&&(r[10]=r[10]+1,s[10]=s[10]+c.Amount),a.labels1[11]==B&&(r[11]=r[11]+1,s[11]=s[11]+c.Amount);break;case"Pending":b+=1,a.labels1[0]==B&&(f[0]=f[0]+1,g[0]=g[0]+c.Amount),a.labels1[1]==B&&(f[1]=f[1]+1,g[1]=g[1]+c.Amount),a.labels1[2]==B&&(f[2]=f[2]+1,g[2]=g[2]+c.Amount),a.labels1[3]==B&&(f[3]=f[3]+1,g[3]=g[3]+c.Amount),a.labels1[4]==B&&(f[4]=f[4]+1,g[4]=g[4]+c.Amount),a.labels1[5]==B&&(f[5]=f[5]+1,g[5]=g[5]+c.Amount),a.labels1[6]==B&&(f[6]=f[6]+1,g[6]=g[6]+c.Amount),a.labels1[7]==B&&(f[7]=f[7]+1,g[7]=g[7]+c.Amount),a.labels1[8]==B&&(f[8]=f[8]+1,g[8]=g[8]+c.Amount),a.labels1[9]==B&&(f[9]=f[9]+1,g[9]=g[9]+c.Amount),a.labels1[10]==B&&(f[10]=f[10]+1,g[10]=g[10]+c.Amount),a.labels1[11]==B&&(f[11]=f[11]+1,g[11]=g[11]+c.Amount);break;case"Returned":n+=1,a.labels1[0]==B&&(o[0]=o[0]+1,p[0]=p[0]+c.Amount),a.labels1[1]==B&&(o[1]=o[1]+1,p[1]=p[1]+c.Amount),a.labels1[2]==B&&(o[2]=o[2]+1,p[2]=p[2]+c.Amount),a.labels1[3]==B&&(o[3]=o[3]+1,p[3]=p[3]+c.Amount),a.labels1[4]==B&&(o[4]=o[4]+1,p[4]=p[4]+c.Amount),a.labels1[5]==B&&(o[5]=o[5]+1,p[5]=p[5]+c.Amount),a.labels1[6]==B&&(o[6]=o[6]+1,p[6]=p[6]+c.Amount),a.labels1[7]==B&&(o[7]=o[7]+1,p[7]=p[7]+c.Amount),a.labels1[8]==B&&(o[8]=o[8]+1,p[8]=p[8]+c.Amount),a.labels1[9]==B&&(o[9]=o[9]+1,p[9]=p[9]+c.Amount),a.labels1[10]==B&&(o[10]=o[10]+1,p[10]=p[10]+c.Amount),a.labels1[11]==B&&(o[11]=o[11]+1,p[11]=p[11]+c.Amount);break;case"Resubmit":k+=1,a.labels1[0]==B&&(l[0]=l[0]+1,m[0]=m[0]+c.Amount),a.labels1[1]==B&&(l[1]=l[1]+1,m[1]=m[1]+c.Amount),a.labels1[2]==B&&(l[2]=l[2]+1,m[2]=m[2]+c.Amount),a.labels1[3]==B&&(l[3]=l[3]+1,m[3]=m[3]+c.Amount),a.labels1[4]==B&&(l[4]=l[4]+1,m[4]=m[4]+c.Amount),a.labels1[5]==B&&(l[5]=l[5]+1,m[5]=m[5]+c.Amount),a.labels1[6]==B&&(l[6]=l[6]+1,m[6]=m[6]+c.Amount),a.labels1[7]==B&&(l[7]=l[7]+1,m[7]=m[7]+c.Amount),a.labels1[8]==B&&(l[8]=l[8]+1,m[8]=m[8]+c.Amount),a.labels1[9]==B&&(l[9]=l[9]+1,m[9]=m[9]+c.Amount),a.labels1[10]==B&&(l[10]=l[10]+1,m[10]=m[10]+c.Amount),a.labels1[11]==B&&(l[11]=l[11]+1,m[11]=m[11]+c.Amount),a.useremail==c.email&&(a.resubmitcnt=a.resubmitcnt+1);break;case"Submitted":h+=1,a.labels1[0]==B&&(i[0]=i[0]+1,j[0]=j[0]+c.Amount),a.labels1[1]==B&&(i[1]=i[1]+1,j[1]=j[1]+c.Amount),a.labels1[2]==B&&(i[2]=i[2]+1,j[2]=j[2]+c.Amount),a.labels1[3]==B&&(i[3]=i[3]+1,j[3]=j[3]+c.Amount),a.labels1[4]==B&&(i[4]=i[4]+1,j[4]=j[4]+c.Amount),a.labels1[5]==B&&(i[5]=i[5]+1,j[5]=j[5]+c.Amount),a.labels1[6]==B&&(i[6]=i[6]+1,j[6]=j[6]+c.Amount),a.labels1[7]==B&&(i[7]=i[7]+1,j[7]=j[7]+c.Amount),a.labels1[8]==B&&(i[8]=i[8]+1,j[8]=j[8]+c.Amount),a.labels1[9]==B&&(i[9]=i[9]+1,j[9]=j[9]+c.Amount),a.labels1[10]==B&&(i[10]=i[10]+1,j[10]=j[10]+c.Amount),a.labels1[11]==B&&(i[11]=i[11]+1,j[11]=j[11]+c.Amount)}});a.TotalExpenseCount=b+w+h+n+k+t+q,b>0&&(a.piedata.push(b),a.pielabels.push("Pending"),a.piecolor.push("#FFA500"),a.series1.push("Pending"),a.data1.push(f),a.data2.push(g),a.expensedash.push({Label:"Pending",Data:b})),w>0&&(a.piedata.push(w),a.pielabels.push("Edit"),a.piecolor.push("#FF6347"),a.series1.push("Edit"),a.data1.push(x),a.data2.push(y),a.expensedash.push({Label:"Edit",Data:w})),h>0&&(a.piedata.push(h),a.pielabels.push("Submitted"),a.piecolor.push("#0816ff"),a.series1.push("Submitted"),a.data1.push(i),a.data2.push(j),a.expensedash.push({Label:"Submitted",Data:h})),n>0&&(a.piedata.push(n),a.pielabels.push("Returned"),a.piecolor.push("#08ffff"),a.series1.push("Returned"),a.data1.push(o),a.data2.push(p),a.expensedash.push({Label:"Returned",Data:n})),k>0&&(a.piedata.push(k),a.pielabels.push("Resubmit"),a.piecolor.push("#08ffff"),a.series1.push("Resubmit"),a.data1.push(l),a.data2.push(m),a.expensedash.push({Label:"Resubmit",Data:k})),t>0&&(a.piedata.push(t),a.pielabels.push("Paid"),a.piecolor.push("#08ff21"),a.series1.push("Paid"),a.data1.push(u),a.data2.push(v),a.expensedash.push({Label:"Paid",Data:t})),q>0&&(a.piedata.push(q),a.pielabels.push("Over Age"),a.piecolor.push("#FF0000"),a.series1.push("Over Age"),a.data1.push(r),a.data2.push(s),a.expensedash.push({Label:"Over Age",Data:q}))})},a.buildChapterStatusData=function(){angular.element(document).ready(function(){$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={type:"PUT"},$.fn.DataTable.isDataTable($("#ChapterViewTable"))&&a.CVTable.destroy(),a.CVTable=$("#ChapterViewTable").DataTable({responsive:!0,autoWidth:!1,data:a.PayStatusCountData,scrollY:"200px",scrollCollapse:!0,paging:!1,dom:"Bfrtip",buttons:["excel","pdf","print"],columns:[{data:"Region",title:"Region",width:"80px"},{data:"Chapter",title:"Chapter",width:"120px"},{data:"Edit",title:"Edit",width:"40px"},{data:"Pending",title:"Pending",width:"40px"},{data:"Resubmit",title:"Resubmit",width:"40px"},{data:"Submitted",title:"Submitted",width:"40px"},{data:"Returned",title:"Returned",width:"40px"},{data:"Paid",title:"Paid",width:"40px"},{data:"OverAge",title:"Over Age",width:"40px"}],columnDefs:[{targets:0,width:"25%"},{targets:1,width:"35%"},{targets:2},{targets:3}],order:[[2,"desc"]]})})},a.buildExpenseData=function(){angular.element(document).ready(function(){$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={type:"PUT"},$.fn.DataTable.isDataTable($("#ExpenseViewTable"))&&a.EVTable.destroy(),a.EVTable=$("#ExpenseViewTable").removeAttr("width").DataTable({responsive:!0,autoWidth:!1,data:a.ExpensebyStatusData,scrollY:"200px",scrollCollapse:!0,paging:!1,dom:"Bfrtip",buttons:["excel","pdf","print"],columns:[{data:"Region",title:"Region",width:"70px"},{data:"Chapter",title:"Chapter",width:"90px"},{data:"OriginatorName",title:"Originator Name",width:"120px"},{data:"PastWeek",title:"Past Week",width:"50px",render:$.fn.dataTable.render.number(",",".",2,"$")},{data:"PastMonth",title:"Past Month",width:"50px",render:$.fn.dataTable.render.number(",",".",2,"$")},{data:"Past3Month",title:"Past 3 Month",width:"50px",render:$.fn.dataTable.render.number(",",".",2,"$")},{data:"Past1Year",title:"Past 1 Year",width:"50px",render:$.fn.dataTable.render.number(",",".",2,"$")},{data:"ALL",title:"ALL",width:"40px",render:$.fn.dataTable.render.number(",",".",2,"$")}],columnDefs:[{targets:0,width:"25%"},{targets:1,width:"35%"},{targets:2},{targets:3}],order:[[2,"desc"]]})})}}]),angular.module("ohanaApp").service("howLogService",["$rootScope","commonServices",function(a,b){this.logPrimaryChapterChange=function(a,c,d,e){var f=Date.now(),g={type:"primary",timeStamp:f,userName:a,changedBy:c,oldChapter:d,newChapter:e};b.pushData("/logs/nationalLogs/memberTraffic/",g)},this.logSecondaryChapterChange=function(a,c,d,e){var f=Date.now(),g={type:"secondary",timeStamp:f,userName:a,changedBy:c,oldChapters:d,newChapters:e};b.pushData("/logs/nationalLogs/memberTraffic/",g)},this.logNewUserAdded=function(a,b,c){},this.logUserAddedToChapter=function(a,c,d){var e=Date.now(),f={type:"primary",status:"added",timeStamp:e,userName:a,changedBy:c,newChapters:d};b.pushData("/logs/chapterLogs/memberTraffic/primaryChapter/"+d,f)},this.logUserAddedToSecondaryChapter=function(a,c,d){
_.each(d,function(d){var e=Date.now(),f={type:"secondary",status:"added",timeStamp:e,userName:a,changedBy:c,newChapter:d};b.pushData("/logs/chapterLogs/memberTraffic/secondaryChapter/"+d,f)})},this.logUserRemovedFromChapter=function(a,c,d){var e=Date.now(),f={type:"primary",status:"removed",timeStamp:e,userName:a,changedBy:c,oldChapter:d};b.pushData("/logs/chapterLogs/memberTraffic/primaryChapter/"+d,f)},this.logUserRemovedFromSecondaryChapter=function(a,c,d){_.each(d,function(d){var e=Date.now(),f={type:"secondary",status:"removed",timeStamp:e,userName:a,changedBy:c,oldChapter:d};b.pushData("/logs/chapterLogs/memberTraffic/secondaryChapter/"+d,f)})}}]),angular.module("ohanaApp").controller("ExpenseExpenseconfigCtrl",["$scope","commonServices","userService","$q","$location",function(a,b,c,d,e){function f(){a.expenseconfig=[],a.expenseconfig.length=0,a.ConfigLog=[],a.ConfigLog.length=0,console.log("Entry"),b.getData("/Config/").then(function(b){b?(a.ConfigLog=b.ExpenseLog,a.expenseconfig=b.Expense,a.$apply(function(){}),a.buildConfigData()):(a.expenseconfig.push({id:1,startdate:"",enddate:"",MileRate:0,TrailerRate:0,OverAgeWarning:0,OverAgeError:0,OverAgeDays:0}),a.ConfigLog=[],console.log("Entry3"))})["catch"](function(b){console.log("Entry4"),a.expenseconfig=[],a.ConfigLog=[]})}a.ConfigLog=[],a.expenseconfig=[],a.ConfigLog.length=0,a.expenseconfig.length=0,a.expenseconfigdata=[],a.opened={},a.open=function(b,c){b.preventDefault(),b.stopPropagation(),a.opened[c]=!a.opened[c]},a.expenseconfig.startdate=new Date,a.expenseconfig.enddate=new Date,a.expenseconfig=[],a.expenseconfig.length=0,a.saveConfig=function(b,c){a.isDateValid(a.expenseconfig[c-1])?(a.expenseconfigdata.push({id:c,startdate:a.expenseconfig[c-1].startdate,enddate:a.expenseconfig[c-1].enddate,MileRate:a.expenseconfig[c-1].MileRate,TrailerRate:a.expenseconfig[c-1].TrailerRate,OverAgeWarning:a.expenseconfig[c-1].OverAgeWarning,OverAgeError:a.expenseconfig[c-1].OverAgeError,OverAgeDays:a.expenseconfig[c-1].OverAgeDays}),a.expenseconfigdata.push(b),angular.extend(b,{id:c}),a.updateconfigdata(),console.log("save ",b,c,a.expenseconfigdata)):swal("Invalid","Date range is invalid!","warning")},a.removeConfig=function(b){var c=b;swal({title:"Confirm Delete?",text:"Woud you like to delete this expense config?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it!",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",allowOutsideClick:!1,allowEscapeKey:!1,buttonsStyling:!1}).then(function(){console.log(c),a.expenseconfig.splice(b,1),swal("Deleted!","Your config has been deleted.","success")}),a.updateconfigdata(!1)},a.addConfig=function(){var b=0;void 0!==a.expenseconfig?(b=a.expenseconfig.length+1,a.inserted={id:a.expenseconfig.length+1,startdate:"",enddate:"",MileRate:0,TrailerRate:0,OverAgeWarning:30,OverAgeError:45,OverAgeDays:60}):(console.log("emo"),a.expenseconfig=[],a.inserted={id:1,startdate:"",enddate:"",MileRate:0,TrailerRate:0,OverAgeWarning:0,OverAgeError:0,OverAgeDays:0}),a.expenseconfig.push(a.inserted)},f(),a.cancel=function(b){var c=b.id-1;a.expenseconfig.splice(c,1),a.updateconfigdata()},a.isDateValid=function(a){var b=a.startdate,c=a.enddate;return""===b||""===c||null===b||null===c?!1:(b=moment(a.startDate),c=moment(a.enddate),b.isAfter(c)?!1:!0)},a.GoBack=function(){e.path("/expense/viewexpense")},a.updateconfigdata=function(d){a.userName=c.getUserData();var e=a.userName.name.first+" "+a.userName.name.last,g=new Date,h="";h=g.getHours()>12?g.getFullYear()+"-"+("0"+(g.getMonth()+1)).slice(-2)+"-"+("0"+g.getDate()).slice(-2)+" "+("0"+(g.getHours()-12)).slice(-2)+":"+("0"+g.getMinutes()).slice(-2)+":"+("0"+g.getSeconds()).slice(-2)+" PM":g.getFullYear()+"-"+("0"+(g.getMonth()+1)).slice(-2)+"-"+("0"+g.getDate()).slice(-2)+" "+("0"+g.getHours()).slice(-2)+":"+("0"+g.getMinutes()).slice(-2)+":"+("0"+g.getSeconds()).slice(-2)+" AM",a.ConfigLog.push({StatusBy:e,StatusDate:h});for(var i=0;i<a.ConfigLog.length;i++)null!=a.ConfigLog[i]&&delete a.ConfigLog[i].$$hashKey;for(var i=0;i<a.expenseconfig.length;i++)null!=a.expenseconfig[i]&&delete a.expenseconfig[i].$$hashKey;a.config={Expense:a.expenseconfig,ExpenseLog:a.ConfigLog},b.updateData("/Config/",a.config),d&&swal({text:"Updated Expense Config",type:"success",timer:2500}),f(),a.buildConfigData()},a.buildConfigData=function(){angular.element(document).ready(function(){$.fn.editable.defaults.mode="popup",$.fn.editable.defaults.ajaxOptions={type:"PUT"},$.fn.DataTable.isDataTable($("#ConfigStatusTable"))&&a.EVTable.destroy(),a.EVTable=$("#ConfigStatusTable").removeAttr("width").DataTable({responsive:!0,autoWidth:!1,data:a.ConfigLog,scrollY:"200px",scrollCollapse:!0,paging:!1,columns:[{data:"StatusDate",title:"Status Date",width:"70px"},{data:"StatusBy",title:"Status By",width:"90px"}],columnDefs:[{targets:0,width:"25%"},{targets:1,width:"35%"}],order:[[0,"desc"]]})})}}]),angular.module("ohanaApp").run(["$templateCache",function(a){"use strict";a.put("views/chapters.html",'<!DOCTYPE html> <div class="container"> <h1>Heroes on the Water Chapters</h1> <form class="form-inline"> <!--         removing ability to search by keyword for now\r\n --> <!-- <div class="form-group">\r\n            <label for="eventName" control-label>Keyword</label>\r\n            <input type="text" class="form-control" ng-model="keywordFilter" ng-model-options="{debounce:1000}">\r\n        </div> --> <div class="form-group"> <label for="eventName" control-label>Zip Code</label> <input type="text" class="form-control" ng-model="locationFilter" ng-change="ZipUpdate()" ng-model-options="{debounce:1000}"> </div> </form> <div ng-show="chapters.length"> <div class="row"> <div class="col-sm-12"> <h1>Chapters</h1> </div> </div> <div class="row" ng-repeat="chapter in chapters"> <div class="col-sm-12"> <h4><a href="{{chapter.url}}" target="_blank">{{chapter.value}}</a> </h4></div> </div> </div> <div class="row" ng-hide="chapters.length"> <h2>Your search did not yield any results. Please try again.</h2> </div> </div>'),a.put("views/expense/expenseconfig.html",'<div class="container" ng-init="loadexpenseconfig()"> <div class="panel panel-primary"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">HOW Expense Configuration</h3> </div> <div> <table class="table table-striped table-bordered"> <thead> <tr> <th>Valid From</th> <th>Valid To</th> <th>Mile Rate ($)</th> <th>Trailer Mile Rate ($)</th> <th class="redwarning">Over Age Warning (days)</th> <th class="rederror"><b>Over Age Need Attention (days)</b></th> <th class="rederror"><b>Over Age Days</b></th> <th class="col-xs-2">Edit</th> </tr> </thead> <tbody> <tr ng-repeat="item in expenseconfig "> <td> <a e-style="width: 90px " href="#" editable-bsdate="item.startdate " e-is-open="opened.$data " e-ng-click="open($event, \'$data\') " e-datepicker-popup="dd-MMMM-yyyy "> {{ (item.startdate | date:"MM/dd/yyyy ") || \'empty\' }} </a> </td> <td> <a e-style="width: 90px " href="#" editable-bsdate="item.enddate " e-is-open="opened.$data " e-ng-click="open($event, \'$data\') " e-datepicker-popup="dd-MMMM-yyyy "> {{ (item.enddate | date:"MM/dd/yyyy ") || \'empty\' }} </a> </td> <td> <input id="MileRate" name="MileRate" class="textboxsize" ng-model="item.MileRate " type="text " format-as-currency> </td> <td> <input id="TrailerRate" name="TrailerRate" class="textboxsize" ng-model="item.TrailerRate " type="text " format-as-currency> </td> <td> <input ng-model="item.OverAgeWarning " name="OverAgeWarning " class="textboxsize" placeholder="30 " ng-pattern="/^[0-9]{1,7}$/ " type="number "> </td> <td> <input ng-model="item.OverAgeError " name="OverAgeError " class="textboxsize" placeholder="45 " ng-pattern="/^[0-9]{1,7}$/ " type="number "> <p ng-if="item.OverAgeWarning> item.OverAgeError" class="field-feedback"> Should be greater than Over Age Warning (days) </p> </td> <td> <input ng-model="item.OverAgeDays " name="OverAgeDays " class="textboxsize" placeholder="60 " ng-pattern="/^[0-9]{1,7}$/ " type="number "> <p ng-if="item.item.OverAgeError> item.OverAgeDays" class="field-feedback"> Should be greater than Over Age Attention (days) </p> </td> <td class="col-xs-2"> <!-- form --> <form editable-form name="rowform" onbeforesave="saveConfig($data,item.id)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="inserted == item"> <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-primary"> save </button> <button type="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel(); cancel(item)" class="btn btn-default"> cancel </button> </form> <div ng-show="!rowform.$visible"> <input type="button" class="btn btn-primary" ng-click="rowform.$show()" value="Edit"> <input type="button" class="btn btn-danger" ng-click="removeConfig($index)" value="Delete"> </div> </td> </tr> </tbody></table> <input type="button" class="btn btn-primary" ng-click="addConfig()" value="Add Row"> <input type="button" class="btn btn-primary" ng-click="GoBack()" value="Go Back to View Expense List "> </div> </div> <div class="panel panel-primary"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">Expense Configuration Change Log</h3> </div> <div class="panel-body fixed-panel"> <table id="ConfigStatusTable" class="display table table-bordered responsive" cellspacing="0" width="100%"> </table> </div> </div> </div>'),a.put("views/expense/expensedetail.html",'<div class="container" ng-init="loadexpensedata()"> <form id="ExpDetail" name="ExpDetail" method="post" class="form-inline" novalidate> <div class="form-group row expense_pad1"> <input type="button" class="btn btn-primary" ng-click="GoBack()" value="Go Back to Expense List"> </div> <div class="panel panel-default" ng-repeat="dexedit in expense"> <div class="panel-heading clearfix"> <b> <h3 class="panel-title pull-left">Expense Detail {{EditMode}}</h3></b> </div> <div class="labeldisplay" style="width:100%"> <div class="row"> <div class="col-lg-3"> <label for="leventdate" class="">Event Date</label> <div> <label id="leventdate" class="" placeholder="0" ng-model="dexedit.ventdate"> {{dexedit.eventdate}}</label> </div> </div> <div class="form-group col-lg-3"> <label for="lchapter" class="col-form-label">Chapter Name </label> <div> <label id="lchapter" class="form-control" ng-model="dexedit.Chapter" style="height:auto"> {{dexedit.Chapter.text}}</label> </div> </div> <div class="form-group col-lg-3"> <label for="ltotalcost" class="col-form-label">Total Expense</label> <div> <label id="ltotalcost" class="form-control" ng-model="dexedit.Amount"> {{ ((dexedit.Line[0].Quantity * dexedit.Line[0].Rate) + (dexedit.Line[1].Quantity * dexedit.Line[1].Rate) + TotalLineCost ) | currency}} </label> </div> </div> <div class="form-group col-lg-3"> <label for="lsubmitby" class="col-form-label">Created By</label> <div> <label id="lsubmitby" class="form-control" ng-model="dexedit.SubmitBy"> {{dexedit.SubmitBy}}</label> </div> </div> </div> <div class="row" style="margin-top:12px"> <div class="form-group col-lg-3"> <label for="lsubmitdate" class="col-form-label">Created On</label> <div> <label id="lsubmitdate" class="form-control" ng-model="dexedit.SubmitDate"> {{dexedit.SubmitDate}}</label> </div> </div> <div class="form-group col-lg-3"> <label for="lsubmitaddress" class="col-form-label">Address</label> <div> <label id="lsubmitaddress" class="form-control" ng-model="dexedit.SubmitAddress" style="height:auto"> {{dexedit.SubmitAddress}} </label> </div> </div> <div class="form-group col-lg-3"> <label for="lPaymentStatus" class="col-form-label">Payment Status</label> <div> <label id="lPaymentStatus" class="form-control" ng-model="dexedit.PaymentStatus"> {{dexedit.PaymentStatus}}</label> </div> </div> <div class="form-group col-lg-3" ng-show="(dexedit.PaymentStatus!=\'Over Age\' &&  dexedit.PaymentStatus!=\'Paid\')"> <button class="btn btn-warning" type="button" class="btn btn-default" title="Payment Status Log" ng-click="openPaymentStatusLog()">Payment Status Log</button> </div> </div> </div> <fieldset ng-disabled="OverageDisable"> <div class="list-group-item"> <div class="form-group row"> <label for="lDescription" class="col-form-label">Business purpose, Origin and Destination</label> <div> <input id="lDescription" ng-model="dexedit.Description" type="text" class="form-control" title="Business purpose, Origin & Destination" size="120" placeholder="Business purpose, Origin & Destination" required> </div> </div> </div> <div class="list-group-item"> <h4>Mileage for Travel</h4> <div class="row"> <div class="form-grou col-lg-4"> <label for="lquantity1" class="col-form-label"> Miles Driven </label> <div> <input id="lquantity1" ng-model="dexedit.Line[0].Quantity" name="miles" class="form-control" placeholder="0" ng-pattern="/^[0-9]{1,7}$/" type="number"> <p ng-if="ExpDetail.miles.$error.pattern" class="field-feedback"> Enter miles driven > 0 </p></div> </div> <div class="form-group col-lg-4"> <label for="lrate1" class="col-form-label">Mile Rate</label> <div> <!-- <input id="lrate1" ng-model="dexedit.Line[0].Rate" name="milerate" class="form-control " placeholder="0.25" type="text" format-as-currency> --> <label id="lrate1" ng-model="dexedit.Line[0].Rate" name="milerate" class="form-control">{{ dexedit.Line[0].Rate | currency}}</label> </div> </div> <div class="form-group col-lg-4"> <label for="lamount1" class="col-form-label">Amount</label> <div> <label id="lamount1" class="form-control" placeholder="0" ng-model="exp.Line[0].Amount" name="Amount1">{{ (dexedit.Line[0].Quantity * dexedit.Line[0].Rate) | currency}}</label> </div> </div> </div> </div> <div class="list-group-item"> <h4>Mileage for Trailer Hauling</h4> <div class="row"> <div class="form-group col-lg-4"> <label for="lquantity2" class="col-form-label">Trailer Miles</label> <div> <input id="lquantity2" ng-model="dexedit.Line[1].Quantity" name="trailermiles" class="form-control" placeholder="0" ng-pattern="/^[0-9]{1,7}$/" type="number"> <p ng-if="ExpDetail.trailermiles.$error.pattern" class="field-feedback"> Enter trailer hauling miles > 0 </p> </div> </div> <div class="form-group col-lg-4"> <label for="lrate2" class="col-form-label">Mile Rate</label> <div> <label id="lrate2" ng-model="dexedit.Line[1].Rate" name="trailermilerate" class="form-control">{{ dexedit.Line[1].Rate | currency}}</label> </div> </div> <div class="form-group col-lg-4"> <label for="lamount2" class="col-form-label">Amount</label> <div> <label id="lamount2" class="form-control" placeholder="0" ng-model="exp.Line[1].Amount" name="Amount2">{{ (dexedit.Line[1].Quantity * dexedit.Line[1].Rate) | currency}}</label> </div> </div> </div> </div> <div class="list-group-item"> <label for="" class="col-md-12" title="Other Expenses"> <h4>Other Expenses</h4> </label> <table class="table table-striped table-bordered"> <thead> <tr> <th> <input type="checkbox" ng-model="selectedAll" ng-click="checkAll()"> </th> <th>Description</th> <th>Amount</th> </tr> </thead> <tbody> <tr ng-repeat="Line in LineDetails"> <td> <input type="checkbox" ng-model="Line.selected"> </td> <td> <input type="text" size="60" class="form-control" ng-model="Line.Description" name="LineDescription" placeholder="Explanation of Other expenses" title="Explanation of Other expenses" required> </td> <td> <div class="input-group"> <input id="lineamount" name="lineamount" class="form-control" ng-model="Line.Amount" type="text" format-as-currency> </div> </td> </tr> </tbody> </table> <div id="OtherExpensebtn"> <input id="btn_addNew" ng-model="btn_addNew" type="submit" class="btn btn-primary btnalign" ng-click="addNew()" value="Add New"> <input id="btn_remove" ng-model="btn_remove" ng-hide="!LineDetails.length" type="button" class="btn btn-danger btnalign" ng-click="remove()" value="Remove"> </div> </div> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">Bill Receipts</h3> </div> <div id="imagedisplay" class="form-group col-xs-12"> <div class="content panel-body-exp"> <div ng-repeat="vimage in vImageList"> <!-- <div ng-repeat="vimage in vimageurl"> --> <img id="image0" width="40%" height="40%" class="imagedisplay" ng-src="{{vimage.ImageSrc}}" ng-click="viewImage(vimage.ImageSrc);"> <button class="btn btn-danger" ng-click="removeImage($index);"> <!-- <button type="button " class="btn btn-danger btn-xs " ng-click="removeImage(vimage.ImageName); "> --> <span class="glyphicon glyphicon-trash"></span> Remove </button> </div> <div class="form-group row btnalign" ng-show=" ((userRole==\'Participant\' || userRole==\'Volunteer\') && (paystat==\'Edit\'  || paystat==\'Resubmit\')) || ((userRole==\'Chapter Lead\' || userRole==\'National Staff\')  && (paystat==\'Edit\'  || paystat==\'Returned\' ||  paystat==\'Submitted\')) && useremail==expenseemail"> <label for="" class="col-md-12 col-form-label" title="Load supporting documents (images only) including paid bills, receipts, deposit slips. ">Load Additional supporting documents (images only)</label> <input id="fileimage" name="fileimage" type="file" ng-model="expensedocument" nv-file-select="" uploader="uploader" multiple accept="image/*" required title="  " ng-style="expensedocument?{\'color\':\'#333\'}:{\'color\':\'transparent\'}"> <p><b>Number of documents selected </b>- {{ uploader.queue.length }}</p> <p>Click "SAVE EXPENSE" button to upload all newly added documents </p> <div ng-repeat="item in uploader.queue"> <strong>{{ item.file.name }}</strong> <div ng-show="uploader.isHTML5" ng-thumb="{ file: item._file, width: 350,height: 350 }"></div> <span ng-show="item.isSuccess "><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel "><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError "><i class="glyphicon glyphicon-remove"></i></span> <button type="button " class="btn btn-danger btn-xs" ng-click="item.remove() "> <span class="glyphicon glyphicon-trash"></span> Remove </button> </div> <div> </div> </div> </div> </div> </div> </fieldset> <!-- </div> --> <!-- {{userRole}} {{useremail}}{{expenseemail}}{{paystat}}{{iseditexist}}   paystat==\'Submitted\' ||--> <div ng-show="(useremail==expenseemail )" class="form-group" stlye="margin-botton:20px"> <div class="form-group row col-xs-6" ng-show="((userRole==\'Participant\' || userRole==\'Volunteer\') &&  ( paystat==\'Edit\' ||paystat==\'Resubmit\')) || ((userRole==\'Chapter Lead\' || userRole==\'National Staff\') && (  paystat==\'Edit\' || paystat==\'Returned\') ) "> <input type="button" class="btn btn-primary" ng-click="updateexpense(\'update\')" ng-hide="paystat==\'Resubmit\'" value="Save Expense"> <input type="button" class="btn btn-primary" ng-click="updateexpense(\'update\')" ng-show="paystat==\'Resubmit\'" value="Resubmit Expense"> <input type="button" class="btn btn-primary" ng-click="updateexpense(\'submit\')" ng-show="(paystat==\'Edit\') " value=" Submit Expense"> <input type="button" class="btn btn-primary" ng-click="deleteexp()" ng-show="( paystat==\'Pending\' || paystat==\'Edit\') " value="Delete Expense"> <input type="button" class="btn btn-primary" ng-click="GoBack()" value="Cancel"> </div> <div class="form-group row col-xs-6" ng-hide="((useremail==expenseemail ) && ( paystat==\'Edit\' || paystat==\'Resubmit\' || paystat==\'Returned\')  ) || paystat==\'Paid\' || paystat==\'Over Age\'"> <!-- ng-show="iseditexist ==\'false\' "> --> <!-- && (paystat==\'Pending\' || paystat==\'Resubmit\'  || paystat==\'Submitted\' || paystat==\'Returned\')"> --> <input type="button" class="btn btn-primary" value=" Recall Expense" title="Recall expense for Edit" ng-click="RecallExpense(dexedit.BillId, \'Edit\', \'Expense recalled by Orignator\')"> <input type="button" class="btn btn-primary" ng-click="GoBack()" value="Go Back"> </div> <!--   <input type="button" class="btn btn-primary" ng-click="GoBack()" value="Go Back" ng-show="( iseditexist ==\'true\' && (userRole==\'Participant\' || userRole==\'Volunteer\') &&  (paystat==\'Submitted\' || paystat==\'Returned\' || paystat==\'Pending\' ))"> --> </div> <div ng-show="userRole==\'National Staff\'   &&  useremail!=expenseemail && (paystat==\'Pending\' || paystat==\'Edit\' || paystat==\'Resubmit\')"> <input type="button " class="btn btn-primary" ng-click="GoBack() " value="Go Back "> </div> <div ng-hide="useremail==expenseemail || paystat==\'Edit\'  "> <div class="panel panel-default" ng-hide="(userRole==\'Participant\' || userRole==\'Volunteer\' ) || (userRole==\'Chapter Lead\' && (paystat==\'Submitted\' || paystat==\'Returned\' ||paystat==\'Edit\' ) && useremail==expenseemail)  || paystat==\'Over Age\' || paystat==\'Paid\' || (userRole==\'National Staff\'   && (useremail==expenseemail || paystat==\'Pending\' || paystat==\'Resubmit\'))"> <!-- <div class="panel panel-default "> --> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">Payment Status Review</h3> </div> <!-- <ng-show="(userRole==\'Chapter Lead\' && (paystat==\'Pending\' || paystat==\'Returned\')) " > --> <div class="content panel-body-exp" class="form-group col-xs-12"> <!-- <fieldset id="payment_status"> --> <div ng-repeat="paystatus in paystatuslist" class="radiofieldgroup"> <input type="radio" ng-model="dexedit.PaymentStatus" name="name" value="{{paystatus.name}} " required> {{paystatus.name}} </div> <!-- </fieldset> --> <div class="form-group row"> <label for="lpaystatusdescription" class="col-xs-12 col-form-label">Payment Status NOTES:</label> <div class="col-md-12 inputtextpad"> <input id="lpaystatusdescription" ng-model="dexedit.PayStatusDescription" type="text" class="form-control" title="Payment Status NOTES - Explain the reason for changing payment status " size="120" placeholder="Explain the reason for changing payment status" required> </div> </div> <input id="paymentstatusbtn" name="paymentstatusbtn" type="button" ng-click="UpdatePaymentStatus(dexedit.BillId, dexedit.PaymentStatus, dexedit.PayStatusDescription)" class="btn btn-primary" value="Status Update"> <input type="button" class="btn btn-primary" ng-click="GoBack()" value="Cancel"> </div> </div> </div> <div class="panel panel-default" ng-show="(paystat==\'Over Age\' || paystat==\'Paid\' ) "> <h3 class="modal-title" id="modal-title ">Payment Status Log</h3> <div class="modal-body" id="modal-body "> <div> <table class="table table-striped table-bordered"> <thead> <tr> <th>Date</th> <th>Updated By</th> <th>Role</th> <th>Reason</th> <th>Status Changed to</th> </tr> </thead> <tbody> <tr ng-repeat="item in PayStatusLogList "> <td> {{item.PayStatusDate}} </td> <td> {{item.PayStatusBy}} </td> <td> {{item.PayRole}} </td> <td> {{item.PayStatusDescription}} </td> <td> {{item.PayStatus}} </td> </tr> </tbody> </table> </div> </div> <div class="form-group row col-xs-4 divhide" id="divgoback "> <input type="button " class="btn btn-primary" ng-click="GoBack() " value="Go Back "> </div> </div> </div></form> </div> <script type="text/ng-template " id="myModalContent.html "><div class="modal-header ">\r\n            <h3 class="modal-title " id="modal-title ">Payment Status Log</h3>\r\n        </div>\r\n        <div class="modal-body " id="modal-body ">\r\n            <div>\r\n                <table class="table table-striped table-bordered ">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Date</th>\r\n                            <th>Updated By</th>\r\n                            <th>Role</th>\r\n                            <th>Reason</th>\r\n                            <th>Status Changed to</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr ng-repeat="item in PayStatusLogList ">\r\n                            <td>\r\n                                {{item.PayStatusDate}}\r\n                            </td>\r\n                            <td>\r\n                                {{item.PayStatusBy}}\r\n                            </td>\r\n                            <td>\r\n                                {{item.PayRole}}\r\n                            </td>\r\n                            <td>\r\n                                {{item.PayStatusDescription}}\r\n                            </td>\r\n                            <td>\r\n                                {{item.PayStatus}}\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n        <div class="modal-footer ">\r\n            <button class="btn btn-primary " type="button " ng-click="ok() ">CLOSE</button>\r\n        </div></script>'),a.put("views/expense/newexpense.html",'<div class="container"> <form id="newExpenseform" name="newExpenseform" method="post" class="form-inline" novalidate> <div class="panel panel-default"> <div class="panel-heading clearfix expense-panel-heading"> <h3 class="panel-title pull-left">Create New Expense</h3> </div> <div class="list-group-item"> <div class="form-group row"> <label for="exp.eventdate" class="col-xs-6 col-form-label">Event Date</label> <div class="col-xs-10"> <div class="input-group"> <input id="exp.eventdate" type="text" class="form-control expenseInput" ng-model="exp.eventdate" is-open="popup.opened" ng-required="true" datepicker-options="dateOptions" close-text="Close" uib-datepicker-popup="{{format}}" alt-input-formats="altInputFormats"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="dateopen()" title="Event Date - Expenses can only be created for events 60 days prior to current date"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> </div> </div> </div> <div class="list-group-item row"> <div class="form-group col-lg-6"> <label class="col-form-label">Miles Driven </label> <div> <input ng-model="exp.Line[0].Quantity" name="miles" class="form-control expenseInput" placeholder="0" ng-pattern="/^[0-9]{1,7}$/" type="number"> <p ng-if="newExpenseform.miles.$error.pattern" class="field-feedback"> - Enter miles driven > 0 - </p> </div> </div> <div class="form-group col-lg-3"> <label class="col-form-label">Mile Rate</label> <div> <label class="form-control exp_format2" ng-model="exp.Line[0].Rate" name="milerate">{{exp.Line[0].Rate| currency}}</label> </div> </div> <div class="form-group col-lg-3"> <label class="col-form-label">Mileage Amount</label> <div> <label class="form-control exp_format2" placeholder="0" ng-model="exp.Line[0].Amount" name="Amount1">{{ (exp.Line[0].Quantity * exp.Line[0].Rate) | currency}}</label> </div> </div> </div> <div class="list-group-item row"> <div class="form-group col-lg-6"> <label class="col-form-label">Trailer Miles </label> <div> <input ng-model="exp.Line[1].Quantity" name="trailermiles" class="form-control expenseInput" placeholder="0" ng-pattern="/^[0-9]{1,7}$/" type="number"> <p ng-if="newExpenseform.trailermiles.$error.pattern" class="field-feedback"> Enter trailer hauling miles > 0 </p> </div> </div> <div class="form-group col-lg-3"> <label class="col-form-label">Trailer Mile Rate</label> <div> <label class="form-control exp_format2" ng-model="exp.Line[1].Rate" name="trailermilerate">{{exp.Line[1].Rate| currency}}</label> </div> </div> <div class="form-group col-lg-3"> <label class="col-form-label">Trailer Mileage Amount</label> <div> <label class="form-control" placeholder="0" ng-model="exp.Line[1].Amount" name="Amount2">{{ (exp.Line[1].Quantity * exp.Line[1].Rate) | currency}}</label> </div> </div> </div> <div class="list-group-item"> <label for="" class="col-md-12 col-form-label" title="Other Expenses"> <h4>Other Expenses</h4> </label> <table class="table table-striped table-bordered"> <thead> <tr> <th> <input type="checkbox" ng-model="selectedAll" ng-click="checkAll()"> </th> <th>Description</th> <th>Amount</th> </tr> </thead> <tbody> <tr ng-repeat="Line in LineDetails"> <td> <input type="checkbox" ng-model="Line.selected"> </td> <td> <input type="text" size="80" class="form-control expenseInput" ng-model="Line.Description" name="LineDescription" placeholder="Explanation of Other expenses" title="Explanation of Other expenses" required> </td> <td> <input id="lineamount" name="lineamount" class="form-control" ng-model="Line.Amount" type="text" format-as-currency> </td> </tr> </tbody> </table> <div class="form-group"> <input type="submit" class="btn btn-primary btnalign" ng-click="addNew()" value="Add New"> <input ng-hide="!LineDetails.length" type="button" class="btn btn-danger btnalign" ng-click="remove()" value="Remove"> </div> </div> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">Bill Receipts</h3> </div> <div id="imagedisplay" class="form-group col-xs-12"> <div class="content load-image-group"> <span> <strong>Load supporting documents (images only) * </strong> </span> <input id="fileimage" name="fileimage" class="expenseInput" type="file" ng-model="expensedocument" nv-file-select="" uploader="uploader" multiple accept="image/*" required title="  " ng-style="expensedocument?{\'color\':\'#333\'}:{\'color\':\'transparent\'}"> <p><b>Number of documents selected </b>- {{ uploader.queue.length }}</p> <div ng-repeat="item in uploader.queue"> <strong>{{ item.file.name }}</strong> <div ng-show="uploader.isHTML5" ng-thumb="{ file: item._file, width: 350,height: 350 }"></div> <span ng-show="item.isSuccess "><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel "><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError "><i class="glyphicon glyphicon-remove"></i></span> <button type="button " class="btn btn-danger btn-xs" ng-click="item.remove() "> <span class="glyphicon glyphicon-trash"></span> Remove </button> </div> </div> </div> </div> <p>&nbsp;</p> <div class="form-group btnalign"> <label class="col-md-12 col-form-label">Business purpose, Origin and Destination * </label> <div class="col-md-12"> <input name="Description" ng-model="exp.Description" type="text" class="form-control expenseInput" title="Business purpose, Origin & Destination" size="120" placeholder="Business purpose, Origin & Destination" required ng-minlength="3"> <p ng-if="newExpenseform.Description.$invalid" class="field-feedback"> Enter description for your expense </p> <p ng-show="newExpenseform.Description.$error.minlength" class="field-feedback">Description is too short.</p> </div> </div> <div class="panel-body-exp btnalign"> <span> * Denotes a required field </span> <br> <button class="btn btn-primary ur_format_button" ng-click="confirmnewexpense() " type="submit ">Submit Expense</button> <input type="button" class="btn btn-primary" ng-click="saveitforlater()" ng-hide="isEditexist==\'true\'" title="Save current expense enteries for later submission" value="Save it for Later"> <input type="button" class="btn btn-primary" ng-click="ClearFields()" value="Clear"> <input type="button" class="btn btn-primary" ng-click="GoBack()" value="Cancel"> </div> </div> </form> </div>'),a.put("views/expense/overview.html",'<div class="container" ng-init="viewexpensedash()" ng-controller="ExpenseOverviewCtrl"> <form id="expense" name="expense" method="post" class="tab-form-demo"> <div class="container"> <div class="panel-body fixed-panel" style="background:#fff"> <div> <input type="button" class="btn btn-primary" ng-click="ViewExpenseList()" value="View Expense List"> <input type="button" class="btn btn-primary" ng-click="neweexpense()" value="New Expense"> </div> <!-- <div class="btn btn-primary " ng-repeat="dash in editstatus "> --> <div class="btnalignmore form-group row" ng-repeat="dash in editstatus "> <a class="blinkinfo btn-danger" ng-show="useremail == dash.EmailID" ng-click="Showmeedit(dash.BillId)">Submit (Days to Over Age - {{dash.OverAge}}) </a> </div> <a class="blinkinfo btn-danger btn btnalignmore" ng-show="resubmitcnt > 0" ng-click="Showresubmit()">Re-Submit - {{resubmitcnt}}</a> <!-- </div> --> </div> <div class="row" ng-show="editstatus.OverAge > 0 && useremail == editstatus.EmailID"> <div class="col-sm-12"> <div class="panel panel-danger"> <div class="panel-heading"> <h3 class="panel-title">Expense Alert: Need your attention</h3> </div> <div class="panel-body fixed-panel"> <div class="form-group row" ng-repeat="dash in editstatus " ng-show=" userRole!=\'National Staff\'  "> <a class="blinkinfo btn-danger btn btnalignmore" ng-show="dash.OverAge > 0 && useremail == editstatus.EmailID" ng-click="Showmeedit(dash.BillId)">Submit (Days to Over Age - {{dash.OverAge}}) </a> <a class="blinkinfo btn-danger" ng-show="dash.OverAge < 1 && useremail != editstatus.EmailID" ng-click="Showmeedit(dash.BillId)">Submit (Currently Over Aged) </a> </div> <div class="form-group row"> <a class="blinkinfo btn-danger btn btnalignmore" ng-show="resubmitcnt > 0" ng-click="Showresubmit()">Re-Submit - {{resubmitcnt}}</a> </div> </div> </div> </div> </div> <div class="form-group row"> <!-- ng-hide="(userRole==\'Participant\' || userRole==\'Volunteer\' )"> --> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Payment Status Count</h3> </div> <div class="panel-body fixed-panel"> <table id="ChapterViewTable" class="display table table-bordered responsive" cellspacing="0" width="100%"> </table> </div> </div> <div class="form-group row"> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Expense By Chapter with Payment Status Filter</h3> </div> <div class="panel-body fixed-panel"> <div class="form-group row"> <label ng-repeat="paystatus in paystatuslist" class="checkboxgroup"> <input type="checkbox" name="selectedpaystatus" value="{{paystatus}}" ng-checked="selectedpaystatus.indexOf(paystatus) > -1" ng-click="paystatusSelection(paystatus)"> {{paystatus}} </label> </div> <div> <table id="ExpenseViewTable" class="display table table-bordered responsive" cellspacing="0" width="100%"> </table> </div> </div> </div> <div class="row"> <uib-tabset active="activeJustified" justified="true" width="600px"> <uib-tab index="0" heading="Payment Status Summary"> <div class="col-md-6"> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Expense by Payment Status</h3> </div> <div class="panel-body fixed-panel"> <canvas id="piechart " class="chart chart-pie chart-xs ng-isolate-scope" chart-data="piedata " chart-labels="pielabels " chart-options="options " height="130 " width="130 " chart-colors="piecolor "> </canvas> </div> </div> </div> <div class="col-md-6"> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">Expense by Payment Status</h3> </div> <div class="panel-body fixed-panel"> <table class="table table-striped table-bordered"> <thead> <tr> <th><b>Payment Status</b></th> <th><b>Expense Count</b></th> </tr> </thead> <tbody> <tr ng-repeat="item in expensedash "> <td> {{item.Label}} </td> <td> {{item.Data}} </td> </tr> <tr> <td> <b>Total</b> </td> <td> <span> {{TotalExpenseCount}} </span> </td> </tr> </tbody> </table> </div> </div> </div> </uib-tab> <uib-tab index="1" heading="Payment Status By Chapter" ng-hide="(userRole==\'Participant\' || userRole==\'Volunteer\' )"> <div ng-show="userRole==\'National Staff\'" class="form-group row-fluid col-lg-12"> <div class="form-group row"> <label for="selectedchapter" class="col-xs-6 col-form-label">Chapter List</label> <div class="input-group"> <select class="form-control col-md-6" ng-model="listS" id="selectedchapter" name="selectedchapter" title="Select Chapter Name"> <option value="" selected>All Chapters</option> <option ng-repeat="chapter in  PayStatusCountData  " value="{{chapter.Chapter}}">{{chapter.Chapter}}</option> </select> </div> </div> <div class="form-group row"> <label for="region" class="col-xs-6 col-form-label">Region List</label> <div class="input-group"> <select class="form-control col-md-6" ng-model="region" id="selectedregion" name="selectedregion" title="Select Chapter Name"> <option value="" selected>All Regions</option> <option ng-repeat="chapter in  PayStatusCountData  " value="{{chapter.Region}}">{{chapter.Region}}</option> </select> </div> </div> </div> <div> <!--             <div class="panel panel-primary chapter-panel">\r\n                                <div class="panel-heading chapter-panel">\r\n                                    <h3 class="panel-title">Expense by Payment Status</h3>\r\n                                </div>\r\n                                <div class="panel-body chapter-panel scroll-panel"> --> <table class="table table-striped table-bordered"> <thead> <tr> <th><b>Region</b></th> <th><b>Chapter</b></th> <th><b>Edit</b></th> <th><b>Pending</b></th> <th><b>Resubmit</b></th> <th><b>Submitted</b></th> <th><b>Returned</b></th> <th><b>Paid</b></th> <th><b>Over Age</b></th> </tr> </thead> <tbody> <tr ng-repeat="item in PayStatusCountData | filter: {Chapter: listS} | filter: {Region: region}"> <td> {{item.Region}} </td> <td> {{item.Chapter}} </td> <td> {{item.Edit}} </td> <td> {{item.Pending}} </td> <td> {{item.Resubmit}} </td> <td> {{item.Submitted}} </td> <td> {{item.Returned}} </td> <td> {{item.Paid}} </td> <td> {{item.OverAge}} </td> </tr> <tr> <td> </td> <td> <b>Total</b> </td> <td> {{gettotaldata.Edit}} </td> <td> {{gettotaldata.Pending}} </td> <td> {{gettotaldata.Resubmit}} </td> <td> {{gettotaldata.Submitted}} </td> <td> {{gettotaldata.Returned}} </td> <td> {{gettotaldata.Paid}} </td> <td> {{gettotaldata.OverAge}} </td> </tr> </tbody> </table> <!--   </div>\r\n                            </div> --> </div> </uib-tab> <uib-tab index="2 " heading="By Event Month "> <div class="col-sm-12"> <div class="panel panel-primary chapter-panel"> <div class="panel-heading"> <h3 class="panel-title">Expense by Event Month</h3> </div> <div class="panel-body fixed-panel chapter-panel"> <canvas id="line " class="chart chart-line" chart-data="data1 " chart-labels="labels2 " chart-series="series1 " chart-options="options1 " width="250px " height="200px "> </canvas> </div> </div> </div> </uib-tab> <uib-tab index="3 " heading="By Expense Amount "> <div class="col-sm-12"> <div class="panel panel-primary chapter-panel"> <div class="panel-heading"> <h3 class="panel-title">Expense Amount by Event Month</h3> </div> <div class="panel-body fixed-panel chapter-panel"> <canvas id="line1 " class="chart chart-line" chart-data="data2 " chart-labels="labels1 " chart-series="series1 " chart-options="options1 " width="250px " height="200px "> </canvas> </div> </div> </div> </uib-tab> </uib-tabset> </div> </div> <!-- <div class="container ">\r\n    <div class="row ">\r\n        <div>\r\n        </div>\r\n    </div>\r\n</div>\r\n --> </div></div></form> </div>'),
a.put("views/expense/viewexpense.html",'<div class="container" ng-init="viewexpensedata()" ng-controller="ViewExpenseController"> <form id="viewExpenseform" name="viewExpenseform" method="post" class="form-inline" novalidate> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">View Expense {{HeadTitle}}</h3> </div> <div class="panel-body-exp"> <div class="row" style="margin-bottom:20px"> <div class="form-group row expense_pad col-lg-3"> <label for="DateFilter" class="col-form-label">Submit Date Range</label> <div> <select class="form-control" ng-model="DateFilter" ng-change="DateFilterChange()" ng-options="DateRange.name for DateRange  in DateRangelist" name="DateFilter" title="Select quick DateFilter"> </select> </div> </div> <label class="expense_pad col-lg-3">Current Date Range: <br>{{disp_filterdate}}</label> <div ng-show="DateFilter.name==\'Custom Range\'" class="form-group row col-lg-3"> <div class="form-group row expense_pad"> <label for="startdate" class="col-form-label">From</label> <div> <div class="input-group"> <input id="startdate" type="text" class="form-control" ng-model="startdate" is-open="popup.opened" ng-required="true" datepicker-options="dateOptions" close-text="Close" uib-datepicker-popup="{{format}}" alt-input-formats="altInputFormats" ng-change="ExpenseSearch(\'normal\')"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="dateopen()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> <div class="col-md-4"> <span ng-show="viewExpenseform.startdate.$error.required && \r\n                                !viewExpenseform.startdate.$pristine"> Invalid or Empty from date </span> <span ng-show="viewExpenseform.startdate.$error.dateLowerThan"> From date must be greater than To date </span> </div> </div> </div> <div class="form-group row expense_pad"> <label for="enddate" class="col-form-label">To</label> <div> <div class="input-group"> <input id="enddate" type="text" class="form-control" ng-model="enddate" is-open="popup1.opened" ng-required="true" datepicker-options="dateOptions" close-text="Close" uib-datepicker-popup="{{format}}" alt-input-formats="altInputFormats" date-lower-than="{{startdate| date:\'short\'}}" ng-change="ExpenseSearch(\'normal\')"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="dateopen1()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> <div class="col-md-4"> <span ng-show="viewExpenseform.enddate.$error.required && \r\n                                !viewExpenseform.startdate.$pristine"> Invalid or Empty from date </span> <span ng-show="viewExpenseform.enddate.$error.dateLowerThan"> From date must be lower than To date </span> </div> </div> </div> </div> <div class="form-group row expense_pad col-lg-3"> <label for="PayStatus" class="col-form-label">Payment Status</label> <div> <select class="form-control" ng-model="PayStatus" ng-options="status.name for status  in paystatuslist" name="PayStatus" title="Select Payment Status" ng-change="ExpenseSearch()"> </select> </div> </div> </div> <div class="form-actions"> <img class="cursorPointer" src="/assets/images/expense/pdf.png" width="40" height="40" title="Export Expense Reports" ng-click="CreateExpenseReport()"> <input type="button" class="btn btn-primary" ng-click="neweexpense()" value="New Expense"> <button class="btn btn-primary btn-danger" ng-show="userRole==\'National Staff\' || userRole==\'Chapter Lead\'" ng-click="filterPastDue()" title="Filters expenses that were submitted 30 days prior to date and still Overdue">Overdue Expenses</button> <!--  <a href=" #/expense_QBUpdate" title="QuickBooks Update" ng-show="userRole==\'National Staff\'">\r\n                        <img src="/assets/images/expense/QuickBooks.png" width="130" height="35" title="Go to QuickBooks Update Page" />\r\n                    </a> --> <img class="" src="/assets/images/expense/Pie.png" width="40" height="40" title="Quick Expense Overview" ng-click="openExpenseDash()" ng-mouseover="showPopover()" ng-mouseleave="hidePopover()"> <div class="form-group row btnalignmore" ng-repeat="dash in editstatus " ng-show="useremail != editstatus.EmailID"> <a class="blinkinfo btn-danger btn" ng-show="dash.OverAge > 0" ng-click="Showmeedit(dash.BillId)">Submit (Days to Over Age - {{dash.OverAge}}) </a> <a class="blinkinfo btn-danger" ng-show="dash.OverAge < 1" ng-click="Showmeedit(dash.BillId)">Submit (Currently Over Aged) </a> </div> <a class="swaltdr" title="Expense Configuration" ng-show="userRole==\'National Staff\'" href="/#/expense/expenseconfig"> <button class="btn btn-warning"> Edit Expense Configurations </button> </a> </div> </div> </div> <!-- <div class="form-group row col-lg-12">\r\n            <input id=viewrow type="button" class="btn btn-primary " ng-click="ViewSelectedRow()" value="Pay Submitted Expense">\r\n        </div> --> <div class="table-responsive"> <table id="expenseTable" class="table table-bordered table-responsive table-hover" cellspacing="0" width="80%"> </table> </div> </form> </div> <script type="text/ng-template " id="myModalContent.html "><div class="modal-header ">\r\n        <h3 class="modal-title " id="modal-title ">Expense by Payment Status</h3>\r\n    </div>\r\n    <div class="modal-body " id="modal-body ">\r\n        <div>\r\n            <canvas id="piechart " class="chart chart-pie chart-xs ng-isolate-scope " chart-data="piedata " chart-labels="pielabels " chart-options="options " height="150 " width="150 " chart-colors="piecolor ">\r\n            </canvas>\r\n        </div>\r\n        <div>\r\n            <table class="table table-striped table-bordered ">\r\n                <thead>\r\n                    <tr>\r\n                        <th><b>Payment Status</b></th>\r\n                        <th><b>Expense Count</b></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr ng-repeat="item in expensedash ">\r\n                        <td>\r\n                            {{item.Label}}\r\n                        </td>\r\n                        <td>\r\n                            {{item.Data}}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            <b>Total</b>\r\n                        </td>\r\n                        <td>\r\n                            <span> {{TotalExpenseCount}} </span>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div class="modal-footer ">\r\n            <button class="btn btn-primary " type="button " ng-click="ok() ">CLOSE</button>\r\n        </div></script>'),a.put("views/getinvolved.html",'<!DOCTYPE html><!--The get Inovlved page that has more information in expandable views  --> <div class="hero"> <img id="heroimg" src="/assets/images/getinvolved/getinvolved-splash.png" alt="Getinvolved Hero"> <img id="heroquote" src="/assets/images/getinvolved/quote2.png" alt="Getinvolved Quote"> <div id="herodesc2"> <img id="desctextbg2" src="/assets/images/whoweare/roundedrect.png" alt="Getinvolved Textbg"> <h1 class="desctext">Paddle. Fish. Heal.</h1> </div> <div id="herologo"> <img id="how-logomark2" src="/assets/images/logos/logo-md.png" alt="Getinvolved Logostamp"> </div> </div> <!-- end hero --> <div class="getinvolved-body"> <hr> <div id="getinvolved-text"> <h4> There are many ways you can volunteer with Heroes on the Water whether it is accompanying injured service men and women on kayak fishing excursions, helping with the administrative tasks of planning and carrying out an outing, assisting with registration or coordinating the food at an event, or to start up a Heroes on the Water Chapter in your area. </h4> </div> </div> <!-- end whoweare-body --> <section class="strips"> <article class="strips__strip"> <div class="strip__content" ng-click="$scope.open()"> <!--			<i class="fa fa-close mobile_strip__close" ng-click="close()"></i>--> <h4 class="strip__title" data-name="participate">PARTICIPATE</h4> <div class="strip__inner-text"> <h2>PARTICIPATE</h2> <p> Participants receive basic kayak fishing and paddling instruction, angling clinics, and paddling classes appropriate for beginners to the most experienced paddlers. <br> <br> Our program is unique in that it is a long-term activity, not a one-time event. We believe that the effectiveness of the program is a direct result of engaging the wounded military personnel for the long-term. <br> <br> If you would like to get involved with the heroes on the water organization <a href="https://heroesonthewater.org/how-to-help/participate/" id="getInvolved-link"> you can visit their website here:</a> </p> </div> </div> </article> <article class="strips__strip"> <div class="strip__content" ng-click="open()"> <!--			<i class="fa fa-close mobile_strip__close" ng-click="close()"></i>--> <h4 class="strip__title" data-name="volunteer">VOLUNTEER</h4> <div class="strip__inner-text"> <h2>VOLUNTEER</h2> <p>The Heroes on the Water program is carried out across the country by dedicated volunteers seeking to make a difference in the lives of our warriors and their families. <br> <br> <br> If you would like to get involved with the heroes on the water organization <a href="https://heroesonthewater.org/how-to-help/volunteer/" id="getInvolved-link"> you can visit their website here:</a> </p> </div> </div> </article> <article class="strips__strip"> <div class="strip__content" ng-click="open()"> <!--			<i class="fa fa-close mobile_strip__close" ng-click="close()"></i>--> <h4 class="strip__title" data-name="sponsor">SPONSOR</h4> <div class="strip__inner-text"> <h2>SPONSOR</h2> <p>Our corporate partners provide Heroes On the Water with an opportunity to reach out to a variety of audiences with important information and to raise funds to support, education, training and events. In addition, the initiatives provide corporate supporters an opportunity to make a positive impact on the recovery of our injured service members and involve employees and consumers in the HOW movement. <br> <br> Want to be a part of something big? We know you do! And…it is tax deductible through Heroes on the Water’s current 501(c)(3). We offer a tiered sponsorship program and welcome entities of all sizes and structures to join our cause through a sponsor relationship. <br> <br> If you would like to get involved with the heroes on the water organization <a href="https://heroesonthewater.org/how-to-help/sponsor/" id="getInvolved-link"> you can visit their website here:</a> </p> </div> </div> </article> <article class="strips__strip"> <div class="strip__content" ng-click="open()"> <!--			<i class="fa fa-close mobile_strip__close" ng-click="close()"></i>--> <h4 class="strip__title" data-name="startachapter">START A CHAPTER</h4> <div class="strip__inner-text"> <h2>START A CHAPTER</h2> <p> Heroes on the Water is experiencing tremendous growth with individuals and groups in local areas across the country organizing to start a local chapter. <br> <br> Thank you for your interest in giving back to those who have given so much for us! <br> <br> If you would like to get involved with the heroes on the water organization <a href="https://heroesonthewater.org/how-to-help/start-a-chapter/" id="getInvolved-link"> you can visit their website here:</a> </p> </div> </div> </article> <article class="strips__strip"> <div class="strip__content" ng-click="open()"> <!--			<i class="fa fa-close mobile_strip__close" ng-click="close()"></i>--> <h4 class="strip__title" data-name="inkindcontribution">IN-KIND CONTRIBUTION</h4> <div class="strip__inner-text"> <h2>IN-KIND CONTRIBUTION</h2> <p>In-kind donations of goods and services from individuals and organizations have made it possible for HOW to provide our program to wounded warriors and their families. <br> <br> In-kind goods that help provide the program include: <ul style="list-style-position: inside"> <li>Kayak trailers, kayaks, paddles, PFDs, and kayak gear</li> <li>Fishing equipment and supplies including rods/reels and lures</li> <li>Food, snacks, and beverages for outings</li> </ul> <br> <br> </p><p> In-kind services that help support the program operation can include: </p> <ul style="list-style-position: inside"> <li>Printing services for banners, brochures, fliers</li> <li>Storage facilities for kayak equipment</li> </ul> <br> <br> <p> If you would like to get involved with the heroes on the water organization <a href="https://heroesonthewater.org/how-to-help/in-kind-contribution/" id="getInvolved-link"> you can visit their website here:</a> </p> </div> </div> </article> <i class="fa fa-close strip__close" ng-click="close()"></i> </section> <!-- end jumpbar --> <div class="donatebanner"> <img id="donatebg" src="/assets/images/getinvolved/donate-bg.png" alt="Whoweare Donatebg"> <div class="donatedescoverlay"> <div id="donatedesc"> <h4>Check out stories and updates from our team, partners and supporters</h4> <button ng-click="showDonate()" id="showDonateModal" style="margin-top:15px"> <h2>DONATE</h2> </button> </div> </div> </div> <!-- end donatebanner --> <master-footer></master-footer> <script>var Expand = (function() {\r\n    var tile = $(\'.strips__strip\');\r\n    var tileLink = $(\'.strips__strip > .strip__content\');\r\n    var tileText = tileLink.find(\'.strip__inner-text\');\r\n    var stripClose = $(\'.strip__close\');\r\n    //		var mobileStripClose = $(\'.strips .mobile_strip__close\');\r\n\r\n    var expanded = false;\r\n\r\n    var open = function() {\r\n\r\n        var tile = $(this).parent();\r\n\r\n        if (!expanded) {\r\n            tile.addClass(\'strips__strip--expanded\');\r\n            // add delay to inner text\r\n'+"            tileText.css('transition', 'all .6s .3s cubic-bezier(0.23, 1, 0.32, 1)');\r\n            stripClose.addClass('strip__close--show');\r\n            //				mobileStripClose.addClass('mobile_strip__close--show');\r\n            stripClose.css('transition', 'all .6s .3s cubic-bezier(0.23, 1, 0.32, 1)');\r\n            expanded = true;\r\n        }\r\n    };\r\n\r\n    var close = function() {\r\n        if (expanded) {\r\n            tile.removeClass('strips__strip--expanded');\r\n            // remove delay from inner text\r\n            tileText.css('transition', 'all 0.15s 0s cubic-bezier(0.23, 1, 0.32, 1)');\r\n            stripClose.removeClass('strip__close--show');\r\n            //				mobileStripClose.removeClass('mobile_strip__close--show');\r\n            stripClose.css('transition', 'all 0.2s 0s cubic-bezier(0.23, 1, 0.32, 1)')\r\n            expanded = false;\r\n        }\r\n    }\r\n\r\n    var bindActions = function() {\r\n        tileLink.on('click', open);\r\n        stripClose.on('click', close);\r\n    };\r\n\r\n    var init = function() {\r\n        bindActions();\r\n    };\r\n\r\n    return {\r\n        init: init\r\n    };\r\n\r\n}());\r\n\r\nExpand.init();</script>"),a.put("views/home.html",'<!DOCTYPE html> <div class="hero"> <img id="heroimg" src="/assets/images/home/home-splash.png" alt="Home Hero"> <div id="herotext"> <h2>HELP SOMEBODY WHO FOUGHT FOR PEACE, FIND IT.</h2> <button ng-click="videoToggle()" class="button-border"><i class="fa fa-play" style="margin-right:12px"></i>PLAY VIDEO</button> </div> <div id="overlay" ng-show="vidtoggle" class="fadein fadeout"> <iframe id="videoplayer" src="https://www.youtube.com/embed/iZQFKPaVNMQ?wmode=opaque&enablejsapi=1" frameborder="0" allowfullscreen></iframe> <button id="videoclose" ng-click="videoToggle()"><i class="fa fa-times fa-2x" aria-hidden="true"></i></button> </div> </div> <!-- end hero --> <div class="missionstats"> <div class="mission"> <img id="paint" src="/assets/images/home/paint.png" alt="paint"> <img id="paint2" src="/assets/images/home/paint2.png" alt="paint2"> <div class="h3"> <h3>Our mission is to help warriors relax, rehabilitate, and reintegrate through kayak fishing and the outdoors.</h3> </div> </div> <!-- end mission --> <div class="stats"> <div class="ring"> <img id="ring1" src="/assets/images/home/ring.png" alt="ring"> <div class="h5" style="padding-left: 20px"> <h5>62%</h5> </div> <h6>Reduction in Hypervigilance</h6> </div> <div class="ring"> <img id="ring2" src="/assets/images/home/ring.png" alt="ring"> <div class="h5" style=""> <h5>23,832</h5> </div> <h6>Warriors &amp; Family Members Served</h6> </div> <div class="ring"> <img id="ring3" src="/assets/images/home/ring.png" alt="ring"> <div class="h5" style="padding-left: 20px"> <h5>63%</h5> </div> <h6>Reduction in Avoidance Behavior</h6> </div> </div> <!-- end stats --> </div> <!-- end missionstats --> <div class="jumpbar"> <div class="column col1"> <img id="purpose-icon" src="/assets/images/home/purpose-icon.png" alt="purpose-icon"> <h6>Learn more about the HOW kayak fishing program for warriors and veterans.</h6> <a ng-href="#/whoweare"> <h2>OUR PURPOSE<i class="fa fa-arrow-circle-o-right fa-lg" style="margin-left: 10px" aria-hidden="true"></i></h2> </a> </div> <div class="column col2"> <img id="donate-icon" src="/assets/images/home/donate-icon.png" alt="donate-icon"> <h6>Your gift provides our program to warriors at no charge to them or their families.</h6> <a class="cursorPointer" ng-click="showDonate()"> <h2>DONATE<i class="fa fa-arrow-circle-o-right fa-lg" style="margin-left: 10px" aria-hidden="true"></i></h2> </a> </div> <div class="column col3"> <img id="events-icon" src="/assets/images/home/events-icon.png" alt="events-icon"> <h6>Check out all the fun happenings through our various chapters.</h6> <a ng-href="#/publicEvents"> <h2>EVENTS<i class="fa fa-arrow-circle-o-right fa-lg" style="margin-left: 10px" aria-hidden="true"></i></h2> </a> </div> </div> <!-- end jumpbar --> <div class="chaptersearch"> <div class="desc"> <h2>Over 80 chapters. Find one near you.</h2> </div> <div class="searchform"> <form name="searchForm" ng-submit="chapterSearch()" novalidate> <input type="text" name="chapter-name" placeholder="zip code" ng-model="zipCode"> <button type="submit"> <h4>SUBMIT</h4> </button> </form> </div> <img id="worldmap" src="/assets/images/home/worldmap.png" alt="worldmap"> </div> <!-- end chaptersearch --> <master-footer></master-footer>'),a.put("views/login.html",'<!DOCTYPE html> <body style="margin: auto"> <div class="" style="margin: auto; max-width: 350px"> <h3>Login</h3> <form name="loginForm" style="margin-bottom:20px" ng-controller="LoginCtrl" ng-submit="loginForm.$valid && checkLogin(logObj)" novalidate> <div ng-show="loginForm.$invalid && loginForm.$submitted" class="alert alert-danger">Username/Email and password is required</div> <div class="form-group well"> <label>Username/Email</label> <input type="text" name="email" class="form-control" placeholder="email@address.com" ng-model="logObj.email" required> <span ng-show="logObj.email.$dirty && logObj.email.$error.required" class="help-block">Email is required</span> <br> <label>Password</label> <input type="password" name="password" class="form-control" ng-model="logObj.password" required> <span ng-show="logObj.password.$dirty && logObj.password.$error.required" class="help-block">Password is required</span> <br> <div class="form-actions"> <button type="submit" class="btn btn-primary">Login</button> <button type="button" class="btn btn-default" ng-click="passwordReset()">Password Reset</button> <button type="button" class="btn btn-default" ng-click="addUser()">Sign Up</button> <br> </div> </div> <div id="newUserForm" class="modal fade" tabindex="-1" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <script type="text/ng-template" id="newUserDirectoryForm.html"></script> <!-- inject from newUserDirectoryForm.html --> </div> <!-- end modal-content --> </div> <!-- end modal-dialog --> </div> <!-- end newUserForm --> </form> </div> </body>'),a.put("views/manage/broadcasts.html",'<!DOCTYPE html> <div class="container"> <h3>Broadcasts</h3> <form class="form-horizontal"> <!-- Email To --> <div class="form-group"> <label class="col-sm-2 control-label">To</label> <div class="col-sm-7"> <ui-select multiple tagging tagging-label="(custom \'new\' label)" ng-model="recipient" theme="bootstrap" sortable ng-disabled="disabled" title="Choose a distro"> <ui-select-match placeholder="Select distro..."> <!--this is the button selected--> {{$item}} </ui-select-match> <ui-select-choices repeat="distro in distros | filter:$select.search"> {{distro}} <!--this is the drop down--> </ui-select-choices> </ui-select> </div> <!-- CC/BCC control --> <div class="col-sm-2"> <div class="btn-group btn-group-justified" role="group"> <div class="btn-group"> <button type="button" ng-click="toggleCC()" class="btn btn-default">CC</button> </div> <div class="btn-group"> <button type="button" ng-click="toggleBCC()" class="btn btn-default">BCC</button> </div> </div> </div> </div> <!-- Email CC --> <div class="form-group" ng-show="ccVisible"> <label class="col-sm-2 control-label">CC</label> <div class="col-sm-7"> <ui-select multiple tagging tagging-label="(custom \'new\' label)" ng-model="ccRecipient" theme="bootstrap" sortable ng-disabled="disabled" title="Choose a distro"> <ui-select-match placeholder="Select distro..."> <!--this is the button selected--> {{$item}} </ui-select-match> <ui-select-choices repeat="distro in distros | filter:$select.search"> {{distro}} <!--this is the drop down--> </ui-select-choices> </ui-select> </div> </div> <!-- Email BCC --> <div class="form-group" ng-show="bccVisible"> <label class="col-sm-2 control-label">BCC</label> <div class="col-sm-7"> <ui-select multiple tagging tagging-label="(custom \'new\' label)" ng-model="bccRecipient" theme="bootstrap" sortable ng-disabled="disabled" title="Choose a distro"> <ui-select-match placeholder="Select distro..."> <!--this is the button selected--> {{$item}} </ui-select-match> <ui-select-choices repeat="distro in distros | filter:$select.search"> {{distro}} <!--this is the drop down--> </ui-select-choices> </ui-select> </div> </div> <!-- Email Subject --> <div class="form-group"> <label for="eventName" class="col-sm-2 control-label">Subject</label> <div class="col-sm-7"> <input type="text" class="form-control" id="eventName" placeholder="Event Name" value=""> </div> </div> <!-- Email Send Date/Time --> <div class="form-group"> <label for="startDate" class="col-sm-2 control-label">Send Date</label> <div class="col-sm-7"> <div class="form-inline"> <div class="input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="t" is-open="sendDate.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn" style="width: 70px"> <button type="button" class="btn btn-default" ng-click="openSendDate()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> <div class="form-group"> <label for="sendTime" style="margin-right: 12px">Send Time</label> <input class="form-control" ng-model="sendTime" ui-timepicker> </div> </div> </div> </div> <!-- Email Body --> <div class="form-group"> <label for="startDate" class="col-sm-2 control-label">Message</label> <div class="col-sm-10"> <summernote></summernote> </div> </div> <!-- Email Send --> <div class="form-group"> <div class="col-sm-offset-2 col-sm-7"> <button type="submit" class="btn btn-primary">Send</button> </div> </div> </form> </div>'),a.put("views/manage/chadmin.html",'<!DOCTYPE html> <div class="container" ng-init="update()"> <h3>Chapter Administration</h3> <div style="clear: left; width: 100%; overflow: auto; margin-bottom: 5px"> <div class="toolbar-left" style="float: left"> <button class="btn btn-primary" ng-click="addChapter()">Add New Chapter</button> <!-- <button class="btn btn-primary" ng-click="removeChapter()">Delete Chapter</button> --> </div> </div> <div style="margin: auto; display: block; padding-top: 10px" max-width="100%"> <table id="chaptersTable" class="display table table-bordered responsive" cellspacing="0" width="100%"></table> </div> </div>'),a.put("views/manage/chapterchat.html",'<div class="container" id="chat_window" ng-init="init()"> <div class="row"> <div class="col-md-3"></div> <div class="col-md-5"> <div class="panel panel-primary"> <div class="panel-heading" id="accordion"> <span class="glyphicon glyphicon-comment"></span> {{currentChapter.text}} <div class="btn-group pull-right"> <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown"> <span class="glyphicon glyphicon-chevron-down"></span> </button> <ul class="dropdown-menu slidedown"> <li> <a ng-click="changeChapter()">Change Chapter</a> </li> </ul> </div> </div> <div class="panel" style="margin-bottom: 0px"> <div class="panel-body" style="word-break: break-all; min-height: 400px"> <div ng-repeat="n in chatLog" class="row"> <div class="message-container"> <div class="header"> <strong class="primary-font">{{n.name}}</strong> <small class="pull-right text-muted"> <span class="glyphicon glyphicon-time"></span> {{n.time | date : "short"}}</small> </div> <p> {{n.message}} </p> </div> </div> </div> <div class="panel-footer"> <div class="input-group"> <input id="btn-input" type="text" class="form-control input-sm" placeholder="Type your message here..." ng-model="newMessage"> <span class="input-group-btn"> <button class="btn btn-warning btn-sm" id="btn-chat" ng-click="sendMessage()">Send</button> </span> </div> </div> </div> </div> </div> </div> </div>'),a.put("views/manage/dash.broadcasts.html",'<div> <h3 style="margin-top:0px">Broadcasts</h3> </div>'),a.put("views/manage/dash.html",'<!DOCTYPE html> <div class="container"> <h3>Dashboard</h3> <div class="row"> <!-- tabs left --> <div class="col-md-1"> <div class="tabbable tabs-left"> <ul class="nav nav-tabs"> <!--thad: active was removed until proper actions are taken ui-sref-active="active"--> <li class="active"><a ng-href="#/dash/upcoming-events" data-toggle="tab">Upcoming Events</a></li> <li><a ng-href="#/dash/broadcasts" data-toggle="tab">Broadcasts</a></li> <li><a ng-href="#/expense/overview" data-toggle="tab">Expense</a></li> </ul> </div> </div> <div class="col-md-1 spacercol"></div> <!-- content --> <div class="col-md-10"> <p>Volunteer Dashboard - "This is a landing site where volunteers can see the hours they have volunteered, the events they have attended, the next upcoming events, notifications, and a link to go to their training." </p> <p> Event Manager Dashboard - "This is a landing site where Event Managers can see an overview of their upcoming event (number of volunteers registered, number of volunteers) and a easy link to send a broadcast for that event. On this dashboard, Event Managers can also see other upcoming events, notifications, and link to their other management pages." </p> <p> Chapter Manager Dashboard - "This is a landing site where Chapter Managers can see an overview of their Chapter\'s next event (number of volunteers registered, number of volunteers) and an easy link to send a broadcast email for that event. On this dashboard, Chapter Managers can also see other upcoming events, notifications, and link to their other management pages." </p> <p> Region Manager Dashboard - "This is a landing site where Region Managers can see notifications for upcoming events for the chapters within the region. On this dashboard Region Managers can also see notifications and link to their other management pages." </p> <p> Admin Dashboard - "This is a landing site where Admins can see an overview of donations in the past month/past year, and the number of upcoming events per region. On this dashboard Region Managers can also see notifications and link to their other management pages." </p> <div ui-view=""> </div> </div> </div> </div>'),a.put("views/manage/dash.upcomingEvents.html",'<div> <h3 style="margin-top:0px">Upcoming Events</h3> </div>'),a.put("views/manage/directory.html",'<!DOCTYPE html> <div class="container" ng-init="update()"> <h3>Member Directory</h3> <div style="clear: left; width: 100%; overflow: auto; margin-bottom: 5px"> <div class="toolbar-left" style="float: left"> <button class="btn btn-primary" ng-click="roleChangeRequests()">Role Change Requests</button> </div> <div class="toolbar-left" style="float: left; margin-left: 5px"> <button class="btn btn-primary" ng-click="chapterStatus()">Chapter Status</button> </div> </div> <div style="margin: auto; display: block; padding-top: 10px" max-width="100%"> <table id="membersTable" class="display table table-bordered responsive" cellspacing="0" width="100%"></table> </div> <div id="newUserForm" class="modal fade" tabindex="-1" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <script type="text/ng-template" id="newUserDirectoryForm.html"></script> <!-- inject from newUserDirectoryForm.html --> </div> <!-- end modal-content --> </div> <!-- end modal-dialog --> </div> <!-- end newUserForm --> </div> <!-- end container -->'),a.put("views/manage/event.details.description.html",'<!DOCTYPE html> <form class="form-horizontal" name="eventDetailsDescription" ng-submit="saveEventDescription(eventDetailsDescription.$valid)"> <!-- Event Name --> <div class="form-group"> <label for="eventName" class="col-sm-2 control-label">Event Name*</label> <div class="col-sm-7"> <input type="text" class="form-control" id="eventName" ng-model="newEventName" ng-required="true" placeholder="{{selectedEvent.name}}"> </div> </div> <!-- Location --> <div class="form-group"> <label for="eventLocation" class="col-sm-2 control-label">Location*</label> <div class="col-sm-7"> <input type="text" class="form-control" id="eventLocation" ng-required="true" placeholder="Location" value="{{selectedEvent.location}}"> </div> </div> <!-- <!-- Start Date/Time --> <div class="form-group"> <label for="startDate" class="col-sm-2 control-label">Start Date*</label> <div class="col-sm-7"> <div class="form-inline"> <div class="input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="startDate" is-open="startDate.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn" style="width: 70px"> <button type="button" class="btn btn-default" ng-click="openStartDate()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> <div class="form-group"> <label for="startTime" style="margin-right: 10px">Start Time*</label> <input class="form-control" ng-model="startTime" ng-required="true" ui-timepicker> </div> </div> </div> </div> <!-- End Date/Time --> <div class="form-group"> <label for="endDate" class="col-sm-2 control-label">End Date*</label> <div class="col-sm-7"> <div class="form-inline"> <div class="input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="endDate" is-open="endDate.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn" style="width: 70px"> <button type="button" class="btn btn-default" ng-click="openEndDate()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> <div class="form-group"> <label for="endTime" style="margin-right: 15px">End Time*</label> <input class="form-control" ng-model="endTime" ng-required="true" ui-timepicker> </div> </div> </div> </div> --> <!-- Event Manager Selection --> <div class="form-group"> <label for="eventManager" class="col-sm-2 control-label">Manager*</label> <div class="col-sm-7"> <input type="text" class="form-control" id="eventManager" ng-required="true" placeholder="Event Manager"> </div> </div> <!-- Event Description --> <div class="form-group"> <label for="eventDescription" class="col-sm-2 control-label">Description</label> <div class="col-sm-7"> <textarea rows="3" class="form-control" id="eventDescription" placeholder="Event Description"></textarea> </div> </div> <!-- Submit --> <div class="col-sm-offset-2"> <button type="submit" class="btn btn-primary" style="margin-left: 6px" ng-submit="saveEventDescription()">Save</button> </div> <div class="form-group"> <div class="col-md-2"></div> <p class="col-md-9">* indicates required field.</p> </div> <button ng-click="combineTimes()">blah</button> </form>'),
a.put("views/manage/event.details.equipment.html",'<!DOCTYPE html> <div class="container"> <h3>Inventory</h3> <div style="clear: left; width: 100%; overflow:auto; margin-bottom: 5px"> <div class="toolbar-left" style="float: left"> <button class="btn btn-primary" ng-click="add()">Reseve New Item</button> <button class="btn btn-primary" ng-click="remove()">Deregister</button> <button class="btn btn-primary" ng-click="update()">Refresh</button> </div> </div> <div style="margin: auto; display: block; padding-top: 10px" max-width="100%" ng-init="update()"> <table id="eventInventoryTable" class="display table table-bordered responsive" cellspacing="0" width="100%"></table> </div> </div>'),a.put("views/manage/event.details.html",'<!DOCTYPE html> <div class="container"> <div class="row" style="margin-bottom: 10px"> <div class="col-md-1"> <button class="btn btn-default" ng-click="goBackToEvents()">Go Back</button> </div> <div class="col-md-10"> <h3 style="margin-left: 15px; margin-top: 3px">{{selectedEvent.name}}</h3> </div> </div> <div class="row"> <h3> <span class="label label-primary">Description: </span>{{selectedEvent.description}}</h3> <h3> <span class="label label-primary">Coordinator: </span>{{selectedEvent.eventManager}}</h3> <h3> <span class="label label-primary">Coordinator email: </span>{{selectedEvent.email}}</h3> <h3> <span class="label label-primary">Coordinator cell: </span>{{selectedEvent.mobileNumber}}</h3> <h3> <span class="label label-primary">Event Start Time: </span>{{selectedEvent.startTime | date:shortTime}}</h3> <!--<ul>\r\n            thad: active was removed until proper actions are taken ui-sref-active="active"\r\n            <li class="active"><a ng-href="#/description" data-toggle="tab">Description</a></li>\r\n            <li><a ng-href="#/volunteers" data-toggle="tab">Volunteers</a></li>\r\n            <li><a ng-href="#/participants" data-toggle="tab">Participants</a></li>\r\n            <li><a ng-href="#/inventory" data-toggle="tab">Inventory</a></li>\r\n            <li><a ng-href="#/notifications" data-toggle="tab">Notifications</a></li>\r\n        </ul>--> <!-- tabs left --> <!--<div class="col-md-1">\r\n            <div class="tabbable tabs-left">\r\n                <ul class="nav nav-tabs">\r\n                    thad: active was removed until proper actions are taken ui-sref-active="active""\r\n                    <li class="active"><a ng-href="#/description" data-toggle="tab">Description</a></li>\r\n                    <li><a ng-href="#/volunteers" data-toggle="tab">Volunteers</a></li>\r\n                    <li><a ng-href="#/participants" data-toggle="tab">Participants</a></li>\r\n                    <li><a ng-href="#/inventory" data-toggle="tab">Inventory</a></li>\r\n                    <li><a ng-href="#/notifications" data-toggle="tab">Notifications</a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-1 spacercol"></div>--> </div> </div>'),a.put("views/manage/event.details.notifications.html",'<!DOCTYPE html> <form class="form-horizontal" name="eventDetailsNotifications" ng-submit="sendEventNotification(eventDetauilNotifications.$valid)"> <!-- Email To --> <div class="form-group"> <label class="col-sm-2 control-label">To*</label> <div class="col-sm-7"> <ui-select multiple tagging tagging-label="(custom \'new\' label)" ng-model="recipient" ng-required="true" theme="bootstrap" sortable ng-disabled="disabled" title="Choose a distro"> <ui-select-match placeholder="Select distro..."> <!--this is the button selected--> {{$item}} </ui-select-match> <ui-select-choices repeat="distro in distros | filter:$select.search"> {{distro}} <!--this is the drop down--> </ui-select-choices> </ui-select> </div> <!-- CC/BCC control --> <div class="col-sm-2"> <div class="btn-group btn-group-justified" role="group"> <div class="btn-group"> <button type="button" ng-click="toggleCC()" class="btn btn-default">CC</button> </div> <div class="btn-group"> <button type="button" ng-click="toggleBCC()" class="btn btn-default">BCC</button> </div> </div> </div> </div> <!-- Email CC --> <div class="form-group" ng-show="ccVisible"> <label class="col-sm-2 control-label">CC</label> <div class="col-sm-7"> <ui-select multiple tagging tagging-label="(custom \'new\' label)" ng-model="ccRecipient" theme="bootstrap" sortable ng-disabled="disabled" title="Choose a distro"> <ui-select-match placeholder="Select distro..."> <!--this is the button selected--> {{$item}} </ui-select-match> <ui-select-choices repeat="distro in distros | filter:$select.search"> {{distro}} <!--this is the drop down--> </ui-select-choices> </ui-select> </div> </div> <!-- Email BCC --> <div class="form-group" ng-show="bccVisible"> <label class="col-sm-2 control-label">BCC</label> <div class="col-sm-7"> <ui-select multiple tagging tagging-label="(custom \'new\' label)" ng-model="bccRecipient" theme="bootstrap" sortable ng-disabled="disabled" title="Choose a distro"> <ui-select-match placeholder="Select distro..."> <!--this is the button selected--> {{$item}} </ui-select-match> <ui-select-choices repeat="distro in distros | filter:$select.search"> {{distro}} <!--this is the drop down--> </ui-select-choices> </ui-select> </div> </div> <!-- Email Subject --> <div class="form-group"> <label for="subject" class="col-sm-2 control-label">Subject*</label> <div class="col-sm-7"> <input type="text" class="form-control" id="subject" ng-required="true" placeholder="" value=""> </div> </div> <!-- Email Send Date/Time --> <div class="form-group"> <label for="startDate" class="col-sm-2 control-label">Send Date*</label> <div class="col-sm-7"> <div class="form-inline"> <div class="input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="t" is-open="sendDate.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn" style="width: 70px"> <button type="button" class="btn btn-default" ng-click="openSendDate()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </div> <div class="form-group"> <label for="sendTime" style="margin-right: 12px">Send Time*</label> <input class="form-control" ng-model="sendTime" ng-required="true" ui-timepicker> </div> </div> </div> </div> <!-- Email Body --> <div class="form-group"> <label for="Message" class="col-sm-2 control-label">Message</label> <div class="col-sm-10"> <summernote></summernote> </div> </div> <!-- Email Send --> <div class="form-group"> <div class="col-sm-offset-2 col-sm-7"> <button type="submit" ng-submit="sendEventNotifciation()" class="btn btn-primary">Send</button> </div> </div> <div class="form-group"> <div class="col-md-2"></div> <p class="col-md-9">* indicates required field.</p> </div> </form>'),a.put("views/manage/event.details.participants.html",'<!DOCTYPE html> <div class="col-md-12"> <div style="clear: left; width: 100%; overflow:auto; margin-bottom: 5px"> <div class="toolbar-left" style="float: left"> <button class="btn btn-primary" ng-click="add()">Add New</button> <button class="btn btn-primary" ng-click="remove()">Deregister</button> <button class="btn btn-primary" ng-click="update()">Refresh</button> </div> </div> <div style="margin: auto; display: block; padding-top: 10px" max-width="100%" ng-init="update()"> <table id="eventParticipantsTable" class="display table table-bordered responsive" cellspacing="0" width="100%"></table> </div> </div>'),a.put("views/manage/event.details.volunteers.html",'<!DOCTYPE html> <div class="col-md-12"> <div style="clear: left; width: 100%; overflow:auto; margin-bottom: 5px"> <div class="toolbar-left" style="float: left"> <button class="btn btn-primary" ng-click="add()">Add New</button> <button class="btn btn-primary" ng-click="remove()">Deregister</button> <button class="btn btn-primary" ng-click="update()">Refresh</button> </div> </div> <div style="margin: auto; display: block; padding-top: 10px" max-width="100%" ng-init="update()"> <table id="eventVolunteersTable" class="display table table-bordered responsive" cellspacing="0" width="100%"></table> </div> </div> <!--\r\n	<div class="col-md-4" ng-repeat="volunteer in volunteerList">\r\n		<div class="card bg-info">\r\n			<h3>{{volunteer[1]}} {{volunteer[2]}}</h3>\r\n			<p>{{volunteer[4]}}</p>\r\n			<button class="btn btn-default" type="submit">Deregister</button>\r\n			<button class="btn btn-default" type="submit">View Volunteer Details</button>\r\n		</div>\r\n	</div>\r\n-->'),a.put("views/manage/events.html",'<style>.link_padding {\r\n    margin-top: 2px;\r\n    margin-bottom: 2px;\r\n}</style> <div class="container" ng-init="update()"> <h3>Manage Events</h3> <div style="clear: left; width: 100%; overflow: auto; margin-bottom:10px"> <div class="toolbar-left" style="float: left"> <button class="btn btn-primary" ng-click="add()">Add New Event</button> </div> <div class="toolbar-right" style="float: right"> Filter by: <select name="filter" id="filter" ng-model="filter" ng-options="ft for ft in filterTypes" ng-change="changeFilter()"></select> </div> </div> <form class="form-horizontal"> <div class="form-group"> <label class="control-label" for="fname">Search:</label> <div> <input id="fname" name="newQuery.search" type="text" placeholder="Enter query here" class="form-control input-md pull-left" ng-change="search()" ng-model="newQuery.search" ng-required="true" ng-model-options="{ debounce: 100 }"> </div> </div> </form> <div class="row event-row"> <div class="col-md-4" ng-repeat="event in eventList"> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">{{event.name}}</h3> </div> <div class="list-group"> <div class="list-group-item"> <h6 class="list-group-item-text">Start Time</h6> <h4 class="list-group-item-heading">{{event.startTime | date:\'MM-dd-yyyy HH:mm a\'}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">End Time</h6> <h4 class="list-group-item-heading">{{event.endTime | date:\'MM-dd-yyyy HH:mm a\'}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Location</h6> <h4 class="list-group-item-heading">{{event.location}}</h4> </div> </div> <div class="panel-footer"> <a class="btn btn-primary link_padding" ng-if="$root.userId === event.initiator" ng-click="manageEvent($index)" style="margin-left: 8px;display:inline-block"><i class="fa fa-pencil" style="padding-right: 5px"></i>Manage Event</a> <a class="btn btn-primary link_padding" ng-click="viewParticipants($index)" style="margin-left: 8px;display:inline-block"><i class="glyphicon glyphicon-user" style="padding-right: 5px"></i><span class="badge">{{getKeyLength(event.participants)}}</span> Participants</a> <!--Object.keys(event.participants).length--> <a class="btn btn-primary link_padding" ng-click="viewVolunteers($index)" style="margin-left: 8px;display:inline-block"><i class="glyphicon glyphicon-user" style="padding-right: 5px"></i><span class="badge">{{getKeyLength(event.volunteers)}}</span> Volunteers</a> <a class="btn btn-danger link_padding" ng-click="deleteEvent($index)" style="margin-left: 8px;display:inline-block">Delete</a> </div> </div> <!-- end panel --> </div> <!-- end event list --> <!--<canvas id=\'signatureCanvas\' width=\'300\' height=\'180\' style=\'border: 1px solid black;\'></canvas>\r\n        <div class=\'button-bar\'>\r\n'+"            <a class='button button-energized' ng-click='clearCanvas()'>Clear</a>\r\n            <a class='button button-balanced' ng-click='saveCanvas()'>Sign</a>\r\n        </div>\r\n        <br>\r\n        <h3>{{msg}}</h3>--> <!--<br>\r\n        <img ng-src='{{signature}}' /> {{id}}--> </div> <!-- end row --> </div> <!-- end container -->"),a.put("views/manage/hours.html",'<!DOCTYPE html> <div class="container"> <h3>My Hours</h3> </div>'),a.put("views/manage/inventory.html",'<!DOCTYPE html> <div class="container" ng-init="update()"> <h3>Inventory</h3> <div style="clear: left; width: 100%; overflow: auto; margin-bottom: 5px"> <div class="toolbar-left" style="float: left"> <button class="btn btn-primary" ng-click="add()">Add New</button> <button class="btn btn-primary" ng-click="remove()">Delete</button> <button class="btn btn-primary" ng-click="update()">Refresh</button> </div> </div> <div style="margin: auto; display: block; padding-top: 10px" max-width="100%"> <table id="inventoryTable" class="display table table-bordered responsive" cellspacing="0" width="100%"></table> </div> <div id="newItemForm" class="modal fade" tabindex="-1" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <script type="text/ng-template" id="parts/newItemInventoryForm.html"></script> <!-- inject from newItemInventoryForm.html --> </div> <!-- end modal-content --> </div> <!-- end modal-dialog --> </div> <!-- end newItemForm --> </div> <!-- end container -->'),a.put("views/manage/profile.html",'<!DOCTYPE html> <div class="container" ng-init="update()"> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">My Profile</h3> </div> <div class="list-group"> <div class="list-group-item"> <h6 class="list-group-item-text">User: </h6> <h4 class="list-group-item-heading"> First: <a id="profile_first_name" class="editable editable-click">{{profileData.name.first}}</a> <br> Last: <span id="profile_last_name" class="editable editable-click">{{profileData.name.last}}</span> </h4> <h4 class="list-group-item-heading">DOB: <span id="profile_dob" class="editable editable-click">{{( profileData.DOB | date:"dd/MM/yyyy")}}</span> </h4> <h4 class="list-group-item-heading">Gender: <span id="profile_gender" class="editable editable-click">{{profileData.gender}}</span> </h4> <h4 class="list-group-item-heading">Role: {{profileData.role}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Address: </h6> <h4 class="list-group-item-heading">Line 1: <span id="profile_addr1" class="editable editable-click">{{profileData.address.line1}}</span> </h4> <h4 class="list-group-item-heading">Line 2: <span id="profile_addr2" class="editable editable-click">{{profileData.address.line2}}</span> </h4> <h4 class="list-group-item-heading"> <span id="profile_city" class="editable editable-click">{{profileData.address.city}}</span>, <span id="profile_state" class="editable editable-click">{{profileData.address.state}}</span> <span id="profile_zip" class="editable editable-click">{{profileData.address.zip}}</span> </h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Contact: </h6> <h4 class="list-group-item-heading">Phone: <span id="profile_phone" class="editable editable-click">{{profileData.phone}}</span> </h4> <h4 class="list-group-item-heading">Email: <span>{{profileData.email}} <span> </span></span></h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Region/Chapter Information: </h6> <h4 class="list-group-item-heading" ng-click="changeChapter()">Primary Chapter: <label class="format-chapter-class">{{profileData.Chapter.text}} <label> </label></label></h4> <h4 class="list-group-item-heading">Secondary Chapter(s): <h6 class="list-group-item-heading format-chapter-class" ng-repeat="Chapters in profileData.Chapters"> {{Chapters.chapter.text}} </h6> <button type="button" class="btn btn-default btn-sm" ng-click="editChapters()"> <span class="glyphicon glyphicon-cog" aria-hidden="true"></span> </button> </h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Service Information: </h6> <h4 class="list-group-item-heading">Branch: <span id="profile_branch" class="editable editable-click">{{profileData.branch}}</span> </h4> <h4 class="list-group-item-heading">Years of Service: <span id="profile_years" class="editable editable-click">{{(profileData.years | number)}}</span> </h4> </div> </div> <div class="panel-footer" style="height:55px"> <a class="btn btn-primary pull-right" ng-click="roleChangeRequest()"><i class="fa fa-pencil" style="padding-right: 5px"></i>Request Role Change</a> <a class="btn btn-primary pull-right" ng-click="feedBackRequest()" style="margin-right: 10px"><i class="fa fa-ticket" style="padding-right: 5px"></i>Give Feedback</a> </div> </div> <!-- end panel --> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">Role Change Status</h3> <a class="btn btn-primary pull-right" ng-click="rcs_show()"><i style="padding-right: 5px"></i>Show</a> </div> <div class="list-group" ng-show="rcs_status"> <div class="list-group-item"> <div class="row"> <div class="col-md-2"> <h4>Last Updated</h4> </div> <div class="col-md-1"> <h4>Current Role</h4> </div> <div class="col-md-2"> <h4>Requested Role</h4> </div> <div class="col-md-1"> <h4>Status</h4> </div> <div class="col-md-2"> <h4>User Comment</h4> </div> <div class="col-md-3"> <h4>Reviewers Comment</h4> </div> </div> </div> <div class="list-group-item" ng-repeat="request in requests" id="{{request.key}}"> <div class="row"> <div class="col-md-2"> {{request.request_updated | date:\'MM/dd/yyyy @ h:mma\'}} </div> <div class="col-md-1"> {{request.current_role}} </div> <div class="col-md-2"> {{request.request_role}} </div> <div class="col-md-1"> {{request.request_status}} </div> <div class="col-md-2"> {{request.user_comment}} </div> <div class="col-md-3"> {{request.reviewers_comment}} </div> <div class="col-md-1"> <button type="button" class="btn btn-danger" ng-click="deleteRequest(request.key)">Delete</button> </div> </div> </div> </div> </div> </div>'),a.put("views/manage/regadmin.html",'<!DOCTYPE html> <div class="container"> <h3>Region Administration</h3> <p> On the page, Region Managers can create reports for: </p><p> -Volunteers (This report will show how many hours have been reported and verified for each volunteer in your Region) </p> <p> -Volunteer comparison (This report will show how many volunteer hours your region has logged, and how many volunteers have logged hours compared to other regions) </p> -Events (This report will show a complete view of all events put on by the region within a selected time frame) <p> -Inventory Use (This report will show the number of events each peice of inventory has been used within a selected time frame) </p> Other Management functionality can be added based on organizational needs. These reports should have a link to export to excel for more functionality.  </div>'),a.put("views/manage/superadmin.html",'<!DOCTYPE html> <div class="container"> <h3>Administration</h3> <p> On the page, Admins can create reports for: </p><p> - Membership Report (This report will show the status of training and volunteer hours, as well as gains and losses of people at all levels and roles) </p> <p> - Region Comparison Report (This report will show how the Regions compare to each other in number of events, number of volunteers, and amount of donations) </p> <p> - Events Report (This report will show a list of events within a selected time frame) </p> <p> - Donation Report (This report will show a list of donations within a selected time frame) </p> <p> - Inventory Report (This report will show a list of HOW\'s inventory, the item condition, and the amount it has been used) </p> Other Management functionality can be added based on organizational needs. These reports should have a link to export to excel for more functionality.  </div>'),a.put("views/manage/training.html",'<!DOCTYPE html> <div class="container"> <h3>My Training</h3> </div>'),a.put("views/masterfooter.html",'<!DOCTYPE html> <footer class="foot"> <div class="social"> <hr> <button><a href="https://twitter.com/Heroesonthewate"><i class="fa fa-twitter fa-2x" aria-hidden="true"></i></a></button> <button><a href="http://www.facebook.com/HeroesontheWater"><i class="fa fa-facebook-f fa-2x" aria-hidden="true"></i></a></button> <button><a href="https://www.linkedin.com/company/heroes-on-the-water"><i class="fa fa-linkedin fa-2x" aria-hidden="true"></i></a></button> <button><a href="https://www.youtube.com/user/PaddleFishHeal/"><i class="fa fa-youtube-play fa-2x" aria-hidden="true"></i></a></button> <hr> </div> <div class="footerlinks"> <div class="column aboutus"> <h4>ABOUT US</h4> <!--thad: ui router opts was removed until proper actions are taken ui-sref-opts="{reload: true}"--> <a ng-href="#/whoweare"> <p>Why HOW?</p> </a> <a href="http://heroesonthewater.org/who-we-are/board/"> <p>Board &amp; Staff</p> </a> <a href="http://heroesonthewater.org/who-we-are/partnerships/"> <p>Partnerships</p> </a> <a href="http://heroesonthewater.org/who-we-are/financials/"> <p>Financials</p> </a> <a href="http://heroesonthewater.org/contact/"> <p>Contact</p> </a> </div> <div class="column howtohelp"> <h4>HOW TO HELP</h4> <!--thad: ui router opts was removed until proper actions are taken ui-sref-opts="{reload: true}"--> <a ng-href="#/events"> <p>Volunteer</p> </a> <a href="http://heroesonthewater.org/how-to-help/sponsor/"> <p>Sponsor</p> </a> <a href="http://heroesonthewater.org/how-to-help/start-a-chapter/"> <p>Start a Chapter</p> </a> <a href="http://heroesonthewater.org/how-to-help/in-kind-contribution/"> <p>In-Kind Contribution</p> </a> </div> <div class="column news"> <h4>NEWS</h4> <a href="http://heroesonthewater.org/blog/"> <p>Read Our Blog</p> </a> <a href="http://heroesonthewater.org/media/photo-gallery/"> <p>Photo Gallery</p> </a> <a href="http://heroesonthewater.org/media/press/"> <p>Press</p> </a> </div> <div class="column meta"> <h4>META</h4> <a href="http://heroesonthewater.org/terms-of-use/"> <p>Terms of Use</p> </a> <a href="http://heroesonthewater.org/privacy-policy/"> <p>Privacy Policy</p> </a> </div> <div class="column buttons"> <a href="http://visitor.r20.constantcontact.com/d.jsp?&#10;&#10;llr=t5yuarcab&amp;p=oi&amp;m=1102230217683&amp;sit=oimdo5qdb&amp;f=612&#10;&#10;b8958-893d-420d-99b7-0d5e512a9507" target="_blank"> <button id="subscribe"><i class="fa fa-envelope-o fa-lg" aria-hidden="true"></i> <h2>SUBSCRIBE</h2> </button> </a> <button ng-click="showDonate()" id="donate" style="margin-top:15px"> <h2>DONATE</h2> </button> </div> <div class="column awards"> <img id="topnonprofit-badge" src="/assets/images/footer/2015TopNonprofitBadge.png" alt="topnonprofit-badge" width="144px"> <img id="cfc-badge" src="/assets/images/footer/HOW-CFC.jpg" alt="cfc-badge" width="70px"> <img id="guidestar-badge" src="/assets/images/footer/Guidestar-Gold-Seal.png" alt="guidestar-badge" width="61px"> </div> </div> <div class="love"> <a href="http://r4alliance.org/"> <img id="r4-badge" src="/assets/images/footer/r4-alliance-logo-100.png" alt="r4-badge" width="60px"> </a> <p>Made with <i class="fa fa-heart" style="color: #DD2E44" aria-hidden="true"></i> in Dallas, Texas. &copy;2016 All Rights Reserved.</p> </div> </footer>'),a.put("views/masternav.html",'<!DOCTYPE html> <header> <div class="container-fluid" id="navbar-master"> <!-- logo and toggle --> <div class="logo"> <img ng-href="#/home" src="assets/images/logos/bannerlogo.png" width="240px"> </div> <div class="mobilenavtoggle"> <button class="hamburger hamburger--slider" type="button" ng-click="toggleMenu()"> <span class="hamburger-box"> <span class="hamburger-inner"></span> </span> </button> </div> <!-- Collapsible portion --> <!-- navbar left --> <div class="nav navbar-left"> <!-- thad removed ui-sref-active="current" until fix is implemented--> <a ng-repeat="nav in leftnav" ng-href="{{nav.state}}"> <h2>{{nav.text}}</h2> </a> </div> <!-- navbar right show if sessionState is FALSE --> <div class="nav navbar-right" ng-hide="sessionState"> <!-- <a href="http://visitor.r20.constantcontact.com/d.jsp?&#10;&#10;llr=t5yuarcab&amp;p=oi&amp;m=1102230217683&amp;sit=oimdo5qdb&amp;f=612&#10;&#10;b8958-893d-420d-99b7-0d5e512a9507" target="_blank">\r\n                <button id="subscribe"><i class="fa fa-envelope-o fa-lg" aria-hidden="true"></i>\r\n                    <h2>SUBSCRIBE</h2>\r\n                </button>\r\n            </a> --> <button ng-click="showDonate()" id="donate" style="margin-top:15px"> <h2>DONATE</h2> </button> <a ng-href="{{rightnav[0].state}}"> <h2>{{rightnav[0].text}}</h2> </a> </div> <!-- navbar right show if sessionState is TRUE --> <div class="nav navbar-right" ng-show="sessionState"> <!-- <button id="subscribe"><i class="fa fa-envelope-o fa-lg" aria-hidden="true"></i>\r\n                <h2>SUBSCRIBE</h2>\r\n            </button> --> <button ng-click="showDonate()" id="donate" style="margin-top:15px"> <h2>DONATE</h2> </button> <li class="dropdown"> <a class="toggle-dropdown" role="button" aria-haspopup="true" aria-expanded="false" href="#/manage/dash"> <span style="margin-right:5px"><i class="fa fa-user fa-lg" aria-hidden="true"></i></span> <h2>{{rightnavloggedin[0].text}}</h2> <span class="caret"></span> </a> <ul ng-switch="sessionUserRole" class="managelinks dropdown-menu"> <!-- ui-sref-opts was removed thad--> <li ng-switch-when="National Staff"> <a ng-repeat="nav in nationalNav" ng-href="{{nav.state}}"> <h3>{{nav.text}}</h3> </a> </li> <li ng-switch-when="Chapter Lead"> <a ng-repeat="nav in ltmNav" ng-href="{{nav.state}}"> <h3>{{nav.text}}</h3> </a> </li> <li ng-switch-when="Volunteer"> <a ng-repeat="nav in volunteerNav" ng-href="{{nav.state}}"> <h3>{{nav.text}}</h3> </a> </li> <li ng-switch-when="Participant"> <a ng-repeat="nav in participantNav" ng-href="{{nav.state}}"> <h3>{{nav.text}}</h3> </a> </li> <li ng-switch-default> <a ng-repeat="nav in participantNav" ng-href="{{nav.state}}"> <h3>{{nav.text}}</h3> </a> </li> <li role="separator" class="divider"></li> <li> <a ng-href="{{rightnavloggedin[0].state}}"> <h3>Management Dashboard</h3> </a> </li> <li> <a href="#" ng-click="logout()"> <h3>Sign Out</h3> </a> </li> </ul> </li> </div> <!-- end navbar-right --> </div> <!-- end container-fluid --> <div id="menu" ng-show="menuActive" class="fadein fadeout"> <div class="menulinks"> <a ng-href="#/home" ng-click="dismissMenu()"> <h3>HOME</h3> </a> <div ng-switch="sessionUserRole"> <div ng-switch-when="National Staff"> <a ng-repeat="nav in nationalNav" ng-href="{{nav.state}}" ng-click="dismissMenu()"> <h3>{{nav.text}}</h3> </a> </div> <div ng-switch-when="Chapter Lead"> <a ng-repeat="nav in ltmNav" ng-href="{{nav.state}}" ng-click="dismissMenu()"> <h3>{{nav.text}}</h3> </a> </div> <div ng-switch-when="Volunteer"> <a ng-repeat="nav in volunteerNavs" ng-href="{{nav.state}}" ng-click="dismissMenu()"> <h3>{{nav.text}}</h3> </a> </div> <div ng-switch-when="Participant"> <a ng-repeat="nav in participantNav" ng-href="{{nav.state}}" ng-click="dismissMenu()"> <h3>{{nav.text}}</h3> </a> </div> </div> <div ng-show="sessionUserRole"> <hr> <a href="#" ng-click="logout()"> <h3>Sign Out</h3> </a> </div> <hr> <div class="loggedout" ng-hide="sessionState"> <a ng-href="{{rightnav[0].state}}" ng-click="dismissMenu()"> <h2>{{rightnav[0].text}}</h2> </a> </div> <div class="loggedin" ng-show="sessionState"> <div ng-switch="root.userRole"> <div ng-switch-when="National Staff"> <a ng-href="dash" ng-click="dismissMenu()"> <h4>{{rightnavloggedin[0].text}}</h4> </a> <a ng-repeat="nav in volunteerNavs" ng-href="{{nav.state}}" ng-click="dismissMenu()"> <h4>{{nav.text}}</h4> </a> </div> <div ng-switch-when="Chapter Lead"> <a ng-href="dash" ng-click="dismissMenu()"> <h4>{{rightnavloggedin[0].text}}</h4> </a> <a ng-repeat="nav in volunteerNavs" ng-href="{{nav.state}}" ng-click="dismissMenu()"> <h4>{{nav.text}}</h4> </a> </div> <div ng-switch-when="Volunteer"> <a ng-href="dash" ng-click="dismissMenu()"> <h4>{{rightnavloggedin[0].text}}</h4> </a> <a ng-repeat="nav in volunteerNavs" ng-href="{{nav.state}}" ng-click="dismissMenu()"> <h4>{{nav.text}}</h4> </a> </div> <div ng-switch-when="Participant"> <a ng-href="dash" ng-click="dismissMenu()"> <h4>{{rightnavloggedin[0].text}}</h4> </a> <a ng-repeat="nav in volunteerNavs" ng-href="{{nav.state}}" ng-click="dismissMenu()"> <h4>{{nav.text}}</h4> </a> </div> </div> </div> </div> </div> </header>'),a.put("views/public.events.html",'<div class="container"> <h3>Events</h3> <div style="display: flex; flex-wrap:wrap"> <div class="form-group" style="flex-grow:1; min-width:350px"> <label class="control-label" for="fname">Search:</label> <div> <input id="fname" name="newQuery.search" type="text" placeholder="Enter query here" class="form-control input-md pull-left" ng-change="filtersRunner()" ng-model="newQuery.search" ng-required="true" ng-model-options="{ debounce: 1000 }"> </div> </div> <div class="form-group" style="flex-grow:1; min-width:350px"> <div> <label class="control-label">filter between:</label> </div> <div> <div style="width:49%; display:inline-block"> <label class="control-label">Lower bound:</label> <p class="input-group"> <input type="text" class="form-control" ng-model="dt" datetime-picker="MM/dd/yyyy HH:mm" is-open="popup1.opened"> <!--uib-datepicker-popup="{{format}}" ng-model="dt" is-open="popup1.opened" datepicker-options="dateOptions" close-text="Close" alt-input-formats="altInputFormats" />--> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="open()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> <div style="width:49%; display:inline-block"> <label class="control-label">Upper bound:</label> <p class="input-group"> <input type="text" class="form-control" ng-model="dt2" datetime-picker="MM/dd/yyyy HH:mm" is-open="popup2.opened"> <!--uib-datepicker-popup="{{format}}" ng-model="dt" is-open="popup1.opened" datepicker-options="dateOptions" close-text="Close" alt-input-formats="altInputFormats" />--> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="open2()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> </div> <!--<input type="text" class="form-control" is-open="thad" datetime-picker="MM/dd/yyyy HH:mm" ng-model="datez">--> <!--<input type="text" class="form-control" datetime-picker="mediumDate" ng-model="picker1_date" is-open="thad" enable-time="false" datepicker-options="thad2" close-on-date-selection="false" datepicker-append-to-body="true">--> </div> </div> <div class="row event-row"> <div class="col-md-4" ng-repeat="(key, event) in eventList"> <!--<div>{{event}}</div>\r\n            <div>{{userService.getId()}}</div>--> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">{{event.name}}</h3> </div> <div> <img src="/assets/images/logos/logo-md.png" class="img-responsive" width="100%"> </div> <div class="list-group"> <div class="list-group-item"> <h6 class="list-group-item-text">Start Time</h6> <h4 class="list-group-item-heading">{{event.startTime | date:\'MM-dd-yyyy HH:mm a\'}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">End Time</h6> <h4 class="list-group-item-heading">{{event.endTime | date:\'MM-dd-yyyy HH:mm a\'}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Location</h6> <h4 class="list-group-item-heading">{{event.location}}</h4> </div> </div> <!--<div ng-if="userService.getRole()" class="panel-footer" style="height:55px">\r\n                    <a class="btn btn-primary pull-right" style="display:inline-block; margin-left:4px" ng-click="showDescription($index)">More Details</a>\r\n                    <a class="btn btn-primary pull-right" style="display:inline-block; margin-left:4px" ng-click="joinEvent($index)">Attending?</a>\r\n                    <a ng-if="userService.getRole()!==\'Participant\'" style="display:inline-block; margin-left:4px" class="btn btn-primary pull-right" ng-click="volunteer($index)">Volunteering</a>\r\n                </div>--> <div ng-if="userService.getRole()" class="panel-footer"> <a class="btn btn-primary" style="display:inline-block; margin:2px" ng-click="showDescription($index)">More Details</a> <!--<a class="btn btn-primary" style="display:inline-block; margin:2px" ng-click="joinEvent($index)">{{()?:\'Attending\'?}}</a>--> <a style="display:inline-block; margin:2px" class="btn btn-primary" ng-click="addParticipant(key, $index)">{{(allParticipantIsDisableds[$index][\'isDisabled\'])?\'Registered To attend\':\'Attending?\'}}</a> <a ng-if="userService.getRole()!==\'Participant\'" style="display:inline-block; margin:2px" class="btn btn-primary" ng-click="addVolunteer(key, $index)">{{(allVolunteerIsDisableds[$index][\'isDisabled\'])?\'Registered To Volunteer\':\'Volunteering?\'}}</a> </div> </div> </div> </div> </div> <master-footer></master-footer>'),
a.put("views/whoweare.html",'<!DOCTYPE html><!--The Who we are page that link to more specific information about HOW  --> <div class="hero"> <img id="heroimg" src="/assets/images/whoweare/whoweare-splash.png" alt="Whoweare Hero"> <img id="heroquote" src="/assets/images/whoweare/quote.png" alt="Whoweare Quote"> <div id="herodesc"> <img id="desctextbg" src="/assets/images/whoweare/roundedrect.png" alt="Whoweware Textbg"> <h3 class="desctext">Heroes on the Water helps our Nation’s warriors and veterans from all branches of the United States military unwind using the therapeutic qualities of fishing from kayaks. What looks like a day trip of paddling and fishing is in fact something much deeper and long-lasting.</h3> </div> <div id="herologo"> <img id="how-logomark" src="/assets/images/logos/logo-md.png" alt="Whoweare Logostamp"> </div> </div> <!-- end hero --> <div class="whoweare-body"> <hr> <div id="whoweare-text"> <p>Founded in 2007, our unique kayak fishing program allows the participants a</p> <h6> chance to decompress from the stresses</h6> <p> associated with combat and the physical rigors of rehabilitation. Warriors enjoy these benefits while on guided fishing trips held in local communities around the country.</p> <br> <br> <p>Participants receive basic kayak fishing and paddling instruction, angling clinics and paddling classes for participants with skill sets ranging from beginners to the most experienced paddlers. The program also assists these personnel in adapting these newly developed skills to their new abilities. Adaptive kayaks, kayaking accessories and angling equipment is offered on an as needed basis to accommodate a soldier’s particular needs.</p> <br> <br> <p>Our program is unique in that it is a</p> <h6> long-term activity</h6> <p>, not a one-time event. We believe that the effectiveness of the program is a direct result of engaging the wounded military personnel for the long-term.</p> <br> <br> <p>One soldier, at the Center for the Intrepid, called what we do </p> <h6>“Triple Therapy” or “all at once therapy.”</h6> <p> On post he has to go to the gym for physical therapy, then go upstairs for his occupational therapy, and then go to the psychologist for mental therapy.</p> <h6> With kayak fishing he gets it all at once</h6> <p> – physical therapy from paddling and fishing, occupational therapy learning a lifetime sport/activity, and mental therapy from relaxing in nature with no distractions or expectations of performance.</p> </div> <div id="whoweare-video"> <iframe id="youtubevid" src="https://www.youtube.com/embed/RcZuQXn4KSY?list=FLRn_wcQOQE9FbdIDdjab5lQ&enablejsapi=1" frameborder="0" allowfullscreen></iframe> </div> </div> <!-- end whoweare-body --> <div class="jumpbar who"> <div class="column col1"> <h4>PARTNERS</h4> <p>Learn about the organizations we collaborate with and how you can help too.</p> <a href="http://heroesonthewater.org/who-we-are/partnerships/"> <button id="learnmore" style="margin-top:15px"> <h2>LEARN MORE</h2> </button> </a> </div> <div class="column col2"> <h4>THERAPEUTIC PROGRAMS</h4> <p>Programs provide alternative therapy to individuals diagnosed with PTSD and/or traumatic brain injury.</p> <a href="http://heroesonthewater.org/who-we-are/programs/therapeutic-programs/"> <button id="learnmore" style="margin-top:15px"> <h2>LEARN MORE</h2> </button> </a> </div> <div class="column col3"> <h4>THE BOARD</h4> <p>Meet the people who dedicate themselves everyday to making a soldier\'s day.</p> <a href="http://heroesonthewater.org/who-we-are/board/"> <button id="learnmore" style="margin-top:15px"> <h2>LEARN MORE</h2> </button> </a> </div> </div> <!-- end jumpbar --> <div class="blogbanner"> <img id="bannerbg" src="/assets/images/whoweare/blog-bg.png" alt="Whoweare Blogbg"> <div class="blogdescoverlay"> <div id="blogdesc"> <h4>Check out stories and updates from our team, partners and supporters</h4> <a href="http://heroesonthewater.org/blog/"> <button id="gotoblog" style="margin-top:15px"> <h2>READ THE BLOG</h2> </button> </a> </div> </div> </div> <!-- end blogbanner --> <master-footer></master-footer>'),a.put("parts/addInventoryToEvent.html",'<!--<div class="row">--><!--  <div class="col-md-12">--><!--\r\n<ui-select multiple ng-model="person.selected" theme="bootstrap" close-on-select="false" on-remove="removed($item, $model)" on-select="onSelectCallback($item, $model)" ng-disabled="disabled" style="min-width: 300px;" title="Choose a person">\r\n	<ui-select-match placeholder="Select a person in the list or search his name/age...">{{$item.name}}</ui-select-match>\r\n	<ui-select-choices repeat="person in participantList">\r\n		<div ng-bind-html="person.name | highlight: $select.search"></div>\r\n		<small>\r\n		 email: {{person.email}}\r\n		</small>\r\n	</ui-select-choices>\r\n</ui-select>\r\n--><!--  </div>--><!--</div>--><!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Add New Item</h4> </div> <!-- end modal-header --> <div class="modal-body"> <ui-select multiple ng-model="person.selected" theme="bootstrap" close-on-select="false" on-remove="removed($item, $model)" on-select="onSelectCallback($item, $model)" ng-disabled="disabled" style="min-width: 300px" title="Choose a person"> <ui-select-match placeholder="Add inventory from your chapter...">{{$item.name}}</ui-select-match> <ui-select-choices repeat="item in selectedInventory"> <div ng-bind-html="item.name | highlight: $select.search"></div> <small> category: {{item.category}} </small> </ui-select-choices> </ui-select> </div> <!-- end modal body --> <div class="modal-footer"> <button type="button" name="submit" class="btn btn-primary" ng-click="addParticipants()">Submit</button> </div>'),a.put("parts/addParticipantsToEvent.html",'<!--<div class="row">--><!--  <div class="col-md-12">--><!--\r\n<ui-select multiple ng-model="person.selected" theme="bootstrap" close-on-select="false" on-remove="removed($item, $model)" on-select="onSelectCallback($item, $model)" ng-disabled="disabled" style="min-width: 300px;" title="Choose a person">\r\n	<ui-select-match placeholder="Select a person in the list or search his name/age...">{{$item.name}}</ui-select-match>\r\n	<ui-select-choices repeat="person in participantList">\r\n		<div ng-bind-html="person.name | highlight: $select.search"></div>\r\n		<small>\r\n		 email: {{person.email}}\r\n		</small>\r\n	</ui-select-choices>\r\n</ui-select>\r\n--><!--  </div>--><!--</div>--><!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Add New User</h4> </div> <!-- end modal-header --> <div class="modal-body"> <ui-select multiple ng-model="person.selected" theme="bootstrap" close-on-select="false" on-remove="removed($item, $model)" on-select="onSelectCallback($item, $model)" ng-disabled="disabled" style="min-width: 300px" title="Choose a person"> <ui-select-match placeholder="Select a person in the list or search his name/age...">{{$item.name}}</ui-select-match> <ui-select-choices repeat="person in participantList"> <div ng-bind-html="person.name | highlight: $select.search"></div> <small> email: {{person.email}} </small> </ui-select-choices> </ui-select> </div> <!-- end modal body --> <div class="modal-footer"> <button type="button" name="submit" class="btn btn-primary" ng-click="addParticipants()">Submit</button> </div>'),a.put("parts/changeChapter.html",'<!DOCTYPE html><!-- start modal-header --> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Change Chapter</h4> </div> <!-- end modal-header --> <!-- start modal body --> <div class="modal-body"> <form name="userForm" class="form-horizontal" ng-submit="postUser()" novalidate style="overflow-y: auto; overflow-x: hidden"> <div class="form-group"> <label class="col-md-4 control-label" for="region">Region*</label> <div class="col-md-7"> <select id="region" name="region" class="form-control" ng-options="region as region.text for region in regions" ng-model="newRegion" ng-change="regionUpdate(newRegion)" required> </select> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="chapter">Chapter*</label> <div class="col-md-7"> <select id="chapter" name="chapter" class="form-control" ng-model="newChapter" ng-options="chapter as chapter.text for chapter in chapters" required> </select> </div> </div> <!-- Button - Submit/Cancel --> <div class="form-group"> <label class="col-md-4 control-label" for="submit"></label> <div class="col-md-7"> <button id="submit" name="submit" class="btn btn-primary" ng-disabled="userForm.chapter.$invalid" ng-click="updateRegionChapter(newRegion, newChapter)">Submit</button> <button id="cancel" name="cancel" class="btn btn-default" ng-click="cancel()">Cancel</button> </div> </div> </form> </div> <!-- end modal body -->'),a.put("parts/chapterAdd.html",'<!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Add New Chapter</h4> </div> <!-- end modal-header --> <div class="modal-body"> <form name="chapterForm" ng-submit="postChapter()" class="form-horizontal" novalidate> <fieldset> <!-- Text - Chapter Name --> <div class="form-group"> <label class="col-md-4 control-label" for="name">Chapter Name*</label> <div class="col-md-7"> <input id="name" name="name" type="text" class="form-control input-md" ng-model="newChapter.name" ng-required="true"> <p ng-show="chapterForm.name.$invalid && !chapterForm.name.$pristine" class="help-block">Enter a valid chapter name.</p> </div> </div> <!-- Text - Manager Name --> <div class="form-group"> <label class="col-md-4 control-label" for="lead">Assigned Chapter Manager*</label> <div class="col-md-7"> <input id="manager" name="manager" type="text" class="form-control input-md" ng-model="newChapter.lead" ng-required="true"> <p ng-show="chapterForm.manager.$invalid && !chapterForm.manager.$pristine" class="help-block">Enter a valid manager\'s name.</p> </div> </div> <!-- Textarea - Description --> <div class="form-group"> <label class="col-md-4 control-label" for="description">Description</label> <div class="col-md-7"> <textarea class="form-control" id="description" name="description" ng-model="newChapter.description"></textarea> </div> </div> <!-- Text - Email --> <div class="form-group"> <label class="col-md-4 control-label" for="email">Contact Email*</label> <div class="col-md-7"> <input id="email" name="email" type="email" placeholder="johndoe@heroesonthewater.org" class="form-control input-md" ng-model="newChapter.email" ng-required="true"> <p ng-show="chapterForm.email.$invalid && !chapterForm.email.$pristine" class="help-block">Enter a valid email address.</p> </div> </div> <!-- Text - Facebook --> <div class="form-group"> <label class="col-md-4 control-label" for="facebook">Facebook URL*</label> <div class="col-md-7"> <input id="facebook" name="facebook" type="url" placeholder="http://www.facebook.com" class="form-control input-md" ng-model="newChapter.facebook" ng-required="true"> <p ng-show="chapterForm.facebook.$invalid && !chapterForm.facebook.$pristine" class="help-block">Enter a valid facebook address.</p> </div> </div> <!-- Text - Donation --> <div class="form-group"> <label class="col-md-4 control-label" for="donation">Donation URL*</label> <div class="col-md-7"> <input id="donation" name="donation" type="url" placeholder="http://www.paypal.com" class="form-control input-md" ng-model="newChapter.donation" ng-required="true"> <p ng-show="chapterForm.donation.$invalid && !chapterForm.donation.$pristine" class="help-block">Enter a valid donation address.</p> </div> </div> <!-- Select - Region --> <div class="form-group"> <label class="col-md-4 control-label" for="region">Region*</label> <div class="col-md-7"> <select id="region" name="region" class="form-control" ng-options="region as region.text for region in regions" ng-model="newChapter.region"> </select> </div> </div> <!-- Select - State --> <div class="form-group"> <label for="" class="col-md-4 control-label" for="state">State*</label> <div class="col-md-7"> <select ng-options="state as state.name for state in states" class="form-control input-md" ng-model="newChapter.state"></select> </div> </div> <!-- Text - Zip Code --> <div class="form-group"> <label class="col-md-4 control-label" for="zip">Zip Code*</label> <div class="col-md-7"> <input id="location" name="location" type="text" class="form-control input-md" ng-model="newChapter.zip" ng-required="true" placeholder="75202"> <p ng-show="chapterForm.location.$invalid && !chapterForm.location.$pristine" class="help-block">Enter a valid Zip Code.</p> </div> </div> <!-- Label - Required Field Label --> <div class="form-group"> <div class="col-md-4"></div> <p class="col-md-7">* indicates required field.</p> </div> </fieldset> </form> </div> <!-- end modal body --> <div class="modal-footer"> <!-- Button - Submit --> <div class="form-group"> <label class="col-md-4 control-label" for="submit"></label> <div class="col-md-7"> <button id="submit" name="submit" class="btn btn-primary" ng-disabled="chapterForm.$invalid" ng-click="postChapter(newChapter)">Submit</button> </div> </div> </div>'),a.put("parts/chapterStatus.html",'<!DOCTYPE html><!-- start modal-header --> <div class="modal-header" ng-init="initialize()"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Chapter Status</h4> </div> <!-- end modal-header --> <!-- start modal body --> <div id="chapter-status-modal" class="modal-body"> <!-- This section is available only too National Staff --> <div class="form-group" ng-show="$root.userRole === \'National Staff\'" style="width: 100%"> <div class="row" style="margin-bottom: 10px"> <label class="col-md-3 control-label" for="logLevel">Log level*</label> <div class="col-md-7"> <input name="logLevel" type="radio" ng-model="logLevel" ng-click="levelChanged(logLevel)" value="National">National <input name="logLevel" type="radio" ng-model="logLevel" ng-click="levelChanged(logLevel)" value="Chapter" style="margin-left: 5px">Chapter </div> </div> <div class="row" ng-show="logLevel === \'Chapter\'" style="margin-bottom: 10px"> <label class="col-md-3 control-label" for="region">Region*</label> <div class="col-md-7"> <select id="region" name="region" class="form-control" ng-options="region as region.text for region in regions" ng-model="selectedRegion" ng-change="regionUpdate(selectedRegion)" required> </select> </div> </div> <div class="row" ng-show="logLevel === \'Chapter\'" style="margin-bottom: 10px"> <label class="col-md-3 control-label" for="chapter">Chapter*</label> <div class="col-md-7"> <select id="chapter" name="chapter" class="form-control" ng-model="selectedChapter" ng-options="chapter as chapter.value for chapter in chapters" ng-change="chapterChanged()" required> </select> </div> </div> <div class="row" ng-show="logLevel === \'National\' || selectedChapter" style="margin-bottom: 10px"> <label class="col-md-3 control-label">Log Type*</label> <div class="col-md-7"> <select class="form-control" ng-options="type as type.text for type in logType" ng-model="selectedOption" ng-change="selectedLogOption(selectedOption)" required></select> </div> </div> </div> <!-- This section is available only too National Staff --> <!-- This section is available only too Chapter Lead --> <div class="form-group" ng-show="$root.userRole === \'Chapter Lead\'"> <div class="row" style="margin-bottom: 10px"> <label class="col-md-3 control-label">Log Type*</label> <div class="col-md-7"> <select class="form-control" ng-options="type as type.text for type in logType" ng-model="selectedOption" ng-change="selectedLogOption(selectedOption)" required></select> </div> </div> </div> <hr> <div class="logContainer" ng-show="selectedOption"> <div ng-repeat="log in currentLog "> <label>{{log.ts | date:\'medium\'}}:</label> <p>{{log.msg}}</p> </div> <p ng-show="!currentLog.length" style="text-align: center"> <b>-- No log data available --</b> </p> </div> </div> <!-- end modal body -->'),a.put("parts/donors.html",'<!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Donation Information</h4> </div> <!-- end modal-header --> <div class="modal-body"> <form class="form-horizontal" name="donation" ng-submit="donate(donation.$valid)"> <fieldset> <!-- Text - First Name --> <div class="form-group"> <label class="col-md-4 control-label" for="fname">First Name*</label> <div class="col-md-7"> <input id="fname" name="fname" type="text" placeholder="John" class="form-control input-md" ng-required="true"> </div> </div> <!-- Text - Last Name --> <div class="form-group"> <label class="col-md-4 control-label" for="lname">Last Name*</label> <div class="col-md-7"> <input id="lname" name="lname" type="text" placeholder="Doe" class="form-control input-md" ng-required="true"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="city">Billing Address*</label> <div class="col-md-7"> <input id="address" name="address" type="text" placeholder="" class="form-control input-md" ng-required="true"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="city">City*</label> <div class="col-md-7"> <input id="city" name="city" type="text" placeholder="Dallas" class="form-control input-md" ng-required="true"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="state">State*</label> <div class="col-md-2"> <input id="state" name="state" type="text" ngpattern="[A-Z]{0,2}" placeholder="TX" class="form-control input-md" ng-required="true"> </div> <label class="col-md-2 control-label" for="zipcode">Zip Code*</label> <div class="col-md-3"> <input id="zipcode" name="zipcode" type="text" ngpattern="[0-9]{0,5}" placeholder="12345" class="form-control input-md" ng-required="true"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="creditcard">Credit Card Number*</label> <div class="col-md-7"> <input id="creditcard" name="creditcard" type="text" ngpattern="[0-9,-]{13,19}" placeholder="1234-5678-9123-4567" class="form-control input-md" ng-required="true"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="date">Expiration Date*</label> <div class="col-md-4"> <p class="input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="newUserDirectory.DOB" is-open="popup.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="open()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> <label class="col-md-1 control-label" for="cvc">CVC*</label> <div class="col-md-2"> <input id="cvc" name="cvc" type="text" ngpattern="[0-9]{0,3}" placeholder="123" class="form-control input-md" ng-required="true"> </div> </div> <div class="form-group"> </div> <div class="form-group"> <label class="col-md-4 control-label" for="dollaramount">Dollar Amount*</label> <div class="col-md-4"> <input id="dollaramount" type="text" name="dollaramount" type="number" placeholder="$1.00" class="form-control input-md" ng-requied="true"> </div> </div> <div class="form-group"> <div class="col-md-4"></div> <p class="col-md-7">* indicates required field.</p> </div> <!-- Button - Submit --> <div class="form-group"> <label class="col-md-4 control-label" for="submit"></label> <div class="col-md-7"> <button id="submit" name="submit" class="btn btn-primary" ng-submit="donate()">Donate</button> </div> </div> </fieldset> </form> </div> <!-- end modal body -->'),a.put("parts/filloutMedia.html",'<!DOCTYPE html><!-- start modal-header --> <div class="modal-header" ng-init="initialize()"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Please fillout waiver</h4> </div> <!-- end modal-header --> <!-- start modal body --> <div id="manage-additional-chapters" class="modal-body"> <style>.waiver-form .form-control {\r\n        width: 300px !important;\r\n        margin: 4px;\r\n        display: inline-block !important;\r\n    }\r\n\r\n    #the-canvas {\r\n        border: 1px solid black;\r\n    }</style> <script src="./lib/pdf.js"></script> <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> <!-- bower:css --> <!-- endbower --> <br> <div style="width: 80%; text-align: center; margin: auto" class="panel panel-default"> <div class="panel-heading">PDF.js \'Hello, world!\' example</div> <div class="panel-body"> <form style="text-align: left" class="container-fluid waiver-form"> <div class="row"> <div class="col-md-6"> <legend>Participant/Volunteer</legend> <div class="form-group"> <label for="author_name">Name</label> <input class="form-control" type="text" id="author_name"> </div> <div class="form-group"> <label for="author_date">Date</label> <input class="form-control" type="date" id="author_date"> </div> <div class="form-group"> <label>Enter your signature below</label> <br> <canvas id="signatureCanvas" width="300" height="37" style="border-radius:4px; border: 1px solid lightgrey"></canvas> <br> <div class="button-bar"> <button type="button" class="btn btn-primary" onclick="clearCanvas()">Clear</button> <!--<button type="button" class=\'btn btn-primary\' onclick=\'saveCanvas()\'>Sign</button>--> </div> </div> <div class="form-group"> <label for="author_email">Email</label> <input class="form-control" type="email" id="author_email"> </div> <div class="form-group"> <label for="author_phone">Phone</label> <input class="form-control" type="text" id="author_phone"> </div> <div class="form-group"> <label for="author_street">Street Address</label> <input class="form-control" type="text" id="author_street"> </div> <div class="form-group"> <label for="author_apt">Apt/Suite</label> <input class="form-control" type="text" id="author_apt"> </div> <div class="form-group"> <label for="author_city">City</label> <input class="form-control" type="text" id="author_city"> </div> <div class="form-group"> <label for="author_state">State</label> <input class="form-control" type="text" id="author_state"> </div> <div class="form-group"> <label for="author_zip">Zip</label> <input class="form-control" type="text" id="author_zip"> </div> </div> <div class="col-md-6"> <legend>Witness</legend> <div class="form-group"> <label for="witness_name">Name</label> <input class="form-control" type="text" id="witness_name"> </div> <div class="form-group"> <label for="witness_date">Date</label> <input class="form-control" type="date" id="witness_date"> </div> <div class="form-group"> <label>Enter your signature below</label> <br> <canvas id="signatureCanvas2" width="300" height="37" style="border-radius:4px; border: 1px solid lightgrey"></canvas> <br> <div class="button-bar"> <button type="button" class="btn btn-primary" onclick="clearCanvas2()">Clear</button> <!--<button type="button" class=\'btn btn-primary\' onclick=\'saveCanvas2()\'>Sign</button>--> </div> </div> <div class="form-group"> <label for="witness_email">Email</label> <input class="form-control" type="text" id="witness_email"> </div> <div class="form-group"> <label for="witness_phone">Phone</label> <input class="form-control" type="text" id="witness_phone"> </div> </div> </div> <div class="row" style="text-align: center; margin: auto; width:100%"> <button type="button" class="btn btn-primary" onclick="saveImg()">save image</button> </div> </form> </div> </div> <div> <canvas id="the-canvas1" style="display:none"></canvas> <canvas id="the-canvas2" style="display:none"></canvas> <img id="mediaWaiver"> <img id="releaseWaiver"> </div> </div> <!-- end modal body -->'),a.put("parts/giveFeedback.html",'<!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Feedback Form</h4> </div> <!-- end modal-header --> <div class="modal-body"> <form name="userForm" class="form-horizontal"> <fieldset> <div class="form-group" style="margin: 5px"> <div class="row"> <label class="col-md-4 control-label" for="types">Feedback Type</label> <div class="col-md-7"> <select name="types" ng-options="type as type.text for type in types" class="form-control input-md" ng-model="formData.type" required></select> </div> </div> <div class="row"> <label class="col-md-4 control-label" for="description">Description</label> <div class="col-md-7"> <textarea name="description" class="form-control input-md" placeholder="description" rows="5" ng-model="formData.description" id="description" style="margin-top: 5px" required></textarea> </div> </div> <div class="row" style="text-align: center"> <div style="display: inline-block; margin-top: 10px"> <button id="submit" name="submit" class="btn btn-primary" ng-disabled="userForm.description.$invalid || userForm.types.$invalid" ng-click="submitForm()">Submit</button> <button id="cancel" name="cancel" class="btn btn-danger" ng-click="cancel()">Cancel</button> </div> </div> </div> </fieldset> </form> </div> <!-- end modal body -->'),a.put("parts/infoWindow.html",'<div class="infoWindow"> <h4><a href="{{parameter.url}}">{{parameter.name}}</a></h4> <p>{{parameter.contactName}}</p> <p>{{parameter.contactEmail}}</p> </div>'),a.put("parts/manageParticipants.html",'<style>#participantsTable_wrapper>div:nth-child(2)>div {\r\n    margin-right: 3px;\r\n    overflow-x: auto;\r\n}</style> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">{{event.name +"\'s Participants"}}</h4> </div> <!-- end modal-header --> <div class="modal-body" ng-init="buildTable()"> <table id="participantsTable" class="display table table-bordered" style="width:100%"> <tfoot> <tr> <td> <button ng-click="addParticipant(new_row.email, event.key)" type="button" class="btn btn-primary"> <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> </button> </td> <td> <input class="form-control" type="text" ng-model="new_row.name.first"> </td> <td> <input class="form-control" type="text" ng-model="new_row.name.last"> </td> <td> <input class="form-control" type="text" ng-model="new_row.email"> </td> <td> <input class="form-control" type="text" ng-model="new_row.phone"> </td> </tr> </tfoot> </table> <div style="display:flex"> <button type="button" ng-click="deleteParticipants()" class="btn btn-danger">Delete selected participants</button> </div> </div> <!-- end modal body -->'),a.put("parts/manageVolunteers.html",'<style>#volunteersTable_wrapper>div:nth-child(2)>div {\r\n    margin-right: 3px;\r\n    overflow-x: auto;\r\n}</style> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">{{event.name +"\'s Volunteers"}}</h4> </div> <!-- end modal-header --> <div class="modal-body" ng-init="buildTable()"> <table id="volunteersTable" class="display table table-bordered" style="width:100%"> <tfoot> <tr> <td> <button ng-click="addVolunteer(email, event.key)" type="button" class="btn btn-primary"> <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> </button> </td> <td> <input class="form-control" type="text" ng-model="email"> </td> <td></td> <td></td> <td></td> </tr> </tfoot> </table> <div style="display:flex"> <button type="button" ng-click="deleteVolunteers()" class="btn btn-danger">Delete selected volunteers</button> </div> </div> <!-- end modal body -->'),a.put("parts/manageadditionalchapters.html",'<!DOCTYPE html><!-- start modal-header --> <div class="modal-header" ng-init="initialize()"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Add/Edit Additional Chapters</h4> </div> <!-- end modal-header --> <!-- start modal body --> <div id="manage-additional-chapters" class="modal-body"> <form name="userForm" class="form-horizontal" ng-submit="postUser()" novalidate> <div class="row"> <div style="margin-top: 10px"> <div> <select id="secondaryRegion" name="region" class="form-control region-dd" ng-options="region as region.text for region in regions" ng-model="newRegion" ng-change="regionUpdate(newRegion)" required> </select> </div> <div> <select id="secondaryChapter" name="chapter" class="form-control chapter-dd" ng-model="newChapter" ng-options="chapter as chapter.value for chapter in chapters" required> </select> </div> <div> <button id="add" name="add" class="btn btn-primary additonal-chapter-btn-green" ng-disabled="userForm.chapter.$invalid" ng-click="addChapter()">Add Chapter</button> </div> </div> <div style="margin-top: 10px"> <select name="currentChapters" multiple class="form-control" ng-model="currentChapter" ng-options="chapter as chapter.chapter.text for chapter in userChapters" required></select> <button id="remove" name="remove" class="btn btn-primary additonal-chapter-btn-red" ng-disabled="userForm.currentChapters.$invalid" ng-click="removeChapter()">Remove Chapter</button> </div> </div> <div class="row" style="text-align: center; margin-top: 10px"> <div> <button id="submit" name="submit" class="btn btn-primary" ng-disabled="!submitFlag" ng-click="updateChapters()">Submit</button> <button id="cancel" name="cancel" class="btn btn-default" ng-click="cancel()">Cancel</button> </div> </div> </form> </div> <!-- end modal body -->'),a.put("parts/managerolechangerequest.html",'<!DOCTYPE html><!-- start modal-header --> <div class="modal-header" ng-init="update()"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Manage Role Change Requests</h4> <h6><i class="fa fa-chevron-down pull-left" aria-hidden="true"></i>Click this icon for details</h6> <h6><i class="fa fa-minus-square pull-left" aria-hidden="true"></i>Click to decline request</h6> <h6><i class="fa fa-plus-square pull-left" aria-hidden="true"></i>Click to approve request</h6> </div> <!-- end modal-header --> <!-- start modal body --> <div class="modal-body"> <!-- Pending Requests --> <div class="panel panel-default"> <div class="panel-heading clearfix" id="pending-requests"> <h3 class="panel-title pull-left">Pending Requests &nbsp</h3> <span class="badge" ng-show="alertPending">{{pendingCount}}</span> <i ng-click="showForm1a = !showForm1a" class="fa fa-chevron-down pull-right" aria-hidden="true"></i> </div> </div> <div ng-repeat="request in pending_requests" ng-show="showForm1a"> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">{{request.name}} :&nbsp</h3> <h3 class="panel-title pull-left">{{request.request_role}}</h3> <i ng-click="showForm1b = !showForm1b" class="fa fa-chevron-down pull-right" aria-hidden="true"></i> <i ng-click="declined(request.key, request)" class="fa fa-minus-square pull-right" aria-hidden="true"></i> <i ng-click="approved(request.key, request)" class="fa fa-plus-square pull-right" aria-hidden="true"></i> </div> <div ng-show="showForm1b"> <div>Email: {{request.email}}</div> <div>Current Role: {{request.current_role}}</div> <div>Request Status: {{request.request_status}}</div> <div>Created: {{request.request_updated | date:\'MM/dd/yyyy @ h:mma\'}}</div> <div>User Comments: {{request.user_comment}}</div> </div> </div> </div> <!-- Approved Requests --> <div class="panel panel-default"> <div class="panel-heading clearfix" id="approved-requests"> <h3 class="panel-title pull-left">Approved Requests</h3> <i ng-click="showForm2a = !showForm2a" class="fa fa-chevron-down pull-right" aria-hidden="true"></i> </div> </div> <div ng-repeat="request in approved_requests" ng-show="showForm2a"> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">{{request.name}} :&nbsp</h3> <h3 class="panel-title pull-left">{{request.request_role}}</h3> <i ng-click="showForm2b = !showForm2b" class="fa fa-chevron-down pull-right" aria-hidden="true"></i> </div> <div ng-show="showForm2b"> <div>Email: {{request.email}}</div> <div>Current Role: {{request.current_role}}</div> <div>Request Status: {{request.request_status}}</div> <div>Created: {{request.request_updated | date:\'MM/dd/yyyy @ h:mma\'}}</div> <div>Reviewed By: {{request.reviewer}}</div> <div>User Comments: {{request.user_comment}}</div> <div>Reviewer Comments: {{request.reviewers_comment}}</div> </div> </div> </div> <!-- Declined Requests --> <div class="panel panel-default"> <div class="panel-heading clearfix" id="declined-requests"> <h3 class="panel-title pull-left">Declined Requests</h3> <i ng-click="showForm3a = !showForm3a" class="fa fa-chevron-down pull-right" aria-hidden="true"></i> </div> </div> <div ng-repeat="request in declined_requests" ng-show="showForm3a"> <div class="panel panel-default"> <div class="panel-heading clearfix"> <h3 class="panel-title pull-left">{{request.name}} :&nbsp</h3> <h3 class="panel-title pull-left">{{request.request_role}}</h3> <i ng-click="showForm3b = !showForm3b" class="fa fa-chevron-down pull-right" aria-hidden="true"></i> </div> <div ng-show="showForm3b"> <div>Email: {{request.email}}</div> <div>Current Role: {{request.current_role}}</div> <div>Request Status: {{request.request_status}}</div> <div>Created: {{request.request_updated | date:\'MM/dd/yyyy @ h:mma\'}}</div> <div>Reviewed By: {{request.reviewer}}</div> <div>User Comments: {{request.user_comment}}</div> <div>Reviewer Comments: {{request.reviewers_comment}}</div> </div> </div> </div> </div> <!-- end modal body -->'),
a.put("parts/newEventForm.html",'<!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Add New Event</h4> </div> <!-- end modal-header --> <div class="modal-body"> <form name="eventForm" ng-submit="postEvent()" class="form-horizontal" novalidate> <fieldset> <!-- Text - Event Name --> <div class="form-group"> <label class="col-md-4 control-label" for="name">Event Name*</label> <div class="col-md-7"> <input id="name" name="name" type="text" class="form-control input-md" ng-model="newEvent.name" ng-required="true"> <p ng-show="eventForm.name.$invalid && !eventForm.name.$pristine" class="help-block">Enter a valid event name.</p> </div> </div> <!-- Text - Manager Name --> <div class="form-group"> <label class="col-md-4 control-label" for="lname">Assigned Event Manager*</label> <div class="col-md-7"> <input id="manager" name="manager" type="text" class="form-control input-md" ng-model="newEvent.eventManager" ng-required="true"> <p ng-show="eventForm.manager.$invalid && !eventForm.manager.$pristine" class="help-block">Enter a valid manager\'s name.</p> </div> </div> <!-- Datepicker - Start date/time --> <div class="form-group"> <label class="col-md-4 control-label" for="sdate">Start Date*</label> <div class="col-md-7"> <p class="input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="st" is-open="startpopup.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="startopen()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> </div> <!-- Datepicker - End date/time --> <div class="form-group"> <label class="col-md-4 control-label" for="edate">End Date*</label> <div class="col-md-7"> <p class="input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="et" is-open="endpopup.opened" ng-required="true" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="endopen()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="location">Location*</label> <div class="col-md-7"> <input id="location" name="location" type="text" class="form-control input-md" ng-model="newEvent.location" ng-required="true" placeholder="211 S Akard St, Dallas, Texas"> <p ng-show="eventForm.location.$invalid && !eventForm.location.$pristine" class="help-block">Enter a valid location.</p> </div> </div> <!-- Text - Email --> <div class="form-group"> <label class="col-md-4 control-label" for="email">Contact Email*</label> <div class="col-md-7"> <input id="email" name="email" type="email" placeholder="johndoe@heroesonthewater.org" class="form-control input-md" ng-model="newEvent.email" ng-required="true"> <p ng-show="eventForm.email.$invalid && !eventForm.email.$pristine" class="help-block">Enter a valid email address.</p> </div> </div> <!-- Text - Phone # --> <div class="form-group"> <label class="col-md-4 control-label" for="phonenum">Contact Number*</label> <div class="col-md-7"> <input id="phonenum" name="phonenum" type="text" placeholder="(123)457-6890" class="form-control input-md mask" ng-model="newEvent.mobileNumber" ng-minlength="9" ng-required="true "> <span ng-show="eventForm.phonenum.$invalid" class="help-block">10 digits only; no formatting, prefixes or extensions.</span> <!--<p ng-show="eventForm.phonenum.$error.required" class="help-block ">Enter a valid phone number.</p>--> </div> </div> <!-- Select - Status --> <!--\r\n			<div class="form-group ">\r\n				<label class="col-md-4 control-label " for="status ">status*</label>\r\n				<div class="col-md-7 ">\r\n					<select id="status " name="status " class="form-control " ng-options="status as status.displayName for status in states " ng-model="newEventDirectory.status ">\r\n						<option value=" "></option>\r\n					</select>\r\n				</div>\r\n			</div>\r\n--> <!-- Dropdown - Chapter --> <!-- <div class="form-group ">\r\n				<label class="col-md-4 control-label " for="chapter ">Hosting Chapter</label>\r\n				<div class="col-md-7 ">\r\n					 <p>chapter dropdown will go here soon</p>\r\n					<select id="chapter " name="chapter " class="form-control " ng-options="chapter as chapter.displayName for chapter in chapters " ng-model="newEvent.chapter "></select>\r\n					ng-disabled="$scope.newEventDirectory.region==n ull "\r\n				</div>\r\n			</div>  --> <!-- Textarea - Description --> <div class="form-group"> <label class="col-md-4 control-label" for="description ">Description</label> <div class="col-md-7"> <textarea class="form-control" id="description " name="description " ng-model="newEvent.description "></textarea> </div> </div> <div class="form-group"> <div class="col-md-4"></div> <p class="col-md-7">* indicates required field.</p> </div> <!-- Button - Submit --> <div class="form-group"> <label class="col-md-4 control-label" for="submit "></label> <div class="col-md-7"> <button id="submit " name="submit " class="btn btn-primary" ng-disabled="eventForm.$invalid ">Submit</button> </div> </div> </fieldset> </form> </div> <!-- end modal body -->'),a.put("parts/newItemInventoryForm.html",'<!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Add New Item</h4> </div> <!-- end modal-header --> <div class="modal-body"> <form class="form-horizontal"> <fieldset> <!-- Text - Item Name --> <div class="form-group"> <label class="col-md-4 control-label" for="name_of_item">Item Name*</label> <div class="col-md-7"> <input id="name_of_item" name="name_of_item" type="text" placeholder="Red Kayak" class="form-control input-md" ng-model="newItem.name_of_item" ng-required="true"> </div> </div> <!-- Dropdown - Category --> <div class="form-group"> <label class="col-md-4 control-label" for="category">Category*</label> <div class="col-md-7"> <select id="category" name="category" class="form-control" ng-options="category as category.displayName for category in categories" ng-model="newItem.category"> <option value=""></option> </select> </div> </div> <!-- Dropdown - Condition --> <div class="form-group"> <label class="col-md-4 control-label" for="condition">Condition*</label> <div class="col-md-7"> <select id="condition" name="condition" class="form-control" ng-options="condition as condition.displayName for condition in conditions" ng-model="newItem.condition"> <option value=""></option> </select> </div> </div> <!-- Datepicker - Purchase Date --> <div class="form-group"> <label class="col-md-4 control-label" for="purchase_date">Purchase Date</label> <div class="col-md-7"> <p class="input-group"> <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="newItem.purchase_date" is-open="popup.opened" datepicker-options="dateOptions" ng-required="false" close-text="Close" alt-input-formats="altInputFormats"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="open()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> </div> <!-- Dropdown - Chapter --> <div class="form-group"> <label class="col-md-4 control-label" for="chapter">Owned By*</label> <div class="col-md-7"> <!-- <p>chapter dropdown will go here soon</p> --> <select id="chapter" name="chapter" class="form-control"> <option value="abc">test-option</option> </select> <!--  ng-disabled="$scope.newUserDirectory.region == null" --> </div> </div> <!-- Textarea - Notes --> <div class="form-group"> <label class="col-md-4 control-label" for="notes">Additional Notes</label> <div class="col-md-7"> <textarea class="form-control" id="notes" name="notes" ng-model="newItem.notes"></textarea> </div> </div> <div class="form-group"> <div class="col-md-4"></div> <p class="col-md-7">* indicates required field.</p> </div> <!-- Button - Submit --> <div class="form-group"> <label class="col-md-4 control-label" for="submit"></label> <div class="col-md-7"> <button id="submit" name="submit" class="btn btn-primary" ng-click="postItem()">Submit</button> </div> </div> </fieldset> </form> </div> <!-- end modal body -->'),a.put("parts/newUserDirectoryForm.html",'<div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Sign Up</h4> </div> <!-- end modal-header --> <div id="registration_form" class="modal-body" ng-init="initialize()"> <form name="userForm" class="form-horizontal" ng-submit="postUser(userForm)" novalidate style="height: 500px; overflow-y: auto; overflow-x: hidden"> <fieldset> <!-- First Name --> <div class="form-group"> <label class="col-md-4 control-label" for="fname">First Name*</label> <div class="col-md-7"> <input id="fname" name="fname" type="text" placeholder="John" ng-class="{\'highlight_field\': submitted && userForm.fname.$invalid}" class="form-control input-md" ng-model="newUserDirectory.name.first" required> <p ng-show="submitted && userForm.fname.$error.required" class="help-block">First name is required.</p> </div> </div> <!-- Last Name --> <div class="form-group"> <label class="col-md-4 control-label" for="lname">Last Name*</label> <div class="col-md-7"> <input id="lname" name="lname" type="text" placeholder="Doe" ng-class="{\'highlight_field\': submitted && userForm.lname.$invalid}" class="form-control input-md" ng-model="newUserDirectory.name.last" required> <p ng-show="submitted && userForm.lname.$error.required" class="help-block">Last name is required.</p> </div> </div> <!-- Address 1 --> <div class="form-group"> <label class="col-md-4 control-label" for="Address1">Address 1*</label> <div class="col-md-7"> <input id="Address1" name="Address1" type="text" placeholder="Street" ng-class="{\'highlight_field\': submitted && userForm.Address1.$invalid}" class="form-control input-md" ng-model="newUserDirectory.address.line1" required> <p ng-show="submitted && userForm.Address1.$error.required" class="help-block">Address 1 is required.</p> </div> </div> <!-- Address 2 --> <div class="form-group"> <label class="col-md-4 control-label" for="Address2">Address 2</label> <div class="col-md-7"> <input id="Address2" name="Address2" type="text" placeholder="APT/SUITE" class="form-control input-md" ng-model="newUserDirectory.address.line2"> </div> </div> <!-- City --> <div class="form-group"> <label class="col-md-4 control-label" for="City">City*</label> <div class="col-md-7"> <input id="City" name="City" type="text" placeholder="City" ng-class="{\'highlight_field\': submitted && userForm.City.$invalid}" class="form-control input-md" ng-model="newUserDirectory.address.city" required> <p ng-show="submitted && userForm.City.$error.required" class="help-block">City is required.</p> </div> </div> <!-- State--> <div class="form-group"> <label for="" class="col-md-4 control-label">State*</label> <div class="col-md-7"> <select name="state" ng-options="state as state.name for state in states" ng-class="{\'highlight_field\': submitted && userForm.state.$invalid}" class="form-control input-md" ng-model="newUserDirectory.address.state" required></select> <p ng-show="submitted && userForm.state.$error.required" class="help-block">State is required.</p> </div> </div> <!-- Zip --> <div class="form-group"> <label class="col-md-4 control-label" for="Zip">Zip*</label> <div class="col-md-7"> <input id="Zip" name="Zip" type="text" placeholder="99999" ng-class="{\'highlight_field\': submitted && userForm.Zip.$invalid}" class="form-control input-md" ng-model="newUserDirectory.address.zip" ng-change="ZipUpdate()" ng-model-options="{debounce:1000}" required> <p ng-show="submitted && userForm.Zip.$error.required" class="help-block">Zip code is required.</p> </div> </div> <!-- DOB --> <div class="form-group"> <label class="col-md-4 control-label" for="date">Date of Birth*</label> <div class="col-md-7"> <p class="input-group"> <input type="text" name="dob" id="sanicDOB" length="10" ng-pattern="/^([0][1-9]|[1][0-2])[- /.]([0][1-9]|[1-2][0-9]|[3][0-1])[- /.](19|20)\\d\\d$/" ng-class="{\'highlight_field\': submitted && userForm.dob.$invalid}" class="form-control input-md mask" placeholder="mm/dd/yyyy" uib-datepicker-popup="{{format}}" ng-model="newUserDirectory.DOB" is-open="popup.opened" datepicker-options="dateOptions" close-text="Close" alt-input-formats="altInputFormats" required> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="open()"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p><p ng-show="submitted && userForm.dob.$error.required" class="help-block">Date of birth is required.</p> <p ng-show="userForm.dob.$error.pattern" class="help-block">Valid date of birth is required</p>  </div> </div> <!-- Gender --> <div class="form-group"> <label class="col-md-4 control-label" for="Gender">Gender*</label> <div class="col-md-7"> <select name="Gender" ng-model="newUserDirectory.gender" ng-class="{\'highlight_field\': submitted && userForm.gender.$invalid}" class="form-control" required> <option value="M">M</option> <option value="F">F</option> <option value="N/A">N/A</option> </select> </div> </div> <!-- Email --> <div class="form-group"> <label class="col-md-4 control-label" for="email">Email*</label> <div class="col-md-7"> <input id="email" name="email" type="email" placeholder="johndoe@heroesonthewater.org" ng-class="{\'highlight_field\': submitted && userForm.email.$invalid}" class="form-control input-md" ng-model="newUserDirectory.email" required> <p ng-show="submitted && userForm.email.$error.required" class="help-block">Email address is required.</p> <p ng-show="userForm.email.$error.email" class="help-block">Valid email format required. (test@test.com)</p> </div> </div> <!-- Phone # --> <div class="form-group"> <label class="col-md-4 control-label" for="phonenum">Phone #*</label> <div class="col-md-7"> <input id="phonenum" name="phonenum" type="text" placeholder="(123)457-6890" ng-class="{\'highlight_field\': submitted && userForm.phonenum.$invalid}" class="form-control input-md mask" ng-model="newUserDirectory.phone" ng-minlength="13" ng-maxlength="13" required> <p ng-show="submitted && userForm.phonenum.$error.required" class="help-block">Phone number is required.</p> </div> </div> <!-- Region --> <div class="form-group"> <label class="col-md-4 control-label" for="region">Region*</label> <div class="col-md-7"> <select id="region" name="region" ng-class="{\'highlight_field\': submitted && userForm.region.$invalid}" class="form-control" ng-options="region as region.text for region in regions" ng-model="newUserDirectory.region" ng-change="regionUpdate()" required> </select> <p ng-show="submitted && userForm.region.$error.required && !userForm.region.$valid" class="help-block">Region is required.</p> </div> </div> <div class="form-group"> <label class="col-md-4 control-label" for="chapter">Chapter*</label> <div class="col-md-7"> <select id="chapter" name="chapter" ng-class="{\'highlight_field\': submitted && userForm.chapter.$invalid}" class="form-control" ng-model="newUserDirectory.chapter" ng-options="chapter as chapter.text for chapter in chapters" required> </select> <p ng-show="submitted && userForm.chapter.$error.required && !userForm.chapter.$valid" class="help-block">Chapter is required.</p> </div> </div> <!-- Service Type --> <div class="form-group"> <label class="col-md-4 control-label" for="service_type">Service Type*</label> <div class="col-md-7"> <input type="radio" name="service_type" ng-model="newUserDirectory.service_type" ng-click="setDefault()" value="First_Responder"> First Responder <br> <input type="radio" name="service_type" ng-model="newUserDirectory.service_type" ng-click="setDefault()" value="Military"> Military <br> <input type="radio" name="service_type" ng-model="newUserDirectory.service_type" ng-click="setDefault()" ng-value="false" checked> N/A <br> </div> </div> <!-- Service background --> <div class="form-group" ng-show="newUserDirectory.service_type"> <label class="col-md-4 control-label" for="branch">Service background*</label> <div class="col-md-7" ng-if="newUserDirectory.service_type === \'Military\'"> <input id="branch" name="branch" type="text" ng-class="{\'highlight_field\': submitted && userForm.branch.$invalid}" class="form-control input-md" ng-model="newUserDirectory.branch" required> <p ng-show="submitted && userForm.branch.$pristine && !userForm.branch.$valid" class="help-block">Service background is required.</p> </div> <div class="col-md-7" ng-if="newUserDirectory.service_type === \'First_Responder\'"> <select id="first_responder" name="first_responder" class="form-control" ng-model="newUserDirectory.branch" ng-options="branch as branch for branch in branches" required> </select> </div> </div> <!-- Years Served --> <div class="form-group" ng-if="newUserDirectory.service_type"> <label class="col-md-4 control-label" for="Years_Served">Years Served*</label> <div class="col-md-7"> <input id="Years_Served" name="Years_Served" type="text" pattern="^([0-9]|[1-9][0-9]|[1][0][0])$" ng-class="{\'highlight_field\': submitted && userForm.Years_Served.$invalid}" class="form-control input-md" ng-model="newUserDirectory.years" required> <p ng-show="submitted && userForm.Years_Served.$error.required && !userForm.Years_Served.$valid" class="help-block">Years served is required.</p> <p ng-show="userForm.Years_Served.$error.pattern" class="help-block">Valid range is 0-100</p> </div> </div> <!-- Volunteer --> <div class="form-group"> <label class="col-md-4 control-label" for="volunteer_status">Are you signing up to Volunteer?</label> <div class="col-md-7"> <br> <input type="radio" name="volunteer_status" ng-model="newUserDirectory.volunteer" ng-value="false">&nbsp No &nbsp <input type="radio" name="volunteer_status" ng-model="newUserDirectory.volunteer" ng-value="true">&nbsp Yes <br> </div> </div> <!-- Password --> <div class="form-group"> <label class="col-md-4 control-label" for="password">Password*</label> <div class="col-md-7"> <input id="password" name="password" type="password" pattern="^([a-zA-Z0-9@*#!]{6,20})$" ng-class="{\'highlight_field\': submitted && userForm.password.$invalid}" class="form-control input-md" ng-model="newUserDirectory.password" required> <p ng-show="submitted && userForm.password.$pristine" class="help-block">Password is required.</p> <p ng-show="userForm.password.$error.pattern" class="help-block">Password must contain 6-20 characters, allowable characters a-z A-Z 0-9 @ * # !</p> </div> </div> <!-- Submit --> <div class="form-group"> <label class="col-md-4 control-label" for="submit"></label> <div class="col-md-7"> <button id="submit" name="submit" class="btn btn-primary" ng-click="submitted=true">Submit</button> <button type="button" name="cancel" class="btn btn-default" ng-click="cancel()">Cancel</button> </div> </div> </fieldset> </form> </div> <!-- end modal body -->'),a.put("parts/passwordReset.html",'<!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Reset Password</h4> </div> <!-- end modal-header --> <div class="modal-body"> <form name="userForm" class="form-horizontal" ng-submit="postUser()" novalidate> <fieldset> <!-- Text -  Email --> <div class="form-group"> <label class="col-md-4 control-label" for="fname">Email*</label> <div class="col-md-7"> <input id="fname" name="fname" type="email" placeholder="email@address.com" class="form-control input-md" ng-model="userEmail.email" ng-required="true"> <p ng-show="userEmail.email.$invalid && !userEmail.email.$pristine" class="help-block">Enter valid email address.</p> </div> </div> <!-- Button - Submit/Cancel --> <div class="form-group"> <label class="col-md-4 control-label" for="submit"></label> <div class="col-md-7"> <button id="submit" name="submit" class="btn btn-primary" ng-disabled="userForm.$invalid" ng-click="resetPassword()">Submit</button> <button id="cancel" name="cancel" class="btn btn-default" ng-click="cancel()">Cancel</button> </div> </div> </fieldset> </form> </div> <!-- end modal body -->'),a.put("parts/public.events.description.html",'<!DOCTYPE html><!--Modal that displays the specific events informatiom.\r\n	Allows a volunteer on the public facing website to register for the event  --> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">{{event.name}}</h4> </div> <!-- end modal-header --> <div class="modal-body"> <div class="list-group"> <!-- <div class="list-group-item">\r\n						<h6 class="list-group-item-text">Event Status </h6>\r\n						<h4 class="list-group-item-heading">{{event.Status}}</h4>\r\n					</div> --> <div class="list-group-item"> <h6 class="list-group-item-text">Start Time</h6> <h4 class="list-group-item-heading">{{event.startTime | date:\'MM-dd-yyyy HH:mm a\'}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">End Time</h6> <h4 class="list-group-item-heading">{{event.endTime | date:\'MM-dd-yyyy HH:mm a\'}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Location</h6> <h4 class="list-group-item-heading">{{event.location}}</h4> </div> <!-- <div class="list-group-item">\r\n						<h6 class="list-group-item-text">Chapter</h6>\r\n						<h4 class="list-group-item-heading">{{event.chapter}}</h4>\r\n					</div> --> <div class="list-group-item"> <h6 class="list-group-item-text">Event Manager</h6> <h4 class="list-group-item-heading">{{event.eventManager}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Contact Number</h6> <h4 class="list-group-item-heading">{{event.mobileNumber}}</h4> </div> <div class="list-group-item"> <h6 class="list-group-item-text">Contact Email</h6> <h4 class="list-group-item-heading">{{event.email}}</h4> </div> <!-- <div class="list-group-item">\r\n						<h6 class="list-group-item-text">Capacity</h6>\r\n						<h4 class="list-group-item-heading">{{event.capacity}}</h4>\r\n					</div> --> <div class="list-group-item"> <h6 class="list-group-item-text">Description</h6> <h4 class="list-group-item-heading">{{event.description}}</h4> </div> <!--<div style="padding-top: 10px; padding-bottom: 10px;">\r\n            <a class="btn btn-primary pull-right" ng-click="postRsvp()"><i class="glyphicon glyphicon-plus" ></i>  Register for Event</a>\r\n        </div>--> </div> </div>  <!-- end modal body -->'),a.put("parts/rolerequestchangeform.html",'<!DOCTYPE html> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Role Change Request Form</h4> </div> <!-- end modal-header --> <div class="modal-body"> <form name="userForm" class="form-horizontal"> <fieldset> <div class="form-group" style="margin: 5px"> <div class="row"> <label class="col-md-4 control-label" for="fname">Current Role</label> <div class="col-md-7"> <label class="current-role-class">{{currentUserRole}}</label> </div> </div> <div class="row"> <label class="col-md-4 control-label" for="fname">Requested Role</label> <div class="col-md-7"> <select name="role" ng-options="role as role.text for role in roles" class="form-control input-md" ng-model="formData.role" required></select> </div> </div> <div class="row"> <label class="col-md-4 control-label" for="comment">Comments</label> <div class="col-md-7"> <textarea name="comment" class="form-control input-md" placeholder="description" rows="5" ng-model="formData.comment" id="comment" style="margin-top: 5px" required></textarea> </div> </div> <div class="row" style="text-align: center"> <div style="display: inline-block; margin-top: 10px"> <button id="submit" name="submit" class="btn btn-primary" ng-disabled="userForm.role.$invalid" ng-click="submitForm()">Submit</button> <button id="cancel" name="cancel" class="btn btn-danger" ng-click="cancel()">Cancel</button> </div> </div> </div> </fieldset> </form> </div> <!-- end modal body -->'),a.put("parts/sign_event_waiver.html",'<!-- start modal-header --> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Fill out your event waiver</h4> </div> <!-- end modal-header --> <!-- start modal body --> <div class="modal-body"> <form name="userForm" class="form-horizontal" ng-submit="postUser()" novalidate style="overflow-y: auto; overflow-x: hidden"> <div class="row"> <div class="col-md-6"> <legend>Participant/Volunteer</legend> <div class="form-group"> <label for="author_name">Name</label> <input class="form-control" type="text" id="author_name"> </div> <div class="form-group"> <label for="author_date">Date</label> <input class="form-control" type="date" id="author_date"> </div> </div> <div class="col-md-6"> <legend>Witness</legend> <div class="form-group"> <label for="witness_name">Name</label> <input class="form-control" type="text" id="witness_name"> </div> <div class="form-group"> <label for="witness_date">Date</label> <input class="form-control" type="date" id="witness_date"> </div> </div> <div class="row" style="text-align: center; margin: auto; width:100%"> <button type="button" class="btn btn-primary" ng-click="submitData()">save image</button> </div> </div></form> </div> <!-- end modal body -->'),a.put("parts/sign_witness_waiver.html",'<!-- start modal-header --> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">Fill out your witness waiver</h4> </div> <!-- end modal-header --> <!-- start modal body --> <div class="modal-body"> <form name="userForm" class="form-horizontal sign_up_form" novalidate style="overflow-y: auto; overflow-x: hidden"> <!--ng-submit="postUser()" novalidate style="overflow-y: auto; overflow-x: hidden;">--> <div class="row"> <div class="col-md-6"> <legend>Participant/Volunteer</legend> <div class="form-group"> <label for="author_name">Name</label> <input class="form-control" type="text" id="author_name"> </div> <div class="form-group"> <label for="author_date">Date</label> <input class="form-control" type="date" id="author_date"> </div> <div class="form-group"> <label>Enter your signature below</label> <br> <canvas id="signatureCanvas" width="300" height="37" style="border-radius:4px; border: 1px solid lightgrey"></canvas> <br> <div class="button-bar"> <button type="button" class="btn btn-primary" ng-click="clearCanvas()">Clear</button> <!--<button type="button" class=\'btn btn-primary\' ng-click=\'saveCanvas()\'>Sign</button>--> </div> </div> <div class="form-group"> <label for="author_email">Email</label> <input class="form-control" type="email" id="author_email"> </div> <div class="form-group"> <label for="author_phone">Phone</label> <input class="form-control" type="text" id="author_phone"> </div> <div class="form-group"> <label for="author_street">Street Address</label> <input class="form-control" type="text" id="author_street"> </div> <div class="form-group"> <label for="author_apt">Apt/Suite</label> <input class="form-control" type="text" id="author_apt"> </div> <div class="form-group"> <label for="author_city">City</label> <input class="form-control" type="text" id="author_city"> </div> <div class="form-group"> <label for="author_state">State</label> <input class="form-control" type="text" id="author_state"> </div> <div class="form-group"> <label for="author_zip">Zip</label> <input class="form-control" type="text" id="author_zip"> </div> </div> <div class="col-md-6"> <legend>Witness</legend> <div class="form-group"> <label for="witness_name">Name</label> <input class="form-control" type="text" id="witness_name"> </div> <div class="form-group"> <label for="witness_date">Date</label> <input class="form-control" type="date" id="witness_date"> </div> <div class="form-group"> <label>Enter your signature below</label> <br> <canvas id="signatureCanvas2" width="300" height="37" style="border-radius:4px; border: 1px solid lightgrey"></canvas> <br> <div class="button-bar"> <button type="button" class="btn btn-primary" ng-click="clearCanvas2()">Clear</button> <!--<button type="button" class=\'btn btn-primary\' ng-click=\'saveCanvas2()\'>Sign</button>--> </div> </div> <div class="form-group"> <label for="witness_email">Email</label> <input class="form-control" type="text" id="witness_email"> </div> <div class="form-group"> <label for="witness_phone">Phone</label> <input class="form-control" type="text" id="witness_phone"> </div> </div> </div> <div class="row" style="text-align: center; margin: auto; width:100%"> <button type="button" class="btn btn-primary" ng-click="submitData()">save image</button> </div> </form> </div> <!-- end modal body -->')}]);